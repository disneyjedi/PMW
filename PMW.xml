<?xml version="1.0" encoding="UTF-8"?>
<con:soapui-project id="f5ecb3a4-0cdf-40d4-b349-e730a098d285" activeEnvironment="Latest" name="Payment Middleware" resourceRoot="" soapui-version="6.0.0" abortOnError="false" runType="SEQUENTIAL" xmlns:con="http://eviware.com/soapui/config"><con:settings><con:setting id="com.eviware.soapui.impl.wsdl.actions.iface.tools.soapui.ProTestRunnerAction@values-local"><![CDATA[<xml-fragment xmlns:con="http://eviware.com/soapui/config">
  <con:entry key="Report Format(s)" value=""/>
  <con:entry key="Host:Port" value=""/>
  <con:entry key="Export JUnit Results" value="true"/>
  <con:entry key="Export All" value="true"/>
  <con:entry key="Save After" value="false"/>
  <con:entry key="Add Settings" value="false"/>
  <con:entry key="WSS Password Type" value=""/>
  <con:entry key="TestSuite" value="LoadTest"/>
  <con:entry key="Endpoint" value=""/>
  <con:entry key="Select Report Type" value="TestCase Report"/>
  <con:entry key="System Properties" value=""/>
  <con:entry key="Run in-process" value="false"/>
  <con:entry key="Password" value=""/>
  <con:entry key="Print Report" value="true"/>
  <con:entry key="Open Report" value="false"/>
  <con:entry key="Global Properties" value=""/>
  <con:entry key="Project Properties" value=""/>
  <con:entry key="Project Password" value=""/>
  <con:entry key="TestCase" value="T01 Alipay"/>
  <con:entry key="Username" value=""/>
  <con:entry key="user-settings.xml Password" value=""/>
  <con:entry key="TestRunner Path" value=""/>
  <con:entry key="Environment" value="PT"/>
  <con:entry key="Coverage Report" value="false"/>
  <con:entry key="Enable UI" value="false"/>
  <con:entry key="Root Folder" value="/Users/jeye/Desktop/report"/>
  <con:entry key="Ignore Errors" value="false"/>
  <con:entry key="Domain" value=""/>
  <con:entry key="Tool Args" value=""/>
  <con:entry key="Save Project" value="true"/>
</xml-fragment>]]></con:setting></con:settings><con:interface xsi:type="con:RestService" id="fd7fe4b8-6304-458a-9a91-41940aa1f4b2" wadlVersion="http://wadl.dev.java.net/2009/02" name="PaymentMiddleware" type="rest" xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance"><con:settings/><con:definitionCache type="TEXT" rootPart=""/><con:endpoints><con:endpoint>${#Project#ServiceEndpoint}</con:endpoint><con:endpoint>http://10.42.49.150:8080</con:endpoint><con:endpoint>http://68.71.208.254:8080</con:endpoint></con:endpoints><con:resource name="Sessions" path="/payment-middleware-service/sessions" id="e7c55c0d-3d9f-41d0-a686-141f536b490b"><con:settings/><con:parameters><con:parameter required="false"><con:name>agentId</con:name><con:value/><con:style>PLAIN</con:style><con:default/><con:description xsi:nil="true"/></con:parameter><con:parameter required="true"><con:name>orderNo</con:name><con:value/><con:style>PLAIN</con:style><con:default/><con:description xsi:nil="true"/></con:parameter><con:parameter required="true"><con:name>orderAmount</con:name><con:value/><con:style>PLAIN</con:style><con:default/><con:description xsi:nil="true"/></con:parameter><con:parameter required="true"><con:name>orderSource</con:name><con:value/><con:style>PLAIN</con:style><con:default/><con:description xsi:nil="true"/></con:parameter><con:parameter><con:name>guestEmail</con:name><con:value/><con:style>PLAIN</con:style><con:default/><con:description xsi:nil="true"/></con:parameter><con:parameter><con:name>guestMobile</con:name><con:value/><con:style>PLAIN</con:style><con:default/><con:description xsi:nil="true"/></con:parameter><con:parameter required="true"><con:name>currency</con:name><con:value/><con:style>PLAIN</con:style><con:default/><con:description xsi:nil="true"/></con:parameter><con:parameter><con:name>payTtl</con:name><con:value/><con:style>PLAIN</con:style><con:default/><con:description xsi:nil="true"/></con:parameter><con:parameter><con:name>notifyUrl</con:name><con:value/><con:style>PLAIN</con:style><con:default/><con:description xsi:nil="true"/></con:parameter><con:parameter><con:name>guestSwid</con:name><con:value/><con:style>PLAIN</con:style><con:default/><con:description xsi:nil="true"/></con:parameter><con:parameter><con:name>returnUrl</con:name><con:value/><con:style>PLAIN</con:style><con:default/><con:description xsi:nil="true"/></con:parameter></con:parameters><con:method name="Sessions" id="bf3f21b9-5f01-4357-bb98-65fdf61f3f29" method="POST"><con:settings><con:setting id="RecordResponseRepresentations">true</con:setting></con:settings><con:parameters/><con:representation type="FAULT"><con:mediaType>text/html;charset=utf-8</con:mediaType><con:status>500</con:status><con:params/><con:element>html</con:element></con:representation><con:representation type="REQUEST"><con:mediaType>application/json</con:mediaType><con:params/></con:representation><con:representation type="RESPONSE"><con:mediaType>application/json</con:mediaType><con:status>200</con:status><con:params/><con:element xmlns:ses="http://68.71.208.254/payment-middleware-service/sessions">ses:Response</con:element></con:representation><con:representation type="FAULT"><con:mediaType>application/json</con:mediaType><con:status>409 400</con:status><con:params/></con:representation><con:representation type="RESPONSE"><con:mediaType xsi:nil="true"/><con:status>0</con:status><con:params/><con:element>data</con:element></con:representation><con:representation type="RESPONSE"><con:mediaType xsi:nil="true"/><con:status>0</con:status><con:params/><con:element>data</con:element></con:representation><con:representation type="RESPONSE"><con:mediaType xsi:nil="true"/><con:status>0</con:status><con:params/><con:element>data</con:element></con:representation><con:representation type="FAULT"><con:mediaType>text/plain</con:mediaType><con:status>500</con:status><con:params/><con:element>data</con:element></con:representation><con:representation type="RESPONSE"><con:mediaType>text/html;charset=UTF-8</con:mediaType><con:status>200</con:status><con:params/><con:element>html</con:element></con:representation><con:representation type="FAULT"><con:mediaType xsi:nil="true"/><con:status>404</con:status><con:params/><con:element>data</con:element></con:representation><con:representation type="FAULT"><con:mediaType xsi:nil="true"/><con:status>404</con:status><con:params/><con:element>data</con:element></con:representation><con:representation type="FAULT"><con:mediaType xsi:nil="true"/><con:status>404</con:status><con:params/><con:element>data</con:element></con:representation><con:representation type="RESPONSE"><con:mediaType xsi:nil="true"/><con:status>0</con:status><con:params/><con:element>data</con:element></con:representation><con:representation type="RESPONSE"><con:mediaType xsi:nil="true"/><con:status>0</con:status><con:params/><con:element>data</con:element></con:representation><con:representation type="RESPONSE"><con:mediaType xsi:nil="true"/><con:status>0</con:status><con:params/><con:element>data</con:element></con:representation><con:representation type="FAULT"><con:mediaType xsi:nil="true"/><con:status>404</con:status><con:params/><con:element>data</con:element></con:representation><con:representation type="FAULT"><con:mediaType xsi:nil="true"/><con:status>404</con:status><con:params/><con:element>data</con:element></con:representation><con:representation type="FAULT"><con:mediaType xsi:nil="true"/><con:status>404</con:status><con:params/><con:element>data</con:element></con:representation><con:representation type="FAULT"><con:mediaType xsi:nil="true"/><con:status>404</con:status><con:params/><con:element>data</con:element></con:representation><con:request name="agentId" id="ac10df94-13d9-4eb3-9c59-7dd8a7e807e1" mediaType="application/json" postQueryString="false"><con:settings><con:setting id="com.eviware.soapui.impl.wsdl.WsdlRequest@request-headers">&lt;xml-fragment/></con:setting></con:settings><con:endpoint>${#Project#ServiceEndpoint}</con:endpoint><con:request>{
    "agentId" : "${agentId}",
    "orderNo" : "${orderNo}",
    "products":[    
        {"description" : "Adult one day part ticket for date 2016-09-15","unitPrice" : 100.00,"qty" : 2, "type" : "PARK_TICKET"},
        {"description" : "Child one day part ticket for date 2016-09-15","unitPrice" : 75.00,"qty" : 3, "type" : "PARK_TICKET"}
    ],
    "orderAmount" : "${orderAmount}",
    "orderSource" : "${orderSource}",
    "currency" : "${currency}"
}</con:request><con:originalUri>http://68.71.208.254/payment-middleware-service/sessions</con:originalUri><con:credentials><con:username xsi:nil="true"/><con:password xsi:nil="true"/><con:domain xsi:nil="true"/><con:selectedAuthProfile>No Authorization</con:selectedAuthProfile><con:authType>No Authorization</con:authType></con:credentials><con:jmsConfig JMSDeliveryMode="PERSISTENT"/><con:jmsPropertyConfig/><con:parameters>
  <con:entry key="orderSource" value="TICKETING"/>
  <con:entry key="agentId" value="3452344444332"/>
  <con:entry key="orderNo" value="201507211002"/>
  <con:entry key="orderAmount" value="1000.00"/>
  <con:entry key="currency" value="CNY"/>
</con:parameters><con:parameterOrder><con:entry>agentId</con:entry><con:entry>guestEmail</con:entry><con:entry>guestMobile</con:entry><con:entry>guestSwid</con:entry><con:entry>orderNo</con:entry><con:entry>orderAmount</con:entry><con:entry>orderSource</con:entry><con:entry>currency</con:entry><con:entry>payTtl</con:entry><con:entry>notifyUrl</con:entry><con:entry>returnUrl</con:entry></con:parameterOrder></con:request><con:request name="guestEmail" id="ac10df94-13d9-4eb3-9c59-7dd8a7e807e1" mediaType="application/json" postQueryString="false"><con:settings><con:setting id="com.eviware.soapui.impl.wsdl.WsdlRequest@request-headers">&lt;xml-fragment/></con:setting></con:settings><con:endpoint>${#Project#ServiceEndpoint}</con:endpoint><con:request>{
    "guestEmail" : "${guestEmail}",
    "orderNo" : "${orderNo}",
    "products":[    
        {"description" : "Adult one day part ticket for date 2016-09-15","unitPrice" : 100.00,"qty" : 2, "type" : "PARK_TICKET"},
        {"description" : "Child one day part ticket for date 2016-09-15","unitPrice" : 75.00,"qty" : 3, "type" : "PARK_TICKET"}
    ],
    "orderAmount" : "${orderAmount}",
    "orderSource" : "${orderSource}",
    "currency" : "${currency}"
}</con:request><con:originalUri>http://68.71.208.254/payment-middleware-service/sessions</con:originalUri><con:credentials><con:username xsi:nil="true"/><con:password xsi:nil="true"/><con:domain xsi:nil="true"/><con:selectedAuthProfile>No Authorization</con:selectedAuthProfile><con:authType>No Authorization</con:authType></con:credentials><con:jmsConfig JMSDeliveryMode="PERSISTENT"/><con:jmsPropertyConfig/><con:parameters>
  <con:entry key="orderSource" value="TICKETING"/>
  <con:entry key="agentId" value="3452344444332"/>
  <con:entry key="orderNo" value="201507211002"/>
  <con:entry key="orderAmount" value="1000.00"/>
  <con:entry key="currency" value="CNY"/>
</con:parameters><con:parameterOrder><con:entry>agentId</con:entry><con:entry>guestEmail</con:entry><con:entry>guestMobile</con:entry><con:entry>orderNo</con:entry><con:entry>orderAmount</con:entry><con:entry>orderSource</con:entry><con:entry>currency</con:entry><con:entry>payTtl</con:entry><con:entry>notifyUrl</con:entry><con:entry>guestSwid</con:entry><con:entry>returnUrl</con:entry></con:parameterOrder></con:request><con:request name="guestMobile" id="ac10df94-13d9-4eb3-9c59-7dd8a7e807e1" mediaType="application/json" postQueryString="false"><con:settings><con:setting id="com.eviware.soapui.impl.wsdl.WsdlRequest@request-headers">&lt;xml-fragment/></con:setting></con:settings><con:endpoint>${#Project#ServiceEndpoint}</con:endpoint><con:request>{
    "guestMobile" : "${guestMobile}",
    "orderNo" : "${orderNo}",
    "products":[    
        {"description" : "Adult one day part ticket for date 2016-09-15","unitPrice" : 100.00,"qty" : 2, "type" : "PARK_TICKET"},
        {"description" : "Child one day part ticket for date 2016-09-15","unitPrice" : 75.00,"qty" : 3, "type" : "PARK_TICKET"}
    ],
    "orderAmount" : "${orderAmount}",
    "orderSource" : "${orderSource}",
    "currency" : "${currency}"
}</con:request><con:originalUri>http://68.71.208.254/payment-middleware-service/sessions</con:originalUri><con:credentials><con:username xsi:nil="true"/><con:password xsi:nil="true"/><con:domain xsi:nil="true"/><con:selectedAuthProfile>No Authorization</con:selectedAuthProfile><con:authType>No Authorization</con:authType></con:credentials><con:jmsConfig JMSDeliveryMode="PERSISTENT"/><con:jmsPropertyConfig/><con:parameters>
  <con:entry key="orderSource" value="TICKETING"/>
  <con:entry key="agentId" value="3452344444332"/>
  <con:entry key="orderNo" value="201507211002"/>
  <con:entry key="orderAmount" value="1000.00"/>
  <con:entry key="currency" value="CNY"/>
</con:parameters><con:parameterOrder><con:entry>agentId</con:entry><con:entry>guestEmail</con:entry><con:entry>guestMobile</con:entry><con:entry>orderNo</con:entry><con:entry>orderAmount</con:entry><con:entry>orderSource</con:entry><con:entry>currency</con:entry><con:entry>payTtl</con:entry><con:entry>notifyUrl</con:entry><con:entry>guestSwid</con:entry><con:entry>returnUrl</con:entry></con:parameterOrder></con:request><con:request name="all" id="ac10df94-13d9-4eb3-9c59-7dd8a7e807e1" mediaType="application/json" postQueryString="false"><con:settings><con:setting id="com.eviware.soapui.impl.wsdl.WsdlRequest@request-headers">&lt;xml-fragment/></con:setting></con:settings><con:endpoint>${#Project#ServiceEndpoint}</con:endpoint><con:request>{
    "agentId" : "${agentId}",
    "guestEmail" : "${guestEmail}",
    "guestMobile" : "${guestMobile}",
    "orderNo" : "${orderNo}",
    "products":[    
        {"description" : "Adult one day part ticket for date 2016-09-15","unitPrice" : 100.00,"qty" : 2, "type" : "PARK_TICKET"},
        {"description" : "Child one day part ticket for date 2016-09-15","unitPrice" : 75.00,"qty" : 3, "type" : "PARK_TICKET"}
    ],
    "orderAmount" : "${orderAmount}",
    "orderSource" : "${orderSource}",
    "currency" : "${currency}",
    "payTtl" : "${payTtl}",
    "notifyUrl" : "${notifyUrl}"
}</con:request><con:originalUri>http://68.71.208.254/payment-middleware-service/sessions</con:originalUri><con:credentials><con:username xsi:nil="true"/><con:password xsi:nil="true"/><con:domain xsi:nil="true"/><con:selectedAuthProfile>No Authorization</con:selectedAuthProfile><con:authType>No Authorization</con:authType></con:credentials><con:jmsConfig JMSDeliveryMode="PERSISTENT"/><con:jmsPropertyConfig/><con:parameters>
  <con:entry key="orderSource" value="TICKETING"/>
  <con:entry key="agentId" value="3452344444332"/>
  <con:entry key="orderNo" value="201507211002"/>
  <con:entry key="orderAmount" value="1000.00"/>
  <con:entry key="currency" value="CNY"/>
</con:parameters><con:parameterOrder><con:entry>agentId</con:entry><con:entry>guestEmail</con:entry><con:entry>guestMobile</con:entry><con:entry>orderNo</con:entry><con:entry>orderAmount</con:entry><con:entry>orderSource</con:entry><con:entry>currency</con:entry><con:entry>payTtl</con:entry><con:entry>notifyUrl</con:entry><con:entry>guestSwid</con:entry><con:entry>returnUrl</con:entry></con:parameterOrder></con:request></con:method></con:resource><con:resource name="pay-options" path="/payment-middleware-service/pay-options" id="3959fc4b-2c6f-4c1b-98f4-0a7c5c49550e"><con:settings/><con:parameters/><con:method name="pay-options" id="de8b1aca-86b2-4561-a0f3-300a5b3cb0bb" method="GET"><con:settings/><con:parameters/><con:representation type="RESPONSE"><con:mediaType>application/json</con:mediaType><con:status>200</con:status><con:params/><con:element>Response</con:element></con:representation><con:request name="Request 1" id="2739f281-68b4-4484-b9e7-58443efffaab" mediaType="application/json"><con:settings><con:setting id="com.eviware.soapui.impl.wsdl.WsdlRequest@request-headers">&lt;xml-fragment/></con:setting></con:settings><con:endpoint>${#Project#ServiceEndpoint}</con:endpoint><con:request/><con:originalUri>http://68.71.208.254/payment-middleware-service/pay-options</con:originalUri><con:credentials><con:username xsi:nil="true"/><con:password xsi:nil="true"/><con:domain xsi:nil="true"/><con:selectedAuthProfile>No Authorization</con:selectedAuthProfile><con:authType>No Authorization</con:authType></con:credentials><con:jmsConfig JMSDeliveryMode="PERSISTENT"/><con:parameters/></con:request></con:method></con:resource><con:resource name="session" path="/payment-middleware-service/session?orderNo={orderNo}" id="7609321d-f50d-4cc8-981f-65ed65c611ce"><con:settings/><con:parameters><con:parameter><con:name>orderNo</con:name><con:value/><con:style>TEMPLATE</con:style><con:default/><con:description xsi:nil="true"/></con:parameter></con:parameters><con:method name="orderNo" id="44a7bab9-0bc1-4724-b53b-9dd368d722b9" method="GET"><con:settings/><con:parameters/><con:representation type="RESPONSE"><con:mediaType>application/json</con:mediaType><con:status>200</con:status><con:params/><con:element xmlns:ses="http://68.71.208.254/payment-middleware-service/session">ses:Response</con:element></con:representation><con:representation type="FAULT"><con:mediaType>application/json</con:mediaType><con:status>404</con:status><con:params/></con:representation><con:representation type="FAULT"><con:mediaType>application/octet-stream</con:mediaType><con:status>404</con:status><con:params/><con:element>data</con:element></con:representation><con:request name="Request 1" id="e8e0e0ac-f063-409c-b2ec-d755eb653cc8" mediaType="application/json"><con:settings><con:setting id="com.eviware.soapui.impl.wsdl.WsdlRequest@request-headers">&lt;xml-fragment/></con:setting></con:settings><con:endpoint>${#Project#ServiceEndpoint}</con:endpoint><con:request/><con:credentials><con:username xsi:nil="true"/><con:password xsi:nil="true"/><con:domain xsi:nil="true"/><con:selectedAuthProfile>No Authorization</con:selectedAuthProfile><con:authType>No Authorization</con:authType></con:credentials><con:jmsConfig JMSDeliveryMode="PERSISTENT"/><con:parameters/><con:parameterOrder><con:entry>orderNo</con:entry></con:parameterOrder></con:request></con:method></con:resource><con:resource name="transactions" path="/payment-middleware-service/session/{sessionId}/transactions" id="b6b281f9-e667-45a0-a352-7aec24fcd76c"><con:settings/><con:parameters><con:parameter><con:name>sessionId</con:name><con:value/><con:style>TEMPLATE</con:style><con:default/></con:parameter><con:parameter><con:name>Accept-Language</con:name><con:value/><con:style>HEADER</con:style><con:default/><con:description xsi:nil="true"/></con:parameter><con:parameter><con:name>payChannel</con:name><con:value/><con:style>PLAIN</con:style><con:default/><con:description xsi:nil="true"/></con:parameter><con:parameter><con:name>payOption</con:name><con:value/><con:style>PLAIN</con:style><con:default/><con:description xsi:nil="true"/></con:parameter><con:parameter><con:name>bankName</con:name><con:value/><con:style>PLAIN</con:style><con:default/><con:description xsi:nil="true"/></con:parameter><con:parameter><con:name>region</con:name><con:style>PLAIN</con:style></con:parameter><con:parameter><con:name>X-CIP</con:name><con:value/><con:style>HEADER</con:style><con:default/></con:parameter></con:parameters><con:method name="Method 1" id="0fa2adb8-456c-4891-ae8a-90ffe33f2fe2" method="POST"><con:settings/><con:parameters/><con:representation type="FAULT"><con:mediaType>application/octet-stream</con:mediaType><con:status>405 404</con:status><con:params/><con:element>data</con:element></con:representation><con:representation type="FAULT"><con:mediaType>text/plain</con:mediaType><con:status>500</con:status><con:params/><con:element>data</con:element></con:representation><con:representation type="REQUEST"><con:mediaType>application/json</con:mediaType><con:params/></con:representation><con:representation type="RESPONSE"><con:mediaType>application/json</con:mediaType><con:status>200</con:status><con:params/></con:representation><con:representation type="FAULT"><con:mediaType>application/json</con:mediaType><con:status>400 409</con:status><con:params/></con:representation><con:representation type="FAULT"><con:mediaType>text/html;charset=utf-8</con:mediaType><con:status>500</con:status><con:params/><con:element>html</con:element></con:representation><con:request name="Request 1" id="2e9068e2-c308-4c81-90f3-30ec3896b43c" mediaType="application/json" postQueryString="false"><con:settings><con:setting id="com.eviware.soapui.impl.wsdl.WsdlRequest@request-headers">&lt;xml-fragment/></con:setting></con:settings><con:endpoint>${#Project#ServiceEndpoint}</con:endpoint><con:request>{
    "payChannel" : "${payChannel}",
    "payOption" : "${payOption}",
    "region" : "${region}"
}</con:request><con:originalUri>http://68.71.208.254/payment-middleware-service/session//transactions</con:originalUri><con:credentials><con:username xsi:nil="true"/><con:password xsi:nil="true"/><con:domain xsi:nil="true"/><con:selectedAuthProfile>No Authorization</con:selectedAuthProfile><con:authType>No Authorization</con:authType></con:credentials><con:jmsConfig JMSDeliveryMode="PERSISTENT"/><con:parameters/><con:parameterOrder><con:entry>sessionId</con:entry><con:entry>payChannel</con:entry><con:entry>payOption</con:entry><con:entry>bankName</con:entry><con:entry>Accept-Language</con:entry><con:entry>region</con:entry><con:entry>X-CIP</con:entry></con:parameterOrder></con:request></con:method></con:resource><con:resource name="session" path="/payment-middleware-service/session/{sessionId}" id="7609321d-f50d-4cc8-981f-65ed65c611ce"><con:settings/><con:parameters><con:parameter><con:name>sessionId</con:name><con:value>sessionId</con:value><con:style>TEMPLATE</con:style><con:default>sessionId</con:default></con:parameter></con:parameters><con:method name="sessionId" id="44a7bab9-0bc1-4724-b53b-9dd368d722b9" method="GET"><con:settings/><con:parameters/><con:representation type="RESPONSE"><con:mediaType>application/json</con:mediaType><con:status>200</con:status><con:params/><con:element xmlns:ses="http://68.71.208.254/payment-middleware-service/session">ses:Response</con:element></con:representation><con:representation type="FAULT"><con:mediaType>application/json</con:mediaType><con:status>404</con:status><con:params/></con:representation><con:request name="Request 1" id="e8e0e0ac-f063-409c-b2ec-d755eb653cc8" mediaType="application/json"><con:settings><con:setting id="com.eviware.soapui.impl.wsdl.WsdlRequest@request-headers">&lt;xml-fragment/></con:setting></con:settings><con:endpoint>${#Project#ServiceEndpoint}</con:endpoint><con:request/><con:originalUri>http://68.71.208.254/payment-middleware-service/session/sessionId</con:originalUri><con:credentials><con:username xsi:nil="true"/><con:password xsi:nil="true"/><con:domain xsi:nil="true"/><con:selectedAuthProfile>No Authorization</con:selectedAuthProfile><con:authType>No Authorization</con:authType></con:credentials><con:jmsConfig JMSDeliveryMode="PERSISTENT"/><con:parameters/><con:parameterOrder><con:entry>sessionId</con:entry></con:parameterOrder></con:request></con:method></con:resource><con:resource name="deep" path="/payment-middleware-service/health/deep" id="9b8a964e-e2de-416c-953e-b1a302db4237"><con:settings/><con:parameters/><con:method name="Method 1" id="fe5da9ec-def5-40f2-8469-1b3bfe928c52" method="GET"><con:settings/><con:parameters/><con:representation type="RESPONSE"><con:mediaType>application/json</con:mediaType><con:status>200</con:status><con:params/><con:element xmlns:deep="http://10.42.49.150/payment-middleware-service/health/deep">deep:Response</con:element></con:representation><con:representation type="RESPONSE"><con:mediaType xsi:nil="true"/><con:status>0</con:status><con:params/><con:element>data</con:element></con:representation><con:representation type="RESPONSE"><con:mediaType xsi:nil="true"/><con:status>0</con:status><con:params/><con:element>data</con:element></con:representation><con:representation type="RESPONSE"><con:mediaType xsi:nil="true"/><con:status>0</con:status><con:params/><con:element>data</con:element></con:representation><con:request name="Request 1" id="b587c0b8-d08d-4ac9-a38e-af018efbee38" mediaType="application/json"><con:settings><con:setting id="com.eviware.soapui.impl.wsdl.WsdlRequest@request-headers">&lt;xml-fragment/></con:setting></con:settings><con:request/><con:originalUri>http://10.42.49.150/payment-middleware-service/health/deep</con:originalUri><con:credentials><con:selectedAuthProfile>No Authorization</con:selectedAuthProfile><con:authType>No Authorization</con:authType></con:credentials><con:jmsConfig JMSDeliveryMode="PERSISTENT"/><con:parameters/></con:request></con:method></con:resource><con:resource name="refund" path="/payment-middleware-service/refund" id="0ddf4e9c-6ad6-452e-a112-1e15632c8b39"><con:settings/><con:parameters/><con:method name="Method 1" id="a24d2a18-bdbd-4cbe-97e1-11aac29625fc" method="POST"><con:settings/><con:parameters><con:parameter><con:name>orderNo</con:name><con:value/><con:style>PLAIN</con:style><con:default/></con:parameter><con:parameter><con:name>orderSource</con:name><con:value/><con:style>PLAIN</con:style><con:default/></con:parameter><con:parameter><con:name>pspName</con:name><con:value/><con:style>PLAIN</con:style><con:default/></con:parameter><con:parameter><con:name>currency</con:name><con:value>CNY</con:value><con:style>PLAIN</con:style><con:default>CNY</con:default></con:parameter><con:parameter><con:name>amount</con:name><con:value/><con:style>PLAIN</con:style><con:default/></con:parameter><con:parameter><con:name>source</con:name><con:value>Ticketing System</con:value><con:style>PLAIN</con:style><con:default>Ticketing System</con:default></con:parameter><con:parameter><con:name>reason</con:name><con:value>No Reason</con:value><con:style>PLAIN</con:style><con:default>No Reason</con:default></con:parameter><con:parameter><con:name>notifyUrl</con:name><con:value/><con:style>PLAIN</con:style><con:default/></con:parameter></con:parameters><con:representation type="FAULT"><con:mediaType xsi:nil="true"/><con:status>404</con:status><con:params/><con:element>data</con:element></con:representation><con:representation type="REQUEST"><con:mediaType>application/json</con:mediaType><con:params/></con:representation><con:representation type="FAULT"><con:mediaType>application/json</con:mediaType><con:status>400 404</con:status><con:params/></con:representation><con:representation type="RESPONSE"><con:mediaType>application/json</con:mediaType><con:status>200</con:status><con:params/><con:element xmlns:ref="https://latest.payment-middleware-service-lite.nap7.wdpro.disney.com/refund">ref:Response</con:element></con:representation><con:representation type="FAULT"><con:mediaType>text/html;charset=utf-8</con:mediaType><con:status>500</con:status><con:params/><con:element>html</con:element></con:representation><con:representation type="RESPONSE"><con:mediaType xsi:nil="true"/><con:status>0</con:status><con:params/><con:element>data</con:element></con:representation><con:representation type="RESPONSE"><con:mediaType xsi:nil="true"/><con:status>0</con:status><con:params/><con:element>data</con:element></con:representation><con:request name="Request 1" id="398b72ad-ced8-49d3-99b8-0df866c23459" mediaType="application/json" postQueryString="false"><con:settings><con:setting id="com.eviware.soapui.impl.wsdl.WsdlRequest@request-headers">&lt;xml-fragment/></con:setting></con:settings><con:request>{
    "orderNo" : "${orderNo}", 
    "orderSource" : "${orderSource}",
    "pspName" : "${pspName}",
    "currency" : "${currency}",
    "amount" : "${amount}",
    "source" : "${source}",
    "reason" : "${reason}",
    "notifyUrl" : "${notifyUrl}"
}</con:request><con:originalUri>https://latest.payment-middleware-service-lite.nap7.wdpro.disney.com/refund</con:originalUri><con:credentials><con:selectedAuthProfile>No Authorization</con:selectedAuthProfile><con:authType>No Authorization</con:authType></con:credentials><con:jmsConfig JMSDeliveryMode="PERSISTENT"/><con:parameters>
  <con:entry key="orderSource" value="TICKETING"/>
  <con:entry key="amount" value="0.01"/>
  <con:entry key="orderNo" value="201510210001"/>
  <con:entry key="notifyUrl" value="http://10.131.245.229:8080/payment-middleware-psp-alipay-simulator/gateway"/>
  <con:entry key="pspName" value="alipay"/>
</con:parameters><con:parameterOrder><con:entry>orderNo</con:entry><con:entry>orderSource</con:entry><con:entry>pspName</con:entry><con:entry>currency</con:entry><con:entry>amount</con:entry><con:entry>source</con:entry><con:entry>reason</con:entry><con:entry>notifyUrl</con:entry></con:parameterOrder></con:request></con:method></con:resource><con:resource name="combined" path="/payment-middleware-service/transactions/combined" id="17b15567-4f17-4bc7-be73-f8aa20368c74"><con:settings/><con:parameters><con:parameter><con:name>Accept-Language</con:name><con:value/><con:style>HEADER</con:style><con:default/><con:description xsi:nil="true"/></con:parameter><con:parameter><con:name>agentId</con:name><con:value/><con:style>PLAIN</con:style><con:default/><con:description xsi:nil="true"/></con:parameter><con:parameter><con:name>guestEmail</con:name><con:value/><con:style>PLAIN</con:style><con:default/><con:description xsi:nil="true"/></con:parameter><con:parameter><con:name>guestMobile</con:name><con:value/><con:style>PLAIN</con:style><con:default/><con:description xsi:nil="true"/></con:parameter><con:parameter><con:name>guestSwid</con:name><con:value/><con:style>PLAIN</con:style><con:default/><con:description xsi:nil="true"/></con:parameter><con:parameter required="true"><con:name>orderNo</con:name><con:value/><con:style>PLAIN</con:style><con:default/><con:description xsi:nil="true"/></con:parameter><con:parameter required="true"><con:name>orderAmount</con:name><con:value/><con:style>PLAIN</con:style><con:default/><con:description xsi:nil="true"/></con:parameter><con:parameter required="true"><con:name>orderSource</con:name><con:value/><con:style>PLAIN</con:style><con:default/><con:description xsi:nil="true"/></con:parameter><con:parameter required="true"><con:name>currency</con:name><con:value/><con:style>PLAIN</con:style><con:default/><con:description xsi:nil="true"/></con:parameter><con:parameter><con:name>payTtl</con:name><con:value/><con:style>PLAIN</con:style><con:default/><con:description xsi:nil="true"/></con:parameter><con:parameter><con:name>notifyUrl</con:name><con:value/><con:style>PLAIN</con:style><con:default/><con:description xsi:nil="true"/></con:parameter><con:parameter><con:name>returnUrl</con:name><con:value/><con:style>PLAIN</con:style><con:default/><con:description xsi:nil="true"/></con:parameter><con:parameter><con:name>region</con:name><con:value/><con:style>PLAIN</con:style><con:default/><con:description xsi:nil="true"/></con:parameter><con:parameter><con:name>payChannel</con:name><con:value/><con:style>PLAIN</con:style><con:default/><con:description xsi:nil="true"/></con:parameter><con:parameter><con:name>bankName</con:name><con:value/><con:style>PLAIN</con:style><con:default/><con:description xsi:nil="true"/></con:parameter><con:parameter><con:name>payOption</con:name><con:value/><con:style>PLAIN</con:style><con:default/><con:description xsi:nil="true"/></con:parameter></con:parameters><con:method name="Method 1" id="727c3512-1997-40aa-8e87-a7eb33857ee1" method="POST"><con:settings/><con:parameters/><con:representation type="RESPONSE"><con:mediaType>application/json</con:mediaType><con:status>200</con:status><con:params/><con:element xmlns:com="https://latest.payment-middleware-service-lite.nap7.wdpro.disney.com/payment-middleware-service/transactions/combined">com:Response</con:element></con:representation><con:representation type="REQUEST"><con:mediaType>application/json</con:mediaType><con:params/></con:representation><con:representation type="FAULT"><con:mediaType>application/json</con:mediaType><con:status>400 409</con:status><con:params/></con:representation><con:representation type="FAULT"><con:mediaType>text/plain</con:mediaType><con:status>500</con:status><con:params/><con:element>data</con:element></con:representation><con:representation type="FAULT"><con:mediaType xsi:nil="true"/><con:status>404</con:status><con:params/><con:element>data</con:element></con:representation><con:representation type="FAULT"><con:mediaType xsi:nil="true"/><con:status>404</con:status><con:params/><con:element>data</con:element></con:representation><con:representation type="FAULT"><con:mediaType xsi:nil="true"/><con:status>404</con:status><con:params/><con:element>data</con:element></con:representation><con:request name="Request 1" id="37607dca-b5c5-490a-9910-01c664282dd1" mediaType="application/json" postQueryString="false"><con:settings><con:setting id="com.eviware.soapui.impl.wsdl.WsdlRequest@request-headers">&lt;xml-fragment/></con:setting></con:settings><con:request>{
    "agentId" : "${agentId}",
    "orderNo" : "${orderNo}",
    "products":[    
        {"description" : "Adult one day part ticket for date 2016-09-15","unitPrice" : 100.00,"qty" : 2, "type" : "PARK_TICKET"},
        {"description" : "Child one day part ticket for date 2016-09-15","unitPrice" : 75.00,"qty" : 3, "type" : "PARK_TICKET"}
    ],
    "orderAmount" : "${orderAmount}",
    "orderSource" : "${orderSource}",
    "currency" : "${currency}",
    "payTtl" : "${payTtl}",
    "notifyUrl" : "${notifyUrl}",
    "returnUrl" : "${returnUrl}",
    "region" : "${region}",
    "payChannel" : "${payChannel}",
    "payOption" : "${payOption}"
}</con:request><con:credentials><con:selectedAuthProfile>No Authorization</con:selectedAuthProfile><con:authType>No Authorization</con:authType></con:credentials><con:jmsConfig JMSDeliveryMode="PERSISTENT"/><con:parameters><entry key="Accept-Language" value="zh-cn" xmlns="http://eviware.com/soapui/config"/></con:parameters><con:parameterOrder><con:entry>Accept-Language</con:entry><con:entry>agentId</con:entry><con:entry>guestEmail</con:entry><con:entry>guestMobile</con:entry><con:entry>guestSwid</con:entry><con:entry>orderNo</con:entry><con:entry>orderAmount</con:entry><con:entry>orderSource</con:entry><con:entry>currency</con:entry><con:entry>payTtl</con:entry><con:entry>notifyUrl</con:entry><con:entry>returnUrl</con:entry><con:entry>region</con:entry><con:entry>payChannel</con:entry><con:entry>bankName</con:entry><con:entry>payOption</con:entry></con:parameterOrder></con:request></con:method></con:resource><con:resource name="payment" path="/payment-middleware-psp-alipay-simulator/payment/20151118170820456" id="fca94da8-bfe3-4854-8739-14f2607cdf83"><con:settings/><con:parameters><con:parameter><con:name>orderNo</con:name><con:value/><con:style>QUERY</con:style><con:default/><con:description xsi:nil="true"/></con:parameter></con:parameters><con:method name="Method 1" id="804c07b0-758b-4ae2-bd35-ad44b7f2c531" method="GET"><con:settings/><con:parameters/><con:representation type="FAULT"><con:mediaType>text/html;charset=utf-8</con:mediaType><con:status>404</con:status><con:params/><con:element>html</con:element></con:representation><con:representation type="REQUEST"><con:mediaType>application/json</con:mediaType><con:params/></con:representation><con:representation type="RESPONSE"><con:mediaType>application/json</con:mediaType><con:status>200</con:status><con:params/><con:element xmlns:ns="http://10.42.47.138/payment-middleware-psp-alipay-simulator/payment/20151118164811512">ns:Response</con:element></con:representation><con:representation type="FAULT"><con:mediaType xsi:nil="true"/><con:status>404</con:status><con:params/><con:element>data</con:element></con:representation><con:request name="Request 1" id="35053e2c-5742-48eb-a8a9-5b74f43fd97d" mediaType="application/json"><con:settings><con:setting id="com.eviware.soapui.impl.wsdl.WsdlRequest@request-headers">&lt;entry key="Accept-Type" value="application/json" xmlns="http://eviware.com/soapui/config"/></con:setting></con:settings><con:request/><con:originalUri>http://10.42.47.138/payment-middleware-psp-alipay-simulator/payment/20151118164811512</con:originalUri><con:credentials><con:selectedAuthProfile>No Authorization</con:selectedAuthProfile><con:authType>No Authorization</con:authType></con:credentials><con:jmsConfig JMSDeliveryMode="PERSISTENT"/><con:parameters/><con:parameterOrder><con:entry>orderNo</con:entry></con:parameterOrder></con:request></con:method></con:resource><con:resource name="GetOrderStatus" path="/payment-middleware-service/order/booking?orderNo={orderNo}&amp;orderSource={orderSource}" id="68f40317-e788-43a5-b239-a36b128e7c75"><con:settings/><con:parameters><con:parameter><con:name>orderNo</con:name><con:value/><con:style>TEMPLATE</con:style><con:default/><con:description xsi:nil="true"/></con:parameter><con:parameter><con:name>orderSource</con:name><con:value/><con:style>TEMPLATE</con:style><con:default/><con:description xsi:nil="true"/></con:parameter></con:parameters><con:method name="GetOrder" id="6496a9ae-c6c6-4830-ab4f-db5e2012a382" method="GET"><con:settings/><con:parameters/><con:representation type="FAULT"><con:mediaType>application/json</con:mediaType><con:status>400</con:status><con:params/></con:representation><con:representation type="RESPONSE"><con:mediaType>application/json</con:mediaType><con:status>200</con:status><con:params/><con:element xmlns:book="https://latest.payment-middleware-service-lite.nap7.wdpro.disney.com/payment-middleware-service/order/booking">book:Response</con:element></con:representation><con:request name="Request 1" id="abd42b8a-0f2f-443c-8a22-41864204da0d" mediaType="application/json"><con:settings><con:setting id="com.eviware.soapui.impl.wsdl.WsdlRequest@request-headers">&lt;xml-fragment/></con:setting></con:settings><con:request/><con:originalUri>https://latest.payment-middleware-service-lite.nap7.wdpro.disney.com/payment-middleware-service/order/booking</con:originalUri><con:credentials><con:selectedAuthProfile>No Authorization</con:selectedAuthProfile><con:authType>No Authorization</con:authType></con:credentials><con:jmsConfig JMSDeliveryMode="PERSISTENT"/><con:parameters>
  <con:entry key="orderSource" value="TICKETING"/>
  <con:entry key="orderNo" value="20151202143943108"/>
</con:parameters><con:parameterOrder><con:entry>orderNo</con:entry><con:entry>orderSource</con:entry></con:parameterOrder></con:request></con:method></con:resource><con:resource name="UpdateOrderStatus" path="/payment-middleware-service/order/booking" id="9cc90975-bef1-412e-9cee-88b531b5f783"><con:settings/><con:parameters><con:parameter><con:name>orderNo</con:name><con:value/><con:style>TEMPLATE</con:style><con:default/><con:description xsi:nil="true"/></con:parameter><con:parameter><con:name>orderSource</con:name><con:value/><con:style>TEMPLATE</con:style><con:default/><con:description xsi:nil="true"/></con:parameter><con:parameter><con:name>bookingState</con:name><con:value/><con:style>TEMPLATE</con:style><con:default/><con:description xsi:nil="true"/></con:parameter></con:parameters><con:method name="Method 1" id="752171d6-cda0-4d22-8fe3-826eb2a2fc57" method="PUT"><con:settings/><con:parameters/><con:request name="Request 1" id="7915100a-7f7f-40e3-9ac2-a8291939aca7" mediaType="application/json" postQueryString="false"><con:settings><con:setting id="com.eviware.soapui.impl.wsdl.WsdlRequest@request-headers">&lt;xml-fragment/></con:setting></con:settings><con:request/><con:credentials><con:selectedAuthProfile>No Authorization</con:selectedAuthProfile><con:authType>No Authorization</con:authType></con:credentials><con:jmsConfig JMSDeliveryMode="PERSISTENT"/><con:parameters/><con:parameterOrder><con:entry>orderNo</con:entry><con:entry>orderSource</con:entry><con:entry>bookingState</con:entry></con:parameterOrder></con:request></con:method></con:resource></con:interface><con:interface xsi:type="con:RestService" id="aac65d5a-f014-45a6-9448-05ff2cc3992b" wadlVersion="http://wadl.dev.java.net/2009/02" name="PaymentSimulator" type="rest" xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance"><con:settings/><con:definitionCache type="TEXT" rootPart=""/><con:endpoints><con:endpoint>SimulatorEndpoint</con:endpoint></con:endpoints><con:resource name="payment" path="/payment-middleware-psp-alipay-simulator/payment/{orderNo}" id="f0b589ed-4f83-491b-b5a1-6dc434fb85d7"><con:settings/><con:parameters><con:parameter><con:name>orderNo</con:name><con:value>orderNo</con:value><con:style>TEMPLATE</con:style><con:default>orderNo</con:default></con:parameter></con:parameters><con:method name="Method 1" id="879e9047-c2bf-4f4f-a830-7edce300bdaa" method="GET"><con:settings/><con:parameters/><con:representation type="FAULT"><con:mediaType xsi:nil="true"/><con:status>404</con:status><con:params/><con:element>data</con:element></con:representation><con:representation type="RESPONSE"><con:mediaType>application/json</con:mediaType><con:status>200</con:status><con:params/><con:element xmlns:ns="http://10.42.47.140/payment-middleware-psp-alipay-simulator/payment/20151118171852801">ns:Response</con:element></con:representation><con:representation type="FAULT"><con:mediaType xsi:nil="true"/><con:status>404</con:status><con:params/><con:element>data</con:element></con:representation><con:representation type="FAULT"><con:mediaType xsi:nil="true"/><con:status>404</con:status><con:params/><con:element>data</con:element></con:representation><con:representation type="FAULT"><con:mediaType xsi:nil="true"/><con:status>404</con:status><con:params/><con:element>data</con:element></con:representation><con:representation type="FAULT"><con:mediaType xsi:nil="true"/><con:status>404</con:status><con:params/><con:element>data</con:element></con:representation><con:representation type="FAULT"><con:mediaType xsi:nil="true"/><con:status>404</con:status><con:params/><con:element>data</con:element></con:representation><con:representation type="FAULT"><con:mediaType xsi:nil="true"/><con:status>404</con:status><con:params/><con:element>data</con:element></con:representation><con:representation type="FAULT"><con:mediaType xsi:nil="true"/><con:status>404</con:status><con:params/><con:element>data</con:element></con:representation><con:representation type="FAULT"><con:mediaType xsi:nil="true"/><con:status>404</con:status><con:params/><con:element>data</con:element></con:representation><con:representation type="FAULT"><con:mediaType xsi:nil="true"/><con:status>404</con:status><con:params/><con:element>data</con:element></con:representation><con:representation type="FAULT"><con:mediaType xsi:nil="true"/><con:status>404</con:status><con:params/><con:element>data</con:element></con:representation><con:representation type="FAULT"><con:mediaType xsi:nil="true"/><con:status>404</con:status><con:params/><con:element>data</con:element></con:representation><con:representation type="FAULT"><con:mediaType xsi:nil="true"/><con:status>404</con:status><con:params/><con:element>data</con:element></con:representation><con:representation type="FAULT"><con:mediaType xsi:nil="true"/><con:status>404</con:status><con:params/><con:element>data</con:element></con:representation><con:request name="Request 1" id="85fa2289-98b3-4ad9-8f69-127896091888" mediaType="application/json"><con:settings/><con:request/><con:credentials><con:selectedAuthProfile>No Authorization</con:selectedAuthProfile><con:authType>No Authorization</con:authType></con:credentials><con:jmsConfig JMSDeliveryMode="PERSISTENT"/><con:parameters/><con:parameterOrder><con:entry/></con:parameterOrder></con:request></con:method></con:resource></con:interface><con:testSuite id="b6027087-9339-40e6-b3a3-11eef84c9dc5" name="CreateSession"><con:description>TestSuite generated for REST Service [http://68.71.208.254:8080]</con:description><con:settings/><con:runType>SEQUENTIAL</con:runType><con:testCase id="b95460ca-fc38-4a44-be02-3793dafc0eb9" failOnError="true" failTestCaseOnErrors="true" keepSession="false" maxResults="0" name="T01 agentId positive" searchProperties="true"><con:description>TestCase generated for REST Resource [Sessions] located at [/sessions]</con:description><con:settings/><con:testStep type="groovy" name="generate orderNo" id="715df319-30bc-4181-9f3a-c40f3b428576"><con:settings/><con:config><script>import java.text.SimpleDateFormat;

def today = new Date()
def format = new SimpleDateFormat();
format = new SimpleDateFormat("yyyyMMddkkmmssSSS");
def DateToStr = format.format(today);

log.info DateToStr
return DateToStr</script></con:config></con:testStep><con:testStep type="datasource" name="DataSource" id="12100cdb-d043-4c6f-b02b-df1c919be0e7"><con:settings/><con:config xsi:type="con:DataSourceStep" xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance"><con:dataSource type="Grid"><con:configuration><check><![CDATA[<xml-fragment><con:entry xmlns:con="http://eviware.com/soapui/config">true</con:entry><con:entry xmlns:con="http://eviware.com/soapui/config">true</con:entry></xml-fragment>]]></check><row><![CDATA[<xml-fragment><con:entry xmlns:con="http://eviware.com/soapui/config">3452344444332</con:entry><con:entry xmlns:con="http://eviware.com/soapui/config"/><con:entry xmlns:con="http://eviware.com/soapui/config"/><con:entry xmlns:con="http://eviware.com/soapui/config">${generate orderNo#result}</con:entry><con:entry xmlns:con="http://eviware.com/soapui/config">1000.00</con:entry><con:entry xmlns:con="http://eviware.com/soapui/config">TICKETING</con:entry><con:entry xmlns:con="http://eviware.com/soapui/config">CNY</con:entry></xml-fragment>]]></row><row><![CDATA[<xml-fragment><con:entry xmlns:con="http://eviware.com/soapui/config"/><con:entry xmlns:con="http://eviware.com/soapui/config"/><con:entry xmlns:con="http://eviware.com/soapui/config"/><con:entry xmlns:con="http://eviware.com/soapui/config"/><con:entry xmlns:con="http://eviware.com/soapui/config"/><con:entry xmlns:con="http://eviware.com/soapui/config"/><con:entry xmlns:con="http://eviware.com/soapui/config"/></xml-fragment>]]></row></con:configuration></con:dataSource><con:property>agentId</con:property><con:property>guestEmail</con:property><con:property>guestMobile</con:property><con:property>orderNo</con:property><con:property>orderAmount</con:property><con:property>orderSource</con:property><con:property>currency</con:property><con:restartOnRun>true</con:restartOnRun></con:config></con:testStep><con:testStep type="restrequest" name="createSession request" id="efd51b8a-5c44-4bb5-9ff0-14bc0c06e6dd"><con:settings/><con:config service="PaymentMiddleware" resourcePath="/payment-middleware-service/sessions" methodName="Sessions" xsi:type="con:RestRequestStep" xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance"><con:restRequest name="createSession request" id="ac10df94-13d9-4eb3-9c59-7dd8a7e807e1" mediaType="application/json" postQueryString="false"><con:settings><con:setting id="com.eviware.soapui.impl.wsdl.WsdlRequest@request-headers">&lt;xml-fragment/></con:setting></con:settings><con:endpoint>${#Project#ServiceEndpoint}</con:endpoint><con:request>{
    "agentId" : "${agentId}",
    "orderNo" : "${orderNo}",
    "products":[    
        {"description" : "Adult one day part ticket for date 2016-09-15","unitPrice" : 100.00,"qty" : 2, "type" : "PARK_TICKET"},
        {"description" : "Child one day part ticket for date 2016-09-15","unitPrice" : 75.00,"qty" : 3, "type" : "PARK_TICKET"}
    ],
    "orderAmount" : "${orderAmount}",
    "orderSource" : "${orderSource}",
    "currency" : "${currency}"
}</con:request><con:originalUri>http://68.71.208.254/payment-middleware-service/sessions</con:originalUri><con:assertion type="JsonPath Match" id="eb067ffb-fa50-4656-b144-0eeab7277d49" name="SessionInfo Match"><con:configuration><path>$.sessionInfo</path><content>{"sessionId":"*","orderNo":"*","orderSource":"*","orderAmount":"*","currency":"*","state":"UNPAID","remark":*,"agentId":"*","guestMobile":*,"guestEmail":*,"guestSwid":*,"createdDate":"*","payTtl":*,"lastModifiedDate":"*","notifyUrl":*,"returnUrl":*}</content><allowWildcards>true</allowWildcards><ignoreNamspaceDifferences>false</ignoreNamspaceDifferences><ignoreComments>false</ignoreComments></con:configuration></con:assertion><con:assertion type="GroovyScriptAssertion" id="db316a27-8530-4f3b-bf13-235a8c500876" name="createdDate,expirationDate,lastModifiedDate Assertion" disabled="true"><con:configuration><scriptText>import org.joda.time.*;
import org.joda.time.format.*;

DateTimeFormatter parser = ISODateTimeFormat.dateTime();

def createdDate = parser.parseDateTime(context.expand( '${createSession request#Response#$.sessionInfo.createdDate}' ))
def expirationDate = parser.parseDateTime(context.expand( '${createSession request#Response#$.sessionInfo.expirationDate}' ))
def lastModifiedDate = parser.parseDateTime(context.expand( '${createSession request#Response#$.sessionInfo.lastModifiedDate}' ))


assert createdDate != null
assert expirationDate != null
assert lastModifiedDate != null
assert lastModifiedDate == createdDate
assert Minutes.minutesBetween(createdDate, expirationDate).getMinutes() % 60 == 29</scriptText></con:configuration></con:assertion><con:assertion type="JsonPath Match" id="ce8eb01a-26fb-4e06-a9b1-e6f6a0b897ba" name="Match content of [links]"><con:configuration><path>$.links</path><content>{"cancelSession":{"rel":"related","href":"*://*/payment-middleware-service/session/*","type":"text/plain"},"getSession":{"rel":"related","href":"*://*/payment-middleware-service/session/*","type":"application/json"},"createTransaction":{"rel":"related","href":"*://*/payment-middleware-service/session/*/transactions","type":"application/json"}}</content><allowWildcards>true</allowWildcards><ignoreNamspaceDifferences>false</ignoreNamspaceDifferences><ignoreComments>false</ignoreComments></con:configuration></con:assertion><con:assertion type="JsonPath Match" id="ae6da209-393c-4489-a555-4074136d61f6" name="Match content of [orderNo]"><con:configuration><path>$.sessionInfo.orderNo</path><content>${DataSource#orderNo}</content><allowWildcards>false</allowWildcards><ignoreNamspaceDifferences>false</ignoreNamspaceDifferences><ignoreComments>false</ignoreComments></con:configuration></con:assertion><con:assertion type="JsonPath Match" id="d924b073-052f-42ce-b92b-d2a2007c5db2" name="Match content of [orderSource]"><con:configuration><path>$.sessionInfo.orderSource</path><content>${DataSource#orderSource}</content><allowWildcards>false</allowWildcards><ignoreNamspaceDifferences>false</ignoreNamspaceDifferences><ignoreComments>false</ignoreComments></con:configuration></con:assertion><con:assertion type="JsonPath Match" id="9635dc34-cff6-4f69-b51d-f2e0e8f90ada" name="Match content of [orderAmount]"><con:configuration><path>$.sessionInfo.orderAmount</path><content>${DataSource#orderAmount}</content><allowWildcards>false</allowWildcards><ignoreNamspaceDifferences>false</ignoreNamspaceDifferences><ignoreComments>false</ignoreComments></con:configuration></con:assertion><con:assertion type="JsonPath Match" id="02a048a5-ae80-46c7-ac5b-d07f7bbe3ebe" name="Match content of [currency]"><con:configuration><path>$.sessionInfo.currency</path><content>${DataSource#currency}</content><allowWildcards>false</allowWildcards><ignoreNamspaceDifferences>false</ignoreNamspaceDifferences><ignoreComments>false</ignoreComments></con:configuration></con:assertion><con:assertion type="JsonPath Match" id="4e9bd59b-8110-4ccb-af53-5a880c736136" name="Match content of [state]"><con:configuration><path>$.sessionInfo.state</path><content>UNPAID</content><allowWildcards>false</allowWildcards><ignoreNamspaceDifferences>false</ignoreNamspaceDifferences><ignoreComments>false</ignoreComments></con:configuration></con:assertion><con:assertion type="JsonPath Match" id="014dd7ea-939c-4881-bf69-bf54e04d8ddf" name="Match content of [agentId]"><con:configuration><path>$.sessionInfo.agentId</path><content>${DataSource#agentId}</content><allowWildcards>false</allowWildcards><ignoreNamspaceDifferences>false</ignoreNamspaceDifferences><ignoreComments>false</ignoreComments></con:configuration></con:assertion><con:assertion type="JsonPath Match" id="1f4fafd1-fe26-4151-984c-ae769a05a492" name="Match content of [remark]"><con:configuration><path>$.sessionInfo.remark</path><content>null</content><allowWildcards>false</allowWildcards><ignoreNamspaceDifferences>false</ignoreNamspaceDifferences><ignoreComments>false</ignoreComments></con:configuration></con:assertion><con:assertion type="JsonPath Match" id="c3baaf59-5450-49b5-abdd-a23e8f1d0226" name="Match content of [guestMobile]"><con:configuration><path>$.sessionInfo.guestMobile</path><content>null</content><allowWildcards>false</allowWildcards><ignoreNamspaceDifferences>false</ignoreNamspaceDifferences><ignoreComments>false</ignoreComments></con:configuration></con:assertion><con:assertion type="JsonPath Match" id="b32b6169-0db8-4064-af19-f3afc485dbb3" name="Match content of [guestEmail]"><con:configuration><path>$.sessionInfo.guestEmail</path><content>null</content><allowWildcards>false</allowWildcards><ignoreNamspaceDifferences>false</ignoreNamspaceDifferences><ignoreComments>false</ignoreComments></con:configuration></con:assertion><con:assertion type="JsonPath Match" id="77158e51-9a06-4cfe-ac76-2eb5fab8c20b" name="Match content of [guestSwid]"><con:configuration><path>$.sessionInfo.guestSwid</path><content>null</content><allowWildcards>false</allowWildcards><ignoreNamspaceDifferences>false</ignoreNamspaceDifferences><ignoreComments>false</ignoreComments></con:configuration></con:assertion><con:assertion type="JsonPath Match" id="af039dfc-87e4-4c56-9c0b-365000a0770f" name="Match content of [notifyUrl]"><con:configuration><path>$.sessionInfo.notifyUrl</path><content>null</content><allowWildcards>false</allowWildcards><ignoreNamspaceDifferences>false</ignoreNamspaceDifferences><ignoreComments>false</ignoreComments></con:configuration></con:assertion><con:assertion type="JsonPath Match" id="df329e1f-b6e7-4897-b7ab-9c3ec33ff305" name="Match content of [returnUrl]"><con:configuration><path>$.sessionInfo.returnUrl</path><content>null</content><allowWildcards>false</allowWildcards><ignoreNamspaceDifferences>false</ignoreNamspaceDifferences><ignoreComments>false</ignoreComments></con:configuration></con:assertion><con:credentials><con:username xsi:nil="true"/><con:password xsi:nil="true"/><con:domain xsi:nil="true"/><con:selectedAuthProfile>No Authorization</con:selectedAuthProfile><con:authType>No Authorization</con:authType></con:credentials><con:jmsConfig JMSDeliveryMode="PERSISTENT"/><con:jmsPropertyConfig/><con:parameters>
  <con:entry key="orderSource" value="${DataSource#orderSource}"/>
  <con:entry key="agentId" value="${DataSource#agentId}"/>
  <con:entry key="orderNo" value="${DataSource#orderNo}"/>
  <con:entry key="orderAmount" value="${DataSource#orderAmount}"/>
  <con:entry key="guestMobile" value="${DataSource#guestMobile}"/>
  <con:entry key="currency" value="${DataSource#currency}"/>
  <con:entry key="guestEmail" value="${DataSource#guestEmail}"/>
</con:parameters><con:parameterOrder><con:entry>agentId</con:entry><con:entry>guestEmail</con:entry><con:entry>guestMobile</con:entry><con:entry>orderNo</con:entry><con:entry>orderAmount</con:entry><con:entry>orderSource</con:entry><con:entry>currency</con:entry><con:entry>payTtl</con:entry><con:entry>notifyUrl</con:entry><con:entry>guestSwid</con:entry><con:entry>returnUrl</con:entry></con:parameterOrder></con:restRequest></con:config></con:testStep><con:properties/><con:reportParameters/><con:breakPoints><con:testStepId>12100cdb-d043-4c6f-b02b-df1c919be0e7</con:testStepId><con:status>NONE</con:status><con:properties/></con:breakPoints></con:testCase><con:testCase id="dceaa044-aef9-42d9-8440-facc1c40e993" failOnError="true" failTestCaseOnErrors="true" keepSession="false" maxResults="0" name="T02 agentId,guestEmail,guestMobile empty" searchProperties="true"><con:settings/><con:testStep type="groovy" name="generate orderNo" id="c6a673cc-ea7b-47f3-b144-900137b1a770"><con:settings/><con:config><script>import java.text.SimpleDateFormat;

def today = new Date()
def format = new SimpleDateFormat();
format = new SimpleDateFormat("yyyyMMddkkmmssSSS");
def DateToStr = format.format(today);

log.info DateToStr
return DateToStr</script></con:config></con:testStep><con:testStep type="datasource" name="DataSource" id="1053fcdc-cf03-49a7-be02-99479ea506b1"><con:settings/><con:config xsi:type="con:DataSourceStep" xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance"><con:dataSource type="Grid"><con:configuration><check><![CDATA[<xml-fragment><con:entry xmlns:con="http://eviware.com/soapui/config">true</con:entry><con:entry xmlns:con="http://eviware.com/soapui/config">true</con:entry></xml-fragment>]]></check><row><![CDATA[<xml-fragment><con:entry xmlns:con="http://eviware.com/soapui/config"/><con:entry xmlns:con="http://eviware.com/soapui/config"/><con:entry xmlns:con="http://eviware.com/soapui/config"/><con:entry xmlns:con="http://eviware.com/soapui/config">${generate orderNo#result}</con:entry><con:entry xmlns:con="http://eviware.com/soapui/config">1000.00</con:entry><con:entry xmlns:con="http://eviware.com/soapui/config">TICKETING</con:entry><con:entry xmlns:con="http://eviware.com/soapui/config">CNY</con:entry></xml-fragment>]]></row><row><![CDATA[<xml-fragment><con:entry xmlns:con="http://eviware.com/soapui/config"/><con:entry xmlns:con="http://eviware.com/soapui/config"/><con:entry xmlns:con="http://eviware.com/soapui/config"/><con:entry xmlns:con="http://eviware.com/soapui/config"/><con:entry xmlns:con="http://eviware.com/soapui/config"/><con:entry xmlns:con="http://eviware.com/soapui/config"/><con:entry xmlns:con="http://eviware.com/soapui/config"/></xml-fragment>]]></row></con:configuration></con:dataSource><con:property>agentId</con:property><con:property>guestEmail</con:property><con:property>guestMobile</con:property><con:property>orderNo</con:property><con:property>orderAmount</con:property><con:property>orderSource</con:property><con:property>currency</con:property><con:restartOnRun>true</con:restartOnRun></con:config></con:testStep><con:testStep type="restrequest" name="REST Request" id="9f84b95d-1675-4d19-b835-0c48458b3885"><con:settings/><con:config service="PaymentMiddleware" resourcePath="/payment-middleware-service/sessions" methodName="Sessions" xsi:type="con:RestRequestStep" xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance"><con:restRequest name="REST Request" id="ac10df94-13d9-4eb3-9c59-7dd8a7e807e1" mediaType="application/json" postQueryString="false"><con:settings><con:setting id="com.eviware.soapui.impl.wsdl.WsdlRequest@request-headers">&lt;xml-fragment/></con:setting></con:settings><con:endpoint>${#Project#ServiceEndpoint}</con:endpoint><con:request>{
    "agentId" : "${agentId}",
    "guestEmail" : "${guestEmail}",
    "guestMobile" : "${guestMobile}",
    "orderNo" : "${orderNo}",
    "products":[    
        {"description" : "Adult one day part ticket for date 2016-09-15","unitPrice" : 100.00,"qty" : 2, "type" : "PARK_TICKET"},
        {"description" : "Child one day part ticket for date 2016-09-15","unitPrice" : 75.00,"qty" : 3, "type" : "PARK_TICKET"}
    ],
    "orderAmount" : "${orderAmount}",
    "orderSource" : "${orderSource}",
    "currency" : "${currency}"
}</con:request><con:originalUri>http://68.71.208.254/payment-middleware-service/sessions</con:originalUri><con:assertion type="Valid HTTP Status Codes" id="e3695b52-70a6-4f4f-b5ed-5a667d789af9" name="Valid HTTP Status Codes"><con:settings/><con:configuration><codes>400</codes></con:configuration></con:assertion><con:assertion type="Simple Equals" id="48f32cb1-0a44-4489-8706-1d02d548cbbf" name="Equals"><con:configuration><patternText>1012:guest email, guest mobile, guest swid and agent id are empty</patternText><caseSensitive>true</caseSensitive></con:configuration></con:assertion><con:credentials><con:username xsi:nil="true"/><con:password xsi:nil="true"/><con:domain xsi:nil="true"/><con:selectedAuthProfile>No Authorization</con:selectedAuthProfile><con:authType>No Authorization</con:authType></con:credentials><con:jmsConfig JMSDeliveryMode="PERSISTENT"/><con:jmsPropertyConfig/><con:parameters>
  <con:entry key="orderSource" value="${DataSource#orderSource}"/>
  <con:entry key="agentId" value="${DataSource#agentId}"/>
  <con:entry key="orderNo" value="${DataSource#orderNo}"/>
  <con:entry key="orderAmount" value="${DataSource#orderAmount}"/>
  <con:entry key="guestMobile" value="${DataSource#guestMobile}"/>
  <con:entry key="currency" value="${DataSource#currency}"/>
  <con:entry key="guestEmail" value="${DataSource#guestEmail}"/>
</con:parameters><con:parameterOrder><con:entry>agentId</con:entry><con:entry>guestEmail</con:entry><con:entry>guestMobile</con:entry><con:entry>orderNo</con:entry><con:entry>orderAmount</con:entry><con:entry>orderSource</con:entry><con:entry>currency</con:entry><con:entry>payTtl</con:entry><con:entry>notifyUrl</con:entry><con:entry>guestSwid</con:entry><con:entry>returnUrl</con:entry></con:parameterOrder></con:restRequest></con:config></con:testStep><con:properties/><con:reportParameters/></con:testCase><con:testCase id="3ffeebba-19ff-4fae-a0aa-3805ed8d65d0" failOnError="true" failTestCaseOnErrors="true" keepSession="false" maxResults="0" name="T03 guestEmail positive" searchProperties="true"><con:settings/><con:testStep type="groovy" name="generate orderNo" id="e5333809-e4fa-40b9-8ad8-1ab8d788e14a"><con:settings/><con:config><script>import java.text.SimpleDateFormat;

def today = new Date()
def format = new SimpleDateFormat();
format = new SimpleDateFormat("yyyyMMddkkmmssSSS");
def DateToStr = format.format(today);

log.info DateToStr
return DateToStr</script></con:config></con:testStep><con:testStep type="datasource" name="DataSource" id="93fddd06-54eb-4e11-b05f-8def28806987"><con:settings/><con:config xsi:type="con:DataSourceStep" xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance"><con:dataSource type="Grid"><con:configuration><check><![CDATA[<xml-fragment><con:entry xmlns:con="http://eviware.com/soapui/config">true</con:entry><con:entry xmlns:con="http://eviware.com/soapui/config">true</con:entry></xml-fragment>]]></check><row><![CDATA[<xml-fragment><con:entry xmlns:con="http://eviware.com/soapui/config"/><con:entry xmlns:con="http://eviware.com/soapui/config">aaa@aa.com</con:entry><con:entry xmlns:con="http://eviware.com/soapui/config"/><con:entry xmlns:con="http://eviware.com/soapui/config">${generate orderNo#result}</con:entry><con:entry xmlns:con="http://eviware.com/soapui/config">1000.01</con:entry><con:entry xmlns:con="http://eviware.com/soapui/config">TICKETING</con:entry><con:entry xmlns:con="http://eviware.com/soapui/config">CNY</con:entry></xml-fragment>]]></row><row><![CDATA[<xml-fragment><con:entry xmlns:con="http://eviware.com/soapui/config"/><con:entry xmlns:con="http://eviware.com/soapui/config"/><con:entry xmlns:con="http://eviware.com/soapui/config"/><con:entry xmlns:con="http://eviware.com/soapui/config"/><con:entry xmlns:con="http://eviware.com/soapui/config"/><con:entry xmlns:con="http://eviware.com/soapui/config"/><con:entry xmlns:con="http://eviware.com/soapui/config"/></xml-fragment>]]></row></con:configuration></con:dataSource><con:property>agentId</con:property><con:property>guestEmail</con:property><con:property>guestMobile</con:property><con:property>orderNo</con:property><con:property>orderAmount</con:property><con:property>orderSource</con:property><con:property>currency</con:property><con:restartOnRun>true</con:restartOnRun></con:config></con:testStep><con:testStep type="restrequest" name="createSession request" id="2819d2d7-df26-40bb-8eec-40e7145cf50d"><con:settings/><con:config service="PaymentMiddleware" resourcePath="/payment-middleware-service/sessions" methodName="Sessions" xsi:type="con:RestRequestStep" xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance"><con:restRequest name="createSession request" id="ac10df94-13d9-4eb3-9c59-7dd8a7e807e1" mediaType="application/json" postQueryString="false"><con:settings><con:setting id="com.eviware.soapui.impl.wsdl.WsdlRequest@request-headers">&lt;xml-fragment/></con:setting></con:settings><con:endpoint>${#Project#ServiceEndpoint}</con:endpoint><con:request>{
    "guestEmail" : "${guestEmail}",
    "orderNo" : "${orderNo}",
    "products":[    
        {"description" : "Adult one day part ticket for date 2016-09-15","unitPrice" : 100.00,"qty" : 2, "type" : "PARK_TICKET"},
        {"description" : "Child one day part ticket for date 2016-09-15","unitPrice" : 75.00,"qty" : 3, "type" : "PARK_TICKET"}
    ],
    "orderAmount" : "${orderAmount}",
    "orderSource" : "${orderSource}",
    "currency" : "${currency}"
}</con:request><con:originalUri>http://68.71.208.254/payment-middleware-service/sessions</con:originalUri><con:assertion type="JsonPath Match" id="eb067ffb-fa50-4656-b144-0eeab7277d49" name="SessionInfo Match"><con:configuration><path>$.sessionInfo</path><content>{"sessionId":"*","orderNo":"*","orderSource":"*","orderAmount":"*","currency":"*","state":"UNPAID","remark":*,"agentId":*,"guestMobile":*,"guestEmail":*,"guestSwid":*,"createdDate":"*","payTtl":*,"lastModifiedDate":"*","notifyUrl":*,"returnUrl":*}</content><allowWildcards>true</allowWildcards><ignoreNamspaceDifferences>false</ignoreNamspaceDifferences><ignoreComments>false</ignoreComments></con:configuration></con:assertion><con:assertion type="GroovyScriptAssertion" id="db316a27-8530-4f3b-bf13-235a8c500876" name="createdDate,expirationDate,lastModifiedDate Assertion" disabled="true"><con:configuration><scriptText>import org.joda.time.*;
import org.joda.time.format.*;

DateTimeFormatter parser = ISODateTimeFormat.dateTime();

def createdDate = parser.parseDateTime(context.expand( '${createSession request#Response#$.sessionInfo.createdDate}' ))
def expirationDate = parser.parseDateTime(context.expand( '${createSession request#Response#$.sessionInfo.expirationDate}' ))
def lastModifiedDate = parser.parseDateTime(context.expand( '${createSession request#Response#$.sessionInfo.lastModifiedDate}' ))


assert createdDate != null
assert expirationDate != null
assert lastModifiedDate != null
assert lastModifiedDate == createdDate
assert Minutes.minutesBetween(createdDate, expirationDate).getMinutes() % 60 == 29</scriptText></con:configuration></con:assertion><con:assertion type="JsonPath Match" id="ce8eb01a-26fb-4e06-a9b1-e6f6a0b897ba" name="Match content of [links]"><con:configuration><path>$.links</path><content>{"cancelSession":{"rel":"related","href":"*://*/payment-middleware-service/session/*","type":"text/plain"},"getSession":{"rel":"related","href":"*://*/payment-middleware-service/session/*","type":"application/json"},"createTransaction":{"rel":"related","href":"*://*/payment-middleware-service/session/*/transactions","type":"application/json"}}</content><allowWildcards>true</allowWildcards><ignoreNamspaceDifferences>false</ignoreNamspaceDifferences><ignoreComments>false</ignoreComments></con:configuration></con:assertion><con:assertion type="JsonPath Match" id="2bfb20b0-a655-46fb-8c77-c579a3c2e3be" name="Match content of [orderNo]"><con:configuration><path>$.sessionInfo.orderNo</path><content>${DataSource#orderNo}</content><allowWildcards>false</allowWildcards><ignoreNamspaceDifferences>false</ignoreNamspaceDifferences><ignoreComments>false</ignoreComments></con:configuration></con:assertion><con:assertion type="JsonPath Match" id="4736f834-924b-41f5-a721-68a0f01645bc" name="Match content of [orderSource]"><con:configuration><path>$.sessionInfo.orderSource</path><content>${DataSource#orderSource}</content><allowWildcards>false</allowWildcards><ignoreNamspaceDifferences>false</ignoreNamspaceDifferences><ignoreComments>false</ignoreComments></con:configuration></con:assertion><con:assertion type="JsonPath Match" id="3368d74a-c493-4ba6-9240-fcc51597549e" name="Match content of [orderAmount]"><con:configuration><path>$.sessionInfo.orderAmount</path><content>${DataSource#orderAmount}</content><allowWildcards>false</allowWildcards><ignoreNamspaceDifferences>false</ignoreNamspaceDifferences><ignoreComments>false</ignoreComments></con:configuration></con:assertion><con:assertion type="JsonPath Match" id="31a45798-fce7-444d-b165-4bf093549fe3" name="Match content of [currency]"><con:configuration><path>$.sessionInfo.currency</path><content>${DataSource#currency}</content><allowWildcards>false</allowWildcards><ignoreNamspaceDifferences>false</ignoreNamspaceDifferences><ignoreComments>false</ignoreComments></con:configuration></con:assertion><con:assertion type="JsonPath Match" id="1bf291a5-b8c8-4f3c-b867-592bf11aaac2" name="Match content of [state]"><con:configuration><path>$.sessionInfo.state</path><content>UNPAID</content><allowWildcards>false</allowWildcards><ignoreNamspaceDifferences>false</ignoreNamspaceDifferences><ignoreComments>false</ignoreComments></con:configuration></con:assertion><con:assertion type="JsonPath Match" id="b0941b39-36ef-42fe-9da1-bd20dadc3ab3" name="Match content of [remark]"><con:configuration><path>$.sessionInfo.remark</path><content>null</content><allowWildcards>false</allowWildcards><ignoreNamspaceDifferences>false</ignoreNamspaceDifferences><ignoreComments>false</ignoreComments></con:configuration></con:assertion><con:assertion type="JsonPath Match" id="5803fba3-a329-432d-aa61-ce968674254a" name="Match content of [agentId]"><con:configuration><path>$.sessionInfo.agentId</path><content>null</content><allowWildcards>false</allowWildcards><ignoreNamspaceDifferences>false</ignoreNamspaceDifferences><ignoreComments>false</ignoreComments></con:configuration></con:assertion><con:assertion type="JsonPath Match" id="e5c4a260-18e9-4aab-9245-16ab09088030" name="Match content of [guestMobile]"><con:configuration><path>$.sessionInfo.guestMobile</path><content>null</content><allowWildcards>false</allowWildcards><ignoreNamspaceDifferences>false</ignoreNamspaceDifferences><ignoreComments>false</ignoreComments></con:configuration></con:assertion><con:assertion type="JsonPath Match" id="1e1ee654-e73b-4d9b-a5aa-eea5a162a2d2" name="Match content of [guestEmail]"><con:configuration><path>$.sessionInfo.guestEmail</path><content>${DataSource#guestEmail}</content><allowWildcards>false</allowWildcards><ignoreNamspaceDifferences>false</ignoreNamspaceDifferences><ignoreComments>false</ignoreComments></con:configuration></con:assertion><con:assertion type="JsonPath Match" id="53d2e9a5-9585-4c53-b960-f3297f2290b1" name="Match content of [guestSwid]"><con:configuration><path>$.sessionInfo.guestSwid</path><content>null</content><allowWildcards>false</allowWildcards><ignoreNamspaceDifferences>false</ignoreNamspaceDifferences><ignoreComments>false</ignoreComments></con:configuration></con:assertion><con:assertion type="JsonPath Match" id="c63047d7-6940-4b6c-80f4-7d2deccfe4b8" name="Match content of [notifyUrl]"><con:configuration><path>$.sessionInfo.notifyUrl</path><content>null</content><allowWildcards>false</allowWildcards><ignoreNamspaceDifferences>false</ignoreNamspaceDifferences><ignoreComments>false</ignoreComments></con:configuration></con:assertion><con:assertion type="JsonPath Match" id="4d55d7b3-ea00-4a9a-b2ef-cd7dfd288c0e" name="Match content of [returnUrl]"><con:configuration><path>$.sessionInfo.returnUrl</path><content>null</content><allowWildcards>false</allowWildcards><ignoreNamspaceDifferences>false</ignoreNamspaceDifferences><ignoreComments>false</ignoreComments></con:configuration></con:assertion><con:credentials><con:username xsi:nil="true"/><con:password xsi:nil="true"/><con:domain xsi:nil="true"/><con:selectedAuthProfile>No Authorization</con:selectedAuthProfile><con:authType>No Authorization</con:authType></con:credentials><con:jmsConfig JMSDeliveryMode="PERSISTENT"/><con:jmsPropertyConfig/><con:parameters>
  <con:entry key="orderSource" value="${DataSource#orderSource}"/>
  <con:entry key="agentId" value="${DataSource#agentId}"/>
  <con:entry key="orderNo" value="${DataSource#orderNo}"/>
  <con:entry key="orderAmount" value="${DataSource#orderAmount}"/>
  <con:entry key="guestMobile" value="${DataSource#guestMobile}"/>
  <con:entry key="currency" value="${DataSource#currency}"/>
  <con:entry key="guestEmail" value="${DataSource#guestEmail}"/>
</con:parameters><con:parameterOrder><con:entry>agentId</con:entry><con:entry>guestEmail</con:entry><con:entry>guestMobile</con:entry><con:entry>orderNo</con:entry><con:entry>orderAmount</con:entry><con:entry>orderSource</con:entry><con:entry>currency</con:entry><con:entry>payTtl</con:entry><con:entry>notifyUrl</con:entry><con:entry>guestSwid</con:entry><con:entry>returnUrl</con:entry></con:parameterOrder></con:restRequest></con:config></con:testStep><con:properties/><con:reportParameters/></con:testCase><con:testCase id="1a714293-dc4c-4758-bb36-7584378de102" failOnError="true" failTestCaseOnErrors="true" keepSession="false" maxResults="0" name="T04 guestEmail negative" searchProperties="true"><con:settings/><con:testStep type="groovy" name="generate orderNo" id="d4b59c10-a558-49a8-97ae-b3ee3db02bcc" disabled="true"><con:settings/><con:config><script>import java.text.SimpleDateFormat;

def today = new Date()
def format = new SimpleDateFormat();
format = new SimpleDateFormat("yyyyMMddkkmmssSSS");
def DateToStr = format.format(today);

log.info DateToStr
return DateToStr</script></con:config></con:testStep><con:testStep type="datasource" name="DataSource" id="847f92a2-b5f3-48aa-a96d-5e2079676e75" disabled="true"><con:settings/><con:config xsi:type="con:DataSourceStep" xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance"><con:dataSource type="Grid"><con:configuration><check><![CDATA[<xml-fragment><con:entry xmlns:con="http://eviware.com/soapui/config">true</con:entry><con:entry xmlns:con="http://eviware.com/soapui/config">true</con:entry></xml-fragment>]]></check><row><![CDATA[<xml-fragment><con:entry xmlns:con="http://eviware.com/soapui/config"/><con:entry xmlns:con="http://eviware.com/soapui/config">eeee111</con:entry><con:entry xmlns:con="http://eviware.com/soapui/config"/><con:entry xmlns:con="http://eviware.com/soapui/config">${generate orderNo#result}</con:entry><con:entry xmlns:con="http://eviware.com/soapui/config">1000.00</con:entry><con:entry xmlns:con="http://eviware.com/soapui/config">TICKETING</con:entry><con:entry xmlns:con="http://eviware.com/soapui/config">CNY</con:entry></xml-fragment>]]></row><row><![CDATA[<xml-fragment><con:entry xmlns:con="http://eviware.com/soapui/config"/><con:entry xmlns:con="http://eviware.com/soapui/config"/><con:entry xmlns:con="http://eviware.com/soapui/config"/><con:entry xmlns:con="http://eviware.com/soapui/config"/><con:entry xmlns:con="http://eviware.com/soapui/config"/><con:entry xmlns:con="http://eviware.com/soapui/config"/><con:entry xmlns:con="http://eviware.com/soapui/config"/></xml-fragment>]]></row></con:configuration></con:dataSource><con:property>agentId</con:property><con:property>guestEmail</con:property><con:property>guestMobile</con:property><con:property>orderNo</con:property><con:property>orderAmount</con:property><con:property>orderSource</con:property><con:property>currency</con:property><con:restartOnRun>true</con:restartOnRun></con:config></con:testStep><con:testStep type="restrequest" name="createSession request" id="1ef3bd22-df9a-4501-8858-79ee1220b9d4" disabled="true"><con:settings/><con:config service="PaymentMiddleware" resourcePath="/payment-middleware-service/sessions" methodName="Sessions" xsi:type="con:RestRequestStep" xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance"><con:restRequest name="createSession request" id="ac10df94-13d9-4eb3-9c59-7dd8a7e807e1" mediaType="application/json" postQueryString="false"><con:settings><con:setting id="com.eviware.soapui.impl.wsdl.WsdlRequest@request-headers">&lt;xml-fragment/></con:setting></con:settings><con:endpoint>${#Project#ServiceEndpoint}</con:endpoint><con:request>{
    "guestEmail" : "${guestEmail}",
    "orderNo" : "${orderNo}",
    "products":[    
        {"description" : "Adult one day part ticket for date 2016-09-15","unitPrice" : 100.00,"qty" : 2, "type" : "PARK_TICKET"},
        {"description" : "Child one day part ticket for date 2016-09-15","unitPrice" : 75.00,"qty" : 3, "type" : "PARK_TICKET"}
    ],
    "orderAmount" : "${orderAmount}",
    "orderSource" : "${orderSource}",
    "currency" : "${currency}"
}</con:request><con:originalUri>http://68.71.208.254/payment-middleware-service/sessions</con:originalUri><con:credentials><con:username xsi:nil="true"/><con:password xsi:nil="true"/><con:domain xsi:nil="true"/><con:selectedAuthProfile>No Authorization</con:selectedAuthProfile><con:authType>No Authorization</con:authType></con:credentials><con:jmsConfig JMSDeliveryMode="PERSISTENT"/><con:jmsPropertyConfig/><con:parameters>
  <con:entry key="orderSource" value="${DataSource#orderSource}"/>
  <con:entry key="agentId" value="${DataSource#agentId}"/>
  <con:entry key="orderNo" value="${DataSource#orderNo}"/>
  <con:entry key="orderAmount" value="${DataSource#orderAmount}"/>
  <con:entry key="guestMobile" value="${DataSource#guestMobile}"/>
  <con:entry key="currency" value="${DataSource#currency}"/>
  <con:entry key="guestEmail" value="${DataSource#guestEmail}"/>
</con:parameters><con:parameterOrder><con:entry>agentId</con:entry><con:entry>guestEmail</con:entry><con:entry>guestMobile</con:entry><con:entry>orderNo</con:entry><con:entry>orderAmount</con:entry><con:entry>orderSource</con:entry><con:entry>currency</con:entry><con:entry>payTtl</con:entry><con:entry>notifyUrl</con:entry><con:entry>guestSwid</con:entry><con:entry>returnUrl</con:entry></con:parameterOrder></con:restRequest></con:config></con:testStep><con:properties/><con:reportParameters/></con:testCase><con:testCase id="3c4cbb2e-c58b-43d6-a956-0b1a7f7dd26a" failOnError="true" failTestCaseOnErrors="true" keepSession="false" maxResults="0" name="T05 guestMobile positive" searchProperties="true"><con:settings/><con:testStep type="groovy" name="generate orderNo" id="922069c3-c816-495a-a951-6d02d6f21bf1"><con:settings/><con:config><script>import java.text.SimpleDateFormat;

def today = new Date()
def format = new SimpleDateFormat();
format = new SimpleDateFormat("yyyyMMddkkmmssSSS");
def DateToStr = format.format(today);

log.info DateToStr
return DateToStr</script></con:config></con:testStep><con:testStep type="datasource" name="DataSource" id="c4ad15d9-b545-4275-a043-5f86bd21f501"><con:settings/><con:config xsi:type="con:DataSourceStep" xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance"><con:dataSource type="Grid"><con:configuration><check><![CDATA[<xml-fragment><con:entry xmlns:con="http://eviware.com/soapui/config">true</con:entry><con:entry xmlns:con="http://eviware.com/soapui/config">true</con:entry></xml-fragment>]]></check><row><![CDATA[<xml-fragment><con:entry xmlns:con="http://eviware.com/soapui/config"/><con:entry xmlns:con="http://eviware.com/soapui/config"/><con:entry xmlns:con="http://eviware.com/soapui/config">123456789012</con:entry><con:entry xmlns:con="http://eviware.com/soapui/config">${generate orderNo#result}</con:entry><con:entry xmlns:con="http://eviware.com/soapui/config">1000.01</con:entry><con:entry xmlns:con="http://eviware.com/soapui/config">TICKETING</con:entry><con:entry xmlns:con="http://eviware.com/soapui/config">CNY</con:entry></xml-fragment>]]></row><row><![CDATA[<xml-fragment><con:entry xmlns:con="http://eviware.com/soapui/config"/><con:entry xmlns:con="http://eviware.com/soapui/config"/><con:entry xmlns:con="http://eviware.com/soapui/config"/><con:entry xmlns:con="http://eviware.com/soapui/config"/><con:entry xmlns:con="http://eviware.com/soapui/config"/><con:entry xmlns:con="http://eviware.com/soapui/config"/><con:entry xmlns:con="http://eviware.com/soapui/config"/></xml-fragment>]]></row></con:configuration></con:dataSource><con:property>agentId</con:property><con:property>guestEmail</con:property><con:property>guestMobile</con:property><con:property>orderNo</con:property><con:property>orderAmount</con:property><con:property>orderSource</con:property><con:property>currency</con:property><con:restartOnRun>true</con:restartOnRun></con:config></con:testStep><con:testStep type="restrequest" name="createSession request" id="ec31007a-8693-47da-a449-7e0c2fb5b8c8"><con:settings/><con:config service="PaymentMiddleware" resourcePath="/payment-middleware-service/sessions" methodName="Sessions" xsi:type="con:RestRequestStep" xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance"><con:restRequest name="createSession request" id="ac10df94-13d9-4eb3-9c59-7dd8a7e807e1" mediaType="application/json" postQueryString="false"><con:settings><con:setting id="com.eviware.soapui.impl.wsdl.WsdlRequest@request-headers">&lt;xml-fragment/></con:setting></con:settings><con:endpoint>${#Project#ServiceEndpoint}</con:endpoint><con:request>{
    "guestMobile" : "${guestMobile}",
    "orderNo" : "${orderNo}",
    "products":[    
        {"description" : "Adult one day part ticket for date 2016-09-15","unitPrice" : 100.00,"qty" : 2, "type" : "PARK_TICKET"},
        {"description" : "Child one day part ticket for date 2016-09-15","unitPrice" : 75.00,"qty" : 3, "type" : "PARK_TICKET"}
    ],
    "orderAmount" : "${orderAmount}",
    "orderSource" : "${orderSource}",
    "currency" : "${currency}"
}</con:request><con:originalUri>http://68.71.208.254/payment-middleware-service/sessions</con:originalUri><con:assertion type="JsonPath Match" id="eb067ffb-fa50-4656-b144-0eeab7277d49" name="SessionInfo Match"><con:configuration><path>$.sessionInfo</path><content>{"sessionId":"*","orderNo":"*","orderSource":"*","orderAmount":"*","currency":"*","state":"UNPAID","remark":*,"agentId":*,"guestMobile":*,"guestEmail":*,"guestSwid":*,"createdDate":"*","payTtl":*,"lastModifiedDate":"*","notifyUrl":*,"returnUrl":*}</content><allowWildcards>true</allowWildcards><ignoreNamspaceDifferences>false</ignoreNamspaceDifferences><ignoreComments>false</ignoreComments></con:configuration></con:assertion><con:assertion type="GroovyScriptAssertion" id="db316a27-8530-4f3b-bf13-235a8c500876" name="createdDate,expirationDate,lastModifiedDate Assertion" disabled="true"><con:configuration><scriptText>import org.joda.time.*;
import org.joda.time.format.*;

DateTimeFormatter parser = ISODateTimeFormat.dateTime();

def createdDate = parser.parseDateTime(context.expand( '${createSession request#Response#$.sessionInfo.createdDate}' ))
def expirationDate = parser.parseDateTime(context.expand( '${createSession request#Response#$.sessionInfo.expirationDate}' ))
def lastModifiedDate = parser.parseDateTime(context.expand( '${createSession request#Response#$.sessionInfo.lastModifiedDate}' ))


assert createdDate != null
assert expirationDate != null
assert lastModifiedDate != null
assert lastModifiedDate == createdDate
assert Minutes.minutesBetween(createdDate, expirationDate).getMinutes() % 60 == 29</scriptText></con:configuration></con:assertion><con:assertion type="JsonPath Match" id="ce8eb01a-26fb-4e06-a9b1-e6f6a0b897ba" name="Match content of [links]"><con:configuration><path>$.links</path><content>{"cancelSession":{"rel":"related","href":"*://*/payment-middleware-service/session/*","type":"text/plain"},"getSession":{"rel":"related","href":"*://*/payment-middleware-service/session/*","type":"application/json"},"createTransaction":{"rel":"related","href":"*://*/payment-middleware-service/session/*/transactions","type":"application/json"}}</content><allowWildcards>true</allowWildcards><ignoreNamspaceDifferences>false</ignoreNamspaceDifferences><ignoreComments>false</ignoreComments></con:configuration></con:assertion><con:assertion type="Valid HTTP Status Codes" id="3d8471fb-ff0e-4b8f-8f6b-e7ca196f055c" name="Valid HTTP Status Codes"><con:settings/><con:configuration><codes>200</codes></con:configuration></con:assertion><con:assertion type="JsonPath Match" id="1238854b-0fec-48f6-8a0e-12607dacf416" name="Match content of [orderNo]"><con:configuration><path>$.sessionInfo.orderNo</path><content>${DataSource#orderNo}</content><allowWildcards>false</allowWildcards><ignoreNamspaceDifferences>false</ignoreNamspaceDifferences><ignoreComments>false</ignoreComments></con:configuration></con:assertion><con:assertion type="JsonPath Match" id="897bb163-3a55-43a8-9816-621bbd18efc2" name="Match content of [orderSource]"><con:configuration><path>$.sessionInfo.orderSource</path><content>${DataSource#orderSource}</content><allowWildcards>false</allowWildcards><ignoreNamspaceDifferences>false</ignoreNamspaceDifferences><ignoreComments>false</ignoreComments></con:configuration></con:assertion><con:assertion type="JsonPath Match" id="81584b43-a733-4f61-8609-cf62a4791e0f" name="Match content of [orderAmount]"><con:configuration><path>$.sessionInfo.orderAmount</path><content>${DataSource#orderAmount}</content><allowWildcards>false</allowWildcards><ignoreNamspaceDifferences>false</ignoreNamspaceDifferences><ignoreComments>false</ignoreComments></con:configuration></con:assertion><con:assertion type="JsonPath Match" id="ac5b3236-2d61-47db-a9c1-c4240bcf97c3" name="Match content of [currency]"><con:configuration><path>$.sessionInfo.currency</path><content>${DataSource#currency}</content><allowWildcards>false</allowWildcards><ignoreNamspaceDifferences>false</ignoreNamspaceDifferences><ignoreComments>false</ignoreComments></con:configuration></con:assertion><con:assertion type="JsonPath Match" id="4cbe8986-f396-40fe-842f-1d9c89de7342" name="Match content of [state]"><con:configuration><path>$.sessionInfo.state</path><content>UNPAID</content><allowWildcards>false</allowWildcards><ignoreNamspaceDifferences>false</ignoreNamspaceDifferences><ignoreComments>false</ignoreComments></con:configuration></con:assertion><con:assertion type="JsonPath Match" id="0196a2aa-7cdd-4d61-9d40-363dc63f839c" name="Match content of [remark]"><con:configuration><path>$.sessionInfo.remark</path><content>null</content><allowWildcards>false</allowWildcards><ignoreNamspaceDifferences>false</ignoreNamspaceDifferences><ignoreComments>false</ignoreComments></con:configuration></con:assertion><con:assertion type="JsonPath Match" id="06dcd457-7c00-4d0d-88ff-e3e457dd7fb1" name="Match content of [agentId]"><con:configuration><path>$.sessionInfo.agentId</path><content>null</content><allowWildcards>false</allowWildcards><ignoreNamspaceDifferences>false</ignoreNamspaceDifferences><ignoreComments>false</ignoreComments></con:configuration></con:assertion><con:assertion type="JsonPath Match" id="cbb30aa4-a057-421c-b1fe-cb15456c59a8" name="Match content of [guestMobile]"><con:configuration><path>$.sessionInfo.guestMobile</path><content>${DataSource#guestMobile}</content><allowWildcards>false</allowWildcards><ignoreNamspaceDifferences>false</ignoreNamspaceDifferences><ignoreComments>false</ignoreComments></con:configuration></con:assertion><con:assertion type="JsonPath Match" id="b4838f1f-f802-49ae-97ce-f4f697da9f5a" name="Match content of [guestEmail]"><con:configuration><path>$.sessionInfo.guestEmail</path><content>null</content><allowWildcards>false</allowWildcards><ignoreNamspaceDifferences>false</ignoreNamspaceDifferences><ignoreComments>false</ignoreComments></con:configuration></con:assertion><con:assertion type="JsonPath Match" id="33bfd711-dbfb-4826-b2b4-962a088e6fa2" name="Match content of [guestSwid]"><con:configuration><path>$.sessionInfo.guestSwid</path><content>null</content><allowWildcards>false</allowWildcards><ignoreNamspaceDifferences>false</ignoreNamspaceDifferences><ignoreComments>false</ignoreComments></con:configuration></con:assertion><con:assertion type="JsonPath Match" id="89170fda-e644-4836-b4e4-130b1949c8c8" name="Match content of [notifyUrl]"><con:configuration><path>$.sessionInfo.notifyUrl</path><content>null</content><allowWildcards>false</allowWildcards><ignoreNamspaceDifferences>false</ignoreNamspaceDifferences><ignoreComments>false</ignoreComments></con:configuration></con:assertion><con:assertion type="JsonPath Match" id="eed59038-b3a3-4429-ab8b-1718c100cbf3" name="Match content of [returnUrl]"><con:configuration><path>$.sessionInfo.returnUrl</path><content>null</content><allowWildcards>false</allowWildcards><ignoreNamspaceDifferences>false</ignoreNamspaceDifferences><ignoreComments>false</ignoreComments></con:configuration></con:assertion><con:credentials><con:username xsi:nil="true"/><con:password xsi:nil="true"/><con:domain xsi:nil="true"/><con:selectedAuthProfile>No Authorization</con:selectedAuthProfile><con:authType>No Authorization</con:authType></con:credentials><con:jmsConfig JMSDeliveryMode="PERSISTENT"/><con:jmsPropertyConfig/><con:parameters>
  <con:entry key="orderSource" value="${DataSource#orderSource}"/>
  <con:entry key="agentId" value="${DataSource#agentId}"/>
  <con:entry key="orderNo" value="${DataSource#orderNo}"/>
  <con:entry key="orderAmount" value="${DataSource#orderAmount}"/>
  <con:entry key="guestMobile" value="${DataSource#guestMobile}"/>
  <con:entry key="currency" value="${DataSource#currency}"/>
  <con:entry key="guestEmail" value="${DataSource#guestEmail}"/>
</con:parameters><con:parameterOrder><con:entry>agentId</con:entry><con:entry>guestEmail</con:entry><con:entry>guestMobile</con:entry><con:entry>orderNo</con:entry><con:entry>orderAmount</con:entry><con:entry>orderSource</con:entry><con:entry>currency</con:entry><con:entry>payTtl</con:entry><con:entry>notifyUrl</con:entry><con:entry>guestSwid</con:entry><con:entry>returnUrl</con:entry></con:parameterOrder></con:restRequest></con:config></con:testStep><con:properties/><con:reportParameters/></con:testCase><con:testCase id="948cdffa-9c7a-420a-b3a6-c9faf710423b" failOnError="true" failTestCaseOnErrors="true" keepSession="false" maxResults="0" name="T06 orderNo negative" searchProperties="true"><con:settings/><con:testStep type="groovy" name="Empty orderNo" id="3ac87b09-7386-40b2-9ca2-450bf12204c7"><con:settings/><con:config><script>/*import java.text.SimpleDateFormat;

def today = new Date()
def format = new SimpleDateFormat();
format = new SimpleDateFormat("yyyyMMddkkmmss");
def DateToStr = format.format(today);
DateToStr=DateToStr*/
def DateToStr = null

log.info DateToStr
return DateToStr</script></con:config></con:testStep><con:testStep type="datasource" name="DataSource" id="5fc2b63a-db0f-4c09-8808-fda54a91d687"><con:settings/><con:config xsi:type="con:DataSourceStep" xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance"><con:dataSource type="Grid"><con:configuration><check><![CDATA[<xml-fragment><con:entry xmlns:con="http://eviware.com/soapui/config">true</con:entry><con:entry xmlns:con="http://eviware.com/soapui/config">true</con:entry></xml-fragment>]]></check><row><![CDATA[<xml-fragment><con:entry xmlns:con="http://eviware.com/soapui/config">3452344444335</con:entry><con:entry xmlns:con="http://eviware.com/soapui/config"/><con:entry xmlns:con="http://eviware.com/soapui/config"/><con:entry xmlns:con="http://eviware.com/soapui/config">${Empty orderNo#result}</con:entry><con:entry xmlns:con="http://eviware.com/soapui/config">1000.00</con:entry><con:entry xmlns:con="http://eviware.com/soapui/config">TICKETING</con:entry><con:entry xmlns:con="http://eviware.com/soapui/config">CNY</con:entry></xml-fragment>]]></row><row><![CDATA[<xml-fragment><con:entry xmlns:con="http://eviware.com/soapui/config"/><con:entry xmlns:con="http://eviware.com/soapui/config"/><con:entry xmlns:con="http://eviware.com/soapui/config"/><con:entry xmlns:con="http://eviware.com/soapui/config"/><con:entry xmlns:con="http://eviware.com/soapui/config"/><con:entry xmlns:con="http://eviware.com/soapui/config"/><con:entry xmlns:con="http://eviware.com/soapui/config"/></xml-fragment>]]></row></con:configuration></con:dataSource><con:property>agentId</con:property><con:property>guestEmail</con:property><con:property>guestMobile</con:property><con:property>orderNo</con:property><con:property>orderAmount</con:property><con:property>orderSource</con:property><con:property>currency</con:property><con:restartOnRun>true</con:restartOnRun></con:config></con:testStep><con:testStep type="restrequest" name="createSession request" id="88fe471f-5e9f-408e-8107-f204a274e2c3"><con:settings/><con:config service="PaymentMiddleware" resourcePath="/payment-middleware-service/sessions" methodName="Sessions" xsi:type="con:RestRequestStep" xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance"><con:restRequest name="createSession request" id="ac10df94-13d9-4eb3-9c59-7dd8a7e807e1" mediaType="application/json" postQueryString="false"><con:settings><con:setting id="com.eviware.soapui.impl.wsdl.WsdlRequest@request-headers">&lt;xml-fragment/></con:setting></con:settings><con:endpoint>${#Project#ServiceEndpoint}</con:endpoint><con:request>{
    "agentId" : "${agentId}",
    "orderNo" : "${orderNo}",
    "products":[    
        {"description" : "Adult one day part ticket for date 2016-09-15","unitPrice" : 100.00,"qty" : 2, "type" : "PARK_TICKET"},
        {"description" : "Child one day part ticket for date 2016-09-15","unitPrice" : 75.00,"qty" : 3, "type" : "PARK_TICKET"}
    ],
    "orderAmount" : "${orderAmount}",
    "orderSource" : "${orderSource}",
    "currency" : "${currency}"
}</con:request><con:originalUri>http://68.71.208.254/payment-middleware-service/sessions</con:originalUri><con:assertion type="Valid HTTP Status Codes" id="db532a80-efdf-40d9-ac88-06f118b09ab7" name="Valid HTTP Status Codes"><con:settings/><con:configuration><codes>400</codes></con:configuration></con:assertion><con:assertion type="Simple Equals" id="0f09938b-3b68-44ab-8efc-f9b31cd743f5" name="Equals"><con:configuration><patternText>1014:order number is required</patternText><caseSensitive>true</caseSensitive></con:configuration></con:assertion><con:credentials><con:username xsi:nil="true"/><con:password xsi:nil="true"/><con:domain xsi:nil="true"/><con:selectedAuthProfile>No Authorization</con:selectedAuthProfile><con:authType>No Authorization</con:authType></con:credentials><con:jmsConfig JMSDeliveryMode="PERSISTENT"/><con:jmsPropertyConfig/><con:parameters>
  <con:entry key="orderSource" value="${DataSource#orderSource}"/>
  <con:entry key="agentId" value="${DataSource#agentId}"/>
  <con:entry key="orderNo" value="${DataSource#orderNo}"/>
  <con:entry key="orderAmount" value="${DataSource#orderAmount}"/>
  <con:entry key="guestMobile" value="${DataSource#guestMobile}"/>
  <con:entry key="currency" value="${DataSource#currency}"/>
  <con:entry key="guestEmail" value="${DataSource#guestEmail}"/>
</con:parameters><con:parameterOrder><con:entry>agentId</con:entry><con:entry>guestEmail</con:entry><con:entry>guestMobile</con:entry><con:entry>orderNo</con:entry><con:entry>orderAmount</con:entry><con:entry>orderSource</con:entry><con:entry>currency</con:entry><con:entry>payTtl</con:entry><con:entry>notifyUrl</con:entry><con:entry>guestSwid</con:entry><con:entry>returnUrl</con:entry></con:parameterOrder></con:restRequest></con:config></con:testStep><con:testStep type="groovy" name="Generate orderNo" id="436dd0ee-2aec-4b9b-aef5-0180f26ffa88"><con:settings/><con:config><script>import java.text.SimpleDateFormat;

def today = new Date()
def format = new SimpleDateFormat();
format = new SimpleDateFormat("yyyyMMddkkmmssSSS");
def DateToStr = format.format(today);
DateToStr=DateToStr

log.info DateToStr
return DateToStr</script></con:config></con:testStep><con:testStep type="datasource" name="DataSource1" id="e2c3e7d7-2dda-441f-9457-e63e5a704880"><con:settings/><con:config xsi:type="con:DataSourceStep" xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance"><con:dataSource type="Grid"><con:configuration><check><![CDATA[<xml-fragment><con:entry xmlns:con="http://eviware.com/soapui/config">true</con:entry><con:entry xmlns:con="http://eviware.com/soapui/config">true</con:entry></xml-fragment>]]></check><row><![CDATA[<xml-fragment><con:entry xmlns:con="http://eviware.com/soapui/config">3452344444335</con:entry><con:entry xmlns:con="http://eviware.com/soapui/config"/><con:entry xmlns:con="http://eviware.com/soapui/config"/><con:entry xmlns:con="http://eviware.com/soapui/config">${Generate orderNo#result}</con:entry><con:entry xmlns:con="http://eviware.com/soapui/config">1000.01</con:entry><con:entry xmlns:con="http://eviware.com/soapui/config">TICKETING</con:entry><con:entry xmlns:con="http://eviware.com/soapui/config">CNY</con:entry></xml-fragment>]]></row><row><![CDATA[<xml-fragment><con:entry xmlns:con="http://eviware.com/soapui/config"/><con:entry xmlns:con="http://eviware.com/soapui/config"/><con:entry xmlns:con="http://eviware.com/soapui/config"/><con:entry xmlns:con="http://eviware.com/soapui/config"/><con:entry xmlns:con="http://eviware.com/soapui/config"/><con:entry xmlns:con="http://eviware.com/soapui/config"/><con:entry xmlns:con="http://eviware.com/soapui/config"/></xml-fragment>]]></row></con:configuration></con:dataSource><con:property>agentId</con:property><con:property>guestEmail</con:property><con:property>guestMobile</con:property><con:property>orderNo</con:property><con:property>orderAmount</con:property><con:property>orderSource</con:property><con:property>currency</con:property><con:restartOnRun>true</con:restartOnRun></con:config></con:testStep><con:testStep type="restrequest" name="createSession request1" id="d75a3c81-84b4-4558-9632-6e2513960711"><con:settings/><con:config service="PaymentMiddleware" resourcePath="/payment-middleware-service/sessions" methodName="Sessions" xsi:type="con:RestRequestStep" xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance"><con:restRequest name="createSession request1" id="ac10df94-13d9-4eb3-9c59-7dd8a7e807e1" mediaType="application/json" postQueryString="false"><con:settings><con:setting id="com.eviware.soapui.impl.wsdl.WsdlRequest@request-headers">&lt;xml-fragment/></con:setting></con:settings><con:endpoint>${#Project#ServiceEndpoint}</con:endpoint><con:request>{
    "agentId" : "${agentId}",
    "orderNo" : "${orderNo}",
    "products":[    
        {"description" : "Adult one day part ticket for date 2016-09-15","unitPrice" : 100.00,"qty" : 2, "type" : "PARK_TICKET"},
        {"description" : "Child one day part ticket for date 2016-09-15","unitPrice" : 75.00,"qty" : 3, "type" : "PARK_TICKET"}
    ],
    "orderAmount" : "${orderAmount}",
    "orderSource" : "${orderSource}",
    "currency" : "${currency}"
}</con:request><con:originalUri>http://68.71.208.254/payment-middleware-service/sessions</con:originalUri><con:assertion type="JsonPath Match" id="eb067ffb-fa50-4656-b144-0eeab7277d49" name="SessionInfo Match"><con:configuration><path>$.sessionInfo</path><content>{"sessionId":"*","orderNo":"*","orderSource":"*","orderAmount":"*","currency":"*","state":"UNPAID","remark":*,"agentId":*,"guestMobile":*,"guestEmail":*,"guestSwid":*,"createdDate":"*","payTtl":*,"lastModifiedDate":"*","notifyUrl":*,"returnUrl":*}</content><allowWildcards>true</allowWildcards><ignoreNamspaceDifferences>false</ignoreNamspaceDifferences><ignoreComments>false</ignoreComments></con:configuration></con:assertion><con:assertion type="GroovyScriptAssertion" id="db316a27-8530-4f3b-bf13-235a8c500876" name="createdDate,expirationDate,lastModifiedDate Assertion" disabled="true"><con:configuration><scriptText>import org.joda.time.*;
import org.joda.time.format.*;

DateTimeFormatter parser = ISODateTimeFormat.dateTime();

def createdDate = parser.parseDateTime(context.expand( '${createSession request1#Response#$.sessionInfo.createdDate}' ))
def expirationDate = parser.parseDateTime(context.expand( '${createSession request1#Response#$.sessionInfo.expirationDate}' ))
def lastModifiedDate = parser.parseDateTime(context.expand( '${createSession request1#Response#$.sessionInfo.lastModifiedDate}' ))


assert createdDate != null
assert expirationDate != null
assert lastModifiedDate != null
assert lastModifiedDate == createdDate
assert Minutes.minutesBetween(createdDate, expirationDate).getMinutes() % 60 == 29</scriptText></con:configuration></con:assertion><con:assertion type="JsonPath Match" id="ce8eb01a-26fb-4e06-a9b1-e6f6a0b897ba" name="Match content of [links]"><con:configuration><path>$.links</path><content>{"cancelSession":{"rel":"related","href":"*://*/payment-middleware-service/session/*","type":"text/plain"},"getSession":{"rel":"related","href":"*://*/payment-middleware-service/session/*","type":"application/json"},"createTransaction":{"rel":"related","href":"*://*/payment-middleware-service/session/*/transactions","type":"application/json"}}</content><allowWildcards>true</allowWildcards><ignoreNamspaceDifferences>false</ignoreNamspaceDifferences><ignoreComments>false</ignoreComments></con:configuration></con:assertion><con:credentials><con:username xsi:nil="true"/><con:password xsi:nil="true"/><con:domain xsi:nil="true"/><con:selectedAuthProfile>No Authorization</con:selectedAuthProfile><con:authType>No Authorization</con:authType></con:credentials><con:jmsConfig JMSDeliveryMode="PERSISTENT"/><con:jmsPropertyConfig/><con:parameters>
  <con:entry key="orderSource" value="${DataSource1#orderSource}"/>
  <con:entry key="agentId" value="${DataSource1#agentId}"/>
  <con:entry key="orderNo" value="${DataSource1#orderNo}"/>
  <con:entry key="orderAmount" value="${DataSource1#orderAmount}"/>
  <con:entry key="guestMobile" value="${DataSource1#guestMobile}"/>
  <con:entry key="currency" value="${DataSource1#currency}"/>
  <con:entry key="guestEmail" value="${DataSource1#guestEmail}"/>
</con:parameters><con:parameterOrder><con:entry>agentId</con:entry><con:entry>guestEmail</con:entry><con:entry>guestMobile</con:entry><con:entry>orderNo</con:entry><con:entry>orderAmount</con:entry><con:entry>orderSource</con:entry><con:entry>currency</con:entry><con:entry>payTtl</con:entry><con:entry>notifyUrl</con:entry><con:entry>guestSwid</con:entry><con:entry>returnUrl</con:entry></con:parameterOrder></con:restRequest></con:config></con:testStep><con:testStep type="restrequest" name="createSession Dup orderNo" id="4cd509ee-ad47-4de7-9b04-4fcdc6fdc582"><con:settings/><con:config service="PaymentMiddleware" resourcePath="/payment-middleware-service/sessions" methodName="Sessions" xsi:type="con:RestRequestStep" xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance"><con:restRequest name="createSession Dup orderNo" id="ac10df94-13d9-4eb3-9c59-7dd8a7e807e1" mediaType="application/json" postQueryString="false"><con:settings><con:setting id="com.eviware.soapui.impl.wsdl.WsdlRequest@request-headers">&lt;xml-fragment/></con:setting></con:settings><con:endpoint>${#Project#ServiceEndpoint}</con:endpoint><con:request>{
    "agentId" : "${agentId}",
    "orderNo" : "${orderNo}",
    "products":[    
        {"description" : "Adult one day part ticket for date 2016-09-15","unitPrice" : 100.00,"qty" : 2, "type" : "PARK_TICKET"},
        {"description" : "Child one day part ticket for date 2016-09-15","unitPrice" : 75.00,"qty" : 3, "type" : "PARK_TICKET"}
    ],
    "orderAmount" : "${orderAmount}",
    "orderSource" : "${orderSource}",
    "currency" : "${currency}"
}</con:request><con:originalUri>http://68.71.208.254/payment-middleware-service/sessions</con:originalUri><con:assertion type="Valid HTTP Status Codes" id="43936b93-4f7b-48f5-b1c4-84443d40bda8" name="Valid HTTP Status Codes"><con:settings/><con:configuration><codes>409</codes></con:configuration></con:assertion><con:assertion type="Simple Equals" id="a90b9cde-07e6-4268-b487-cca196bf7972" name="Equals"><con:configuration><patternText>2003:this payment session is not necessary as it is already existed</patternText><caseSensitive>true</caseSensitive></con:configuration></con:assertion><con:credentials><con:username xsi:nil="true"/><con:password xsi:nil="true"/><con:domain xsi:nil="true"/><con:selectedAuthProfile>No Authorization</con:selectedAuthProfile><con:authType>No Authorization</con:authType></con:credentials><con:jmsConfig JMSDeliveryMode="PERSISTENT"/><con:jmsPropertyConfig/><con:parameters>
  <con:entry key="orderSource" value="${DataSource1#orderSource}"/>
  <con:entry key="agentId" value="${DataSource1#agentId}"/>
  <con:entry key="orderNo" value="${DataSource1#orderNo}"/>
  <con:entry key="orderAmount" value="${DataSource1#orderAmount}"/>
  <con:entry key="guestMobile" value="${DataSource1#guestMobile}"/>
  <con:entry key="currency" value="${DataSource1#currency}"/>
  <con:entry key="guestEmail" value="${DataSource1#guestEmail}"/>
</con:parameters><con:parameterOrder><con:entry>agentId</con:entry><con:entry>guestEmail</con:entry><con:entry>guestMobile</con:entry><con:entry>orderNo</con:entry><con:entry>orderAmount</con:entry><con:entry>orderSource</con:entry><con:entry>currency</con:entry><con:entry>payTtl</con:entry><con:entry>notifyUrl</con:entry><con:entry>guestSwid</con:entry><con:entry>returnUrl</con:entry></con:parameterOrder></con:restRequest></con:config></con:testStep><con:properties/><con:reportParameters/><con:breakPoints><con:testStepId>d75a3c81-84b4-4558-9632-6e2513960711</con:testStepId><con:status>NONE</con:status><con:properties/></con:breakPoints></con:testCase><con:testCase id="7816a82b-fa6a-42fe-b108-896d57e12dc4" failOnError="true" failTestCaseOnErrors="true" keepSession="false" maxResults="0" name="T07 orderAmount negative" searchProperties="true"><con:description>TestCase generated for REST Resource [Sessions] located at [/sessions]</con:description><con:settings/><con:testStep type="datasource" name="DataSource" id="1c3c74eb-311f-4c1f-b773-06c87e6ac031"><con:settings/><con:config xsi:type="con:DataSourceStep" xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance"><con:dataSource type="Grid"><con:configuration><check><![CDATA[<xml-fragment><con:entry xmlns:con="http://eviware.com/soapui/config">true</con:entry><con:entry xmlns:con="http://eviware.com/soapui/config">true</con:entry><con:entry xmlns:con="http://eviware.com/soapui/config">false</con:entry><con:entry xmlns:con="http://eviware.com/soapui/config">false</con:entry><con:entry xmlns:con="http://eviware.com/soapui/config">false</con:entry></xml-fragment>]]></check><row><![CDATA[<xml-fragment><con:entry xmlns:con="http://eviware.com/soapui/config">3452344444332</con:entry><con:entry xmlns:con="http://eviware.com/soapui/config"/><con:entry xmlns:con="http://eviware.com/soapui/config"/><con:entry xmlns:con="http://eviware.com/soapui/config"/><con:entry xmlns:con="http://eviware.com/soapui/config"/><con:entry xmlns:con="http://eviware.com/soapui/config">TICKETING</con:entry><con:entry xmlns:con="http://eviware.com/soapui/config">CNY</con:entry></xml-fragment>]]></row><row><![CDATA[<xml-fragment><con:entry xmlns:con="http://eviware.com/soapui/config">3452344444332</con:entry><con:entry xmlns:con="http://eviware.com/soapui/config"/><con:entry xmlns:con="http://eviware.com/soapui/config"/><con:entry xmlns:con="http://eviware.com/soapui/config"/><con:entry xmlns:con="http://eviware.com/soapui/config">-100</con:entry><con:entry xmlns:con="http://eviware.com/soapui/config">TICKETING</con:entry><con:entry xmlns:con="http://eviware.com/soapui/config">CNY</con:entry></xml-fragment>]]></row><row><![CDATA[<xml-fragment><con:entry xmlns:con="http://eviware.com/soapui/config">3452344444332</con:entry><con:entry xmlns:con="http://eviware.com/soapui/config"/><con:entry xmlns:con="http://eviware.com/soapui/config"/><con:entry xmlns:con="http://eviware.com/soapui/config"/><con:entry xmlns:con="http://eviware.com/soapui/config">aaa</con:entry><con:entry xmlns:con="http://eviware.com/soapui/config">TICKETING</con:entry><con:entry xmlns:con="http://eviware.com/soapui/config">CNY</con:entry></xml-fragment>]]></row><row><![CDATA[<xml-fragment><con:entry xmlns:con="http://eviware.com/soapui/config">3452344444332</con:entry><con:entry xmlns:con="http://eviware.com/soapui/config"/><con:entry xmlns:con="http://eviware.com/soapui/config"/><con:entry xmlns:con="http://eviware.com/soapui/config"/><con:entry xmlns:con="http://eviware.com/soapui/config">0.001</con:entry><con:entry xmlns:con="http://eviware.com/soapui/config">TICKETING</con:entry><con:entry xmlns:con="http://eviware.com/soapui/config">CNY</con:entry></xml-fragment>]]></row><row><![CDATA[<xml-fragment><con:entry xmlns:con="http://eviware.com/soapui/config"/><con:entry xmlns:con="http://eviware.com/soapui/config"/><con:entry xmlns:con="http://eviware.com/soapui/config"/><con:entry xmlns:con="http://eviware.com/soapui/config"/><con:entry xmlns:con="http://eviware.com/soapui/config"/><con:entry xmlns:con="http://eviware.com/soapui/config"/><con:entry xmlns:con="http://eviware.com/soapui/config"/></xml-fragment>]]></row></con:configuration></con:dataSource><con:property>agentId</con:property><con:property>guestEmail</con:property><con:property>guestMobile</con:property><con:property>orderNo</con:property><con:property>orderAmount</con:property><con:property>orderSource</con:property><con:property>currency</con:property><con:restartOnRun>true</con:restartOnRun></con:config></con:testStep><con:testStep type="groovy" name="generate orderNo" id="a95db3fe-2e64-48f1-a641-d8dd2cebce5a"><con:settings/><con:config><script>import java.text.SimpleDateFormat;

def today = new Date()
def format = new SimpleDateFormat();
format = new SimpleDateFormat("yyyyMMddkkmmssSSS");
def DateToStr = format.format(today);

log.info DateToStr
return DateToStr</script></con:config></con:testStep><con:testStep type="restrequest" name="createSession request" id="1e1f7a99-6a5d-4a2e-87f3-860e25fef011"><con:settings/><con:config service="PaymentMiddleware" resourcePath="/payment-middleware-service/sessions" methodName="Sessions" xsi:type="con:RestRequestStep" xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance"><con:restRequest name="createSession request" id="ac10df94-13d9-4eb3-9c59-7dd8a7e807e1" mediaType="application/json" postQueryString="false"><con:settings><con:setting id="com.eviware.soapui.impl.wsdl.WsdlRequest@request-headers">&lt;xml-fragment/></con:setting></con:settings><con:endpoint>${#Project#ServiceEndpoint}</con:endpoint><con:request>{
    "agentId" : "${agentId}",
    "orderNo" : "${orderNo}",
    "products":[    
        {"description" : "Adult one day part ticket for date 2016-09-15","unitPrice" : 100.00,"qty" : 2, "type" : "PARK_TICKET"},
        {"description" : "Child one day part ticket for date 2016-09-15","unitPrice" : 75.00,"qty" : 3, "type" : "PARK_TICKET"}
    ],
    "orderAmount" : "${orderAmount}",
    "orderSource" : "${orderSource}",
    "currency" : "${currency}"
}</con:request><con:originalUri>http://68.71.208.254/payment-middleware-service/sessions</con:originalUri><con:assertion type="Valid HTTP Status Codes" id="a4bc0a32-aa75-4bb9-9c08-f65c566bcf6e" name="Valid HTTP Status Codes"><con:settings/><con:configuration><codes>400</codes></con:configuration></con:assertion><con:assertion type="Simple Equals" id="31511da0-a5d1-4be2-9620-86078cb8f953" name="Equals"><con:configuration><patternText>1011:order amount cannot be negative or zero</patternText><caseSensitive>true</caseSensitive></con:configuration></con:assertion><con:credentials><con:username xsi:nil="true"/><con:password xsi:nil="true"/><con:domain xsi:nil="true"/><con:selectedAuthProfile>No Authorization</con:selectedAuthProfile><con:authType>No Authorization</con:authType></con:credentials><con:jmsConfig JMSDeliveryMode="PERSISTENT"/><con:jmsPropertyConfig/><con:parameters>
  <con:entry key="orderSource" value="${DataSource#orderSource}"/>
  <con:entry key="agentId" value="${DataSource#agentId}"/>
  <con:entry key="orderNo" value="${generate orderNo#result}"/>
  <con:entry key="orderAmount" value="${DataSource#orderAmount}"/>
  <con:entry key="guestMobile" value="${DataSource#guestMobile}"/>
  <con:entry key="currency" value="${DataSource#currency}"/>
  <con:entry key="guestEmail" value="${DataSource#guestEmail}"/>
</con:parameters><con:parameterOrder><con:entry>agentId</con:entry><con:entry>guestEmail</con:entry><con:entry>guestMobile</con:entry><con:entry>orderNo</con:entry><con:entry>orderAmount</con:entry><con:entry>orderSource</con:entry><con:entry>currency</con:entry><con:entry>payTtl</con:entry><con:entry>notifyUrl</con:entry><con:entry>guestSwid</con:entry><con:entry>returnUrl</con:entry></con:parameterOrder></con:restRequest></con:config></con:testStep><con:testStep type="datasourceloop" name="DataSource Loop" id="df269192-806d-410b-a17d-dbb27dbfb7cb"><con:settings/><con:config><dataSourceStep>DataSource</dataSourceStep><targetStep>generate orderNo</targetStep></con:config></con:testStep><con:properties/><con:reportParameters/><con:breakPoints><con:testStepId>12100cdb-d043-4c6f-b02b-df1c919be0e7</con:testStepId><con:status>NONE</con:status><con:properties/></con:breakPoints><con:breakPoints><con:testStepId>1c3c74eb-311f-4c1f-b773-06c87e6ac031</con:testStepId><con:status>NONE</con:status><con:properties/></con:breakPoints><con:breakPoints><con:testStepId>1e1f7a99-6a5d-4a2e-87f3-860e25fef011</con:testStepId><con:status>NONE</con:status><con:properties/></con:breakPoints><con:breakPoints><con:testStepId>df269192-806d-410b-a17d-dbb27dbfb7cb</con:testStepId><con:status>NONE</con:status><con:properties/></con:breakPoints><con:breakPoints><con:testStepId>a95db3fe-2e64-48f1-a641-d8dd2cebce5a</con:testStepId><con:status>NONE</con:status><con:properties/></con:breakPoints></con:testCase><con:testCase id="0bba2f8d-3326-43ed-a25e-de1ea0275997" failOnError="true" failTestCaseOnErrors="true" keepSession="false" maxResults="0" name="T08 orderSource positive" searchProperties="true"><con:description>TestCase generated for REST Resource [Sessions] located at [/sessions]</con:description><con:settings/><con:testStep type="datasource" name="DataSource" id="67939a29-516b-42bb-b9ce-923e7b25ba1c"><con:settings/><con:config xsi:type="con:DataSourceStep" xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance"><con:dataSource type="Grid"><con:configuration><check><![CDATA[<xml-fragment><con:entry xmlns:con="http://eviware.com/soapui/config">true</con:entry><con:entry xmlns:con="http://eviware.com/soapui/config">true</con:entry></xml-fragment>]]></check><row><![CDATA[<xml-fragment><con:entry xmlns:con="http://eviware.com/soapui/config">3452344444332</con:entry><con:entry xmlns:con="http://eviware.com/soapui/config"/><con:entry xmlns:con="http://eviware.com/soapui/config"/><con:entry xmlns:con="http://eviware.com/soapui/config"/><con:entry xmlns:con="http://eviware.com/soapui/config">1000.01</con:entry><con:entry xmlns:con="http://eviware.com/soapui/config">TICKETING</con:entry><con:entry xmlns:con="http://eviware.com/soapui/config">CNY</con:entry></xml-fragment>]]></row><row><![CDATA[<xml-fragment><con:entry xmlns:con="http://eviware.com/soapui/config">3452344444332</con:entry><con:entry xmlns:con="http://eviware.com/soapui/config"/><con:entry xmlns:con="http://eviware.com/soapui/config"/><con:entry xmlns:con="http://eviware.com/soapui/config"/><con:entry xmlns:con="http://eviware.com/soapui/config">1001.01</con:entry><con:entry xmlns:con="http://eviware.com/soapui/config">LODGING</con:entry><con:entry xmlns:con="http://eviware.com/soapui/config">CNY</con:entry></xml-fragment>]]></row></con:configuration></con:dataSource><con:property>agentId</con:property><con:property>guestEmail</con:property><con:property>guestMobile</con:property><con:property>orderNo</con:property><con:property>orderAmount</con:property><con:property>orderSource</con:property><con:property>currency</con:property><con:restartOnRun>true</con:restartOnRun></con:config></con:testStep><con:testStep type="groovy" name="generate orderNo" id="0cddb9ca-20f5-48b3-a57f-017e1f03c088"><con:settings/><con:config><script>import java.text.SimpleDateFormat;

def today = new Date()
def format = new SimpleDateFormat();
format = new SimpleDateFormat("yyyyMMddkkmmssSSS");
def DateToStr = format.format(today);

log.info DateToStr
return DateToStr</script></con:config></con:testStep><con:testStep type="restrequest" name="createSession request" id="c3c056a2-e95a-4fe3-99ea-ca6ff6118978"><con:settings/><con:config service="PaymentMiddleware" resourcePath="/payment-middleware-service/sessions" methodName="Sessions" xsi:type="con:RestRequestStep" xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance"><con:restRequest name="createSession request" id="ac10df94-13d9-4eb3-9c59-7dd8a7e807e1" mediaType="application/json" postQueryString="false"><con:settings><con:setting id="com.eviware.soapui.impl.wsdl.WsdlRequest@request-headers">&lt;xml-fragment/></con:setting></con:settings><con:endpoint>${#Project#ServiceEndpoint}</con:endpoint><con:request>{
    "agentId" : "${agentId}",
    "orderNo" : "${orderNo}",
    "products":[    
        {"description" : "Adult one day part ticket for date 2016-09-15","unitPrice" : 100.00,"qty" : 2, "type" : "PARK_TICKET"},
        {"description" : "Child one day part ticket for date 2016-09-15","unitPrice" : 75.00,"qty" : 3, "type" : "PARK_TICKET"}
    ],
    "orderAmount" : "${orderAmount}",
    "orderSource" : "${orderSource}",
    "currency" : "${currency}"
}</con:request><con:originalUri>http://68.71.208.254/payment-middleware-service/sessions</con:originalUri><con:assertion type="JsonPath Match" id="6c934317-5f11-4bc6-9579-3f69cd4aa632" name="Match content of [orderAmount]"><con:configuration><path>$.sessionInfo.orderSource</path><content>${DataSource#orderSource}</content><allowWildcards>false</allowWildcards><ignoreNamspaceDifferences>false</ignoreNamspaceDifferences><ignoreComments>false</ignoreComments></con:configuration></con:assertion><con:assertion type="JsonPath Match" id="eb067ffb-fa50-4656-b144-0eeab7277d49" name="SessionInfo Match"><con:configuration><path>$.sessionInfo</path><content>{"sessionId":"*","orderNo":"*","orderSource":"*","orderAmount":"*","currency":"*","state":"UNPAID","remark":*,"agentId":*,"guestMobile":*,"guestEmail":*,"guestSwid":*,"createdDate":"*","payTtl":*,"lastModifiedDate":"*","notifyUrl":*,"returnUrl":*}</content><allowWildcards>true</allowWildcards><ignoreNamspaceDifferences>false</ignoreNamspaceDifferences><ignoreComments>false</ignoreComments></con:configuration></con:assertion><con:assertion type="GroovyScriptAssertion" id="db316a27-8530-4f3b-bf13-235a8c500876" name="createdDate,expirationDate,lastModifiedDate Assertion" disabled="true"><con:configuration><scriptText>import org.joda.time.*;
import org.joda.time.format.*;

DateTimeFormatter parser = ISODateTimeFormat.dateTime();

def createdDate = parser.parseDateTime(context.expand( '${createSession request#Response#$.sessionInfo.createdDate}' ))
def expirationDate = parser.parseDateTime(context.expand( '${createSession request#Response#$.sessionInfo.expirationDate}' ))
def lastModifiedDate = parser.parseDateTime(context.expand( '${createSession request#Response#$.sessionInfo.lastModifiedDate}' ))


assert createdDate != null
assert expirationDate != null
assert lastModifiedDate != null
assert lastModifiedDate == createdDate
assert Minutes.minutesBetween(createdDate, expirationDate).getMinutes() % 60 == 29</scriptText></con:configuration></con:assertion><con:assertion type="JsonPath Match" id="ce8eb01a-26fb-4e06-a9b1-e6f6a0b897ba" name="Match content of [links]"><con:configuration><path>$.links</path><content>{"cancelSession":{"rel":"related","href":"*://*/payment-middleware-service/session/*","type":"text/plain"},"getSession":{"rel":"related","href":"*://*/payment-middleware-service/session/*","type":"application/json"},"createTransaction":{"rel":"related","href":"*://*/payment-middleware-service/session/*/transactions","type":"application/json"}}</content><allowWildcards>true</allowWildcards><ignoreNamspaceDifferences>false</ignoreNamspaceDifferences><ignoreComments>false</ignoreComments></con:configuration></con:assertion><con:credentials><con:username xsi:nil="true"/><con:password xsi:nil="true"/><con:domain xsi:nil="true"/><con:selectedAuthProfile>No Authorization</con:selectedAuthProfile><con:authType>No Authorization</con:authType></con:credentials><con:jmsConfig JMSDeliveryMode="PERSISTENT"/><con:jmsPropertyConfig/><con:parameters>
  <con:entry key="orderSource" value="${DataSource#orderSource}"/>
  <con:entry key="agentId" value="${DataSource#agentId}"/>
  <con:entry key="orderNo" value="${generate orderNo#result}"/>
  <con:entry key="orderAmount" value="${DataSource#orderAmount}"/>
  <con:entry key="guestMobile" value="${DataSource#guestMobile}"/>
  <con:entry key="currency" value="${DataSource#currency}"/>
  <con:entry key="guestEmail" value="${DataSource#guestEmail}"/>
</con:parameters><con:parameterOrder><con:entry>agentId</con:entry><con:entry>guestEmail</con:entry><con:entry>guestMobile</con:entry><con:entry>orderNo</con:entry><con:entry>orderAmount</con:entry><con:entry>orderSource</con:entry><con:entry>currency</con:entry><con:entry>payTtl</con:entry><con:entry>notifyUrl</con:entry><con:entry>guestSwid</con:entry><con:entry>returnUrl</con:entry></con:parameterOrder></con:restRequest></con:config></con:testStep><con:testStep type="datasourceloop" name="DataSource Loop" id="c0e23e0a-d3bc-4988-b7f1-d41e659f3da4"><con:settings/><con:config><dataSourceStep>DataSource</dataSourceStep><targetStep>generate orderNo</targetStep></con:config></con:testStep><con:properties/><con:reportParameters/><con:breakPoints><con:testStepId>12100cdb-d043-4c6f-b02b-df1c919be0e7</con:testStepId><con:status>NONE</con:status><con:properties/></con:breakPoints><con:breakPoints><con:testStepId>0cddb9ca-20f5-48b3-a57f-017e1f03c088</con:testStepId><con:status>NONE</con:status><con:properties/></con:breakPoints></con:testCase><con:testCase id="d31a5421-f627-4097-b645-8350eee6da15" failOnError="true" failTestCaseOnErrors="true" keepSession="false" maxResults="0" name="T09 orderSource negative" searchProperties="true"><con:settings/><con:testStep type="datasource" name="DataSource" id="d958e81f-df39-4b43-bd17-679932a5434e"><con:settings/><con:config xsi:type="con:DataSourceStep" xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance"><con:dataSource type="Grid"><con:configuration><check><![CDATA[<xml-fragment><con:entry xmlns:con="http://eviware.com/soapui/config">true</con:entry><con:entry xmlns:con="http://eviware.com/soapui/config">true</con:entry><con:entry xmlns:con="http://eviware.com/soapui/config">true</con:entry></xml-fragment>]]></check><row><![CDATA[<xml-fragment><con:entry xmlns:con="http://eviware.com/soapui/config">3452344444335</con:entry><con:entry xmlns:con="http://eviware.com/soapui/config"/><con:entry xmlns:con="http://eviware.com/soapui/config"/><con:entry xmlns:con="http://eviware.com/soapui/config"/><con:entry xmlns:con="http://eviware.com/soapui/config">1000.00</con:entry><con:entry xmlns:con="http://eviware.com/soapui/config">11111</con:entry><con:entry xmlns:con="http://eviware.com/soapui/config">CNY</con:entry></xml-fragment>]]></row><row><![CDATA[<xml-fragment><con:entry xmlns:con="http://eviware.com/soapui/config">3452344444335</con:entry><con:entry xmlns:con="http://eviware.com/soapui/config"/><con:entry xmlns:con="http://eviware.com/soapui/config"/><con:entry xmlns:con="http://eviware.com/soapui/config"/><con:entry xmlns:con="http://eviware.com/soapui/config">1000.00</con:entry><con:entry xmlns:con="http://eviware.com/soapui/config"/><con:entry xmlns:con="http://eviware.com/soapui/config">CNY</con:entry></xml-fragment>]]></row><row><![CDATA[<xml-fragment><con:entry xmlns:con="http://eviware.com/soapui/config">3452344444335</con:entry><con:entry xmlns:con="http://eviware.com/soapui/config"/><con:entry xmlns:con="http://eviware.com/soapui/config"/><con:entry xmlns:con="http://eviware.com/soapui/config"/><con:entry xmlns:con="http://eviware.com/soapui/config">1000.00</con:entry><con:entry xmlns:con="http://eviware.com/soapui/config">1.1</con:entry><con:entry xmlns:con="http://eviware.com/soapui/config">CNY</con:entry></xml-fragment>]]></row></con:configuration></con:dataSource><con:property>agentId</con:property><con:property>guestEmail</con:property><con:property>guestMobile</con:property><con:property>orderNo</con:property><con:property>orderAmount</con:property><con:property>orderSource</con:property><con:property>currency</con:property><con:restartOnRun>true</con:restartOnRun></con:config></con:testStep><con:testStep type="groovy" name="generate orderNo" id="cea219ab-b0e2-44e4-bf86-da75f82d1133"><con:settings/><con:config><script>import java.text.SimpleDateFormat;

def today = new Date()
def format = new SimpleDateFormat();
format = new SimpleDateFormat("yyyyMMddkkmmssSSS");
def DateToStr = format.format(today);

log.info DateToStr
return DateToStr</script></con:config></con:testStep><con:testStep type="restrequest" name="createSession request" id="58ec0e52-6bf9-4f6a-a3b6-b477ab337ec5"><con:settings/><con:config service="PaymentMiddleware" resourcePath="/payment-middleware-service/sessions" methodName="Sessions" xsi:type="con:RestRequestStep" xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance"><con:restRequest name="createSession request" id="ac10df94-13d9-4eb3-9c59-7dd8a7e807e1" mediaType="application/json" postQueryString="false"><con:settings><con:setting id="com.eviware.soapui.impl.wsdl.WsdlRequest@request-headers">&lt;xml-fragment/></con:setting></con:settings><con:endpoint>${#Project#ServiceEndpoint}</con:endpoint><con:request>{
    "agentId" : "${agentId}",
    "orderNo" : "${orderNo}",
    "products":[    
        {"description" : "Adult one day part ticket for date 2016-09-15","unitPrice" : 100.00,"qty" : 2, "type" : "PARK_TICKET"},
        {"description" : "Child one day part ticket for date 2016-09-15","unitPrice" : 75.00,"qty" : 3, "type" : "PARK_TICKET"}
    ],
    "orderAmount" : "${orderAmount}",
    "orderSource" : "${orderSource}",
    "currency" : "${currency}"
}</con:request><con:originalUri>http://68.71.208.254/payment-middleware-service/sessions</con:originalUri><con:assertion type="Valid HTTP Status Codes" id="9ea3477b-2134-4dc6-85d7-fc3e16c79456" name="Valid HTTP Status Codes"><con:settings/><con:configuration><codes>400</codes></con:configuration></con:assertion><con:assertion type="Simple Equals" id="053b0036-26f1-454c-8dbd-b42fb4e080f0" name="Equals"><con:configuration><patternText>1006:order source is invalid</patternText><caseSensitive>true</caseSensitive></con:configuration></con:assertion><con:credentials><con:username xsi:nil="true"/><con:password xsi:nil="true"/><con:domain xsi:nil="true"/><con:selectedAuthProfile>No Authorization</con:selectedAuthProfile><con:authType>No Authorization</con:authType></con:credentials><con:jmsConfig JMSDeliveryMode="PERSISTENT"/><con:jmsPropertyConfig/><con:parameters>
  <con:entry key="orderSource" value="${DataSource#orderSource}"/>
  <con:entry key="agentId" value="${DataSource#agentId}"/>
  <con:entry key="orderNo" value="${generate orderNo#result}"/>
  <con:entry key="orderAmount" value="${DataSource#orderAmount}"/>
  <con:entry key="guestMobile" value="${DataSource#guestMobile}"/>
  <con:entry key="currency" value="${DataSource#currency}"/>
  <con:entry key="guestEmail" value="${DataSource#guestEmail}"/>
</con:parameters><con:parameterOrder><con:entry>agentId</con:entry><con:entry>guestEmail</con:entry><con:entry>guestMobile</con:entry><con:entry>orderNo</con:entry><con:entry>orderAmount</con:entry><con:entry>orderSource</con:entry><con:entry>currency</con:entry><con:entry>payTtl</con:entry><con:entry>notifyUrl</con:entry><con:entry>guestSwid</con:entry><con:entry>returnUrl</con:entry></con:parameterOrder></con:restRequest></con:config></con:testStep><con:testStep type="datasourceloop" name="DataSource Loop" id="080fb10a-3bd5-420b-a74f-83560dbccece"><con:settings/><con:config><dataSourceStep>DataSource</dataSourceStep><targetStep>generate orderNo</targetStep></con:config></con:testStep><con:properties/><con:reportParameters/><con:breakPoints><con:testStepId>d958e81f-df39-4b43-bd17-679932a5434e</con:testStepId><con:status>NONE</con:status><con:properties/></con:breakPoints></con:testCase><con:testCase id="39281cd9-0820-45c2-852f-df777a02c16a" failOnError="true" failTestCaseOnErrors="true" keepSession="false" maxResults="0" name="T10 currency negative" searchProperties="true"><con:settings/><con:testStep type="datasource" name="DataSource" id="d3de11b0-76de-4a8d-9635-fb3cfeb47494"><con:settings/><con:config xsi:type="con:DataSourceStep" xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance"><con:dataSource type="Grid"><con:configuration><check><![CDATA[<xml-fragment><con:entry xmlns:con="http://eviware.com/soapui/config">true</con:entry><con:entry xmlns:con="http://eviware.com/soapui/config">true</con:entry><con:entry xmlns:con="http://eviware.com/soapui/config">true</con:entry></xml-fragment>]]></check><row><![CDATA[<xml-fragment><con:entry xmlns:con="http://eviware.com/soapui/config">3452344444335</con:entry><con:entry xmlns:con="http://eviware.com/soapui/config"/><con:entry xmlns:con="http://eviware.com/soapui/config"/><con:entry xmlns:con="http://eviware.com/soapui/config"/><con:entry xmlns:con="http://eviware.com/soapui/config">1000.01</con:entry><con:entry xmlns:con="http://eviware.com/soapui/config">TICKETING</con:entry><con:entry xmlns:con="http://eviware.com/soapui/config">111</con:entry></xml-fragment>]]></row><row><![CDATA[<xml-fragment><con:entry xmlns:con="http://eviware.com/soapui/config">3452344444335</con:entry><con:entry xmlns:con="http://eviware.com/soapui/config"/><con:entry xmlns:con="http://eviware.com/soapui/config"/><con:entry xmlns:con="http://eviware.com/soapui/config"/><con:entry xmlns:con="http://eviware.com/soapui/config">1000.02</con:entry><con:entry xmlns:con="http://eviware.com/soapui/config">TICKETING</con:entry><con:entry xmlns:con="http://eviware.com/soapui/config"/></xml-fragment>]]></row><row><![CDATA[<xml-fragment><con:entry xmlns:con="http://eviware.com/soapui/config">3452344444335</con:entry><con:entry xmlns:con="http://eviware.com/soapui/config"/><con:entry xmlns:con="http://eviware.com/soapui/config"/><con:entry xmlns:con="http://eviware.com/soapui/config"/><con:entry xmlns:con="http://eviware.com/soapui/config">1000.03</con:entry><con:entry xmlns:con="http://eviware.com/soapui/config">TICKETING</con:entry><con:entry xmlns:con="http://eviware.com/soapui/config">USD</con:entry></xml-fragment>]]></row></con:configuration></con:dataSource><con:property>agentId</con:property><con:property>guestEmail</con:property><con:property>guestMobile</con:property><con:property>orderNo</con:property><con:property>orderAmount</con:property><con:property>orderSource</con:property><con:property>currency</con:property><con:restartOnRun>true</con:restartOnRun></con:config></con:testStep><con:testStep type="groovy" name="generate orderNo" id="f5502626-1d26-4dfd-89b1-f12998990ea3"><con:settings/><con:config><script>import java.text.SimpleDateFormat;

def today = new Date()
def format = new SimpleDateFormat();
format = new SimpleDateFormat("yyyyMMddkkmmssSSS");
def DateToStr = format.format(today);

log.info DateToStr
return DateToStr</script></con:config></con:testStep><con:testStep type="restrequest" name="createSession request" id="712b43de-5338-4053-87e7-aa970bdf9b44"><con:settings/><con:config service="PaymentMiddleware" resourcePath="/payment-middleware-service/sessions" methodName="Sessions" xsi:type="con:RestRequestStep" xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance"><con:restRequest name="createSession request" id="ac10df94-13d9-4eb3-9c59-7dd8a7e807e1" mediaType="application/json" postQueryString="false"><con:settings><con:setting id="com.eviware.soapui.impl.wsdl.WsdlRequest@request-headers">&lt;xml-fragment/></con:setting></con:settings><con:endpoint>${#Project#ServiceEndpoint}</con:endpoint><con:request>{
    "agentId" : "${agentId}",
    "orderNo" : "${orderNo}",
    "products":[    
        {"description" : "Adult one day part ticket for date 2016-09-15","unitPrice" : 100.00,"qty" : 2, "type" : "PARK_TICKET"},
        {"description" : "Child one day part ticket for date 2016-09-15","unitPrice" : 75.00,"qty" : 3, "type" : "PARK_TICKET"}
    ],
    "orderAmount" : "${orderAmount}",
    "orderSource" : "${orderSource}",
    "currency" : "${currency}"
}</con:request><con:originalUri>http://68.71.208.254/payment-middleware-service/sessions</con:originalUri><con:assertion type="Valid HTTP Status Codes" id="eb7de4f9-65c8-47e8-ab23-cc2d196b226e" name="Valid HTTP Status Codes"><con:settings/><con:configuration><codes>400</codes></con:configuration></con:assertion><con:assertion type="Simple Equals" id="54bb2e97-dd76-45b8-85f1-290fa2347517" name="Equals"><con:configuration><patternText>1010:currency name is invalid</patternText><caseSensitive>true</caseSensitive></con:configuration></con:assertion><con:credentials><con:username xsi:nil="true"/><con:password xsi:nil="true"/><con:domain xsi:nil="true"/><con:selectedAuthProfile>No Authorization</con:selectedAuthProfile><con:authType>No Authorization</con:authType></con:credentials><con:jmsConfig JMSDeliveryMode="PERSISTENT"/><con:jmsPropertyConfig/><con:parameters>
  <con:entry key="orderSource" value="${DataSource#orderSource}"/>
  <con:entry key="agentId" value="${DataSource#agentId}"/>
  <con:entry key="orderNo" value="${generate orderNo#result}"/>
  <con:entry key="orderAmount" value="${DataSource#orderAmount}"/>
  <con:entry key="guestMobile" value="${DataSource#guestMobile}"/>
  <con:entry key="currency" value="${DataSource#currency}"/>
  <con:entry key="guestEmail" value="${DataSource#guestEmail}"/>
</con:parameters><con:parameterOrder><con:entry>agentId</con:entry><con:entry>guestEmail</con:entry><con:entry>guestMobile</con:entry><con:entry>orderNo</con:entry><con:entry>orderAmount</con:entry><con:entry>orderSource</con:entry><con:entry>currency</con:entry><con:entry>payTtl</con:entry><con:entry>notifyUrl</con:entry><con:entry>guestSwid</con:entry><con:entry>returnUrl</con:entry></con:parameterOrder></con:restRequest></con:config></con:testStep><con:testStep type="datasourceloop" name="DataSource Loop" id="9dfbd721-fdf7-4990-be0a-3a5572734819"><con:settings/><con:config><dataSourceStep>DataSource</dataSourceStep><targetStep>generate orderNo</targetStep></con:config></con:testStep><con:properties/><con:reportParameters/><con:breakPoints><con:testStepId>d3de11b0-76de-4a8d-9635-fb3cfeb47494</con:testStepId><con:status>NONE</con:status><con:properties/></con:breakPoints></con:testCase><con:testCase id="55a35cb6-ce70-43fa-9396-c43f950510e9" failOnError="true" failTestCaseOnErrors="true" keepSession="false" maxResults="0" name="T11 payTtl positive" searchProperties="true"><con:settings/><con:testStep type="datasource" name="DataSource" id="e11366f3-a8f1-4014-ad4c-9fecc98c6b24"><con:settings/><con:config xsi:type="con:DataSourceStep" xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance"><con:dataSource type="Grid"><con:configuration><check>&lt;con:entry xmlns:con="http://eviware.com/soapui/config">true&lt;/con:entry></check><row><![CDATA[<xml-fragment><con:entry xmlns:con="http://eviware.com/soapui/config">3452344444332</con:entry><con:entry xmlns:con="http://eviware.com/soapui/config"/><con:entry xmlns:con="http://eviware.com/soapui/config"/><con:entry xmlns:con="http://eviware.com/soapui/config"/><con:entry xmlns:con="http://eviware.com/soapui/config">1000.01</con:entry><con:entry xmlns:con="http://eviware.com/soapui/config">TICKETING</con:entry><con:entry xmlns:con="http://eviware.com/soapui/config">CNY</con:entry><con:entry xmlns:con="http://eviware.com/soapui/config">PC_WEB</con:entry><con:entry xmlns:con="http://eviware.com/soapui/config">ALIPAY</con:entry><con:entry xmlns:con="http://eviware.com/soapui/config">SHDR_DOMESTIC_BANK_CMB</con:entry><con:entry xmlns:con="http://eviware.com/soapui/config">2</con:entry><con:entry xmlns:con="http://eviware.com/soapui/config">cn</con:entry><con:entry xmlns:con="http://eviware.com/soapui/config">zh-cn</con:entry></xml-fragment>]]></row></con:configuration></con:dataSource><con:property>agentId</con:property><con:property>guestEmail</con:property><con:property>guestMobile</con:property><con:property>orderNo</con:property><con:property>orderAmount</con:property><con:property>orderSource</con:property><con:property>currency</con:property><con:property>payChannel</con:property><con:property>payOption</con:property><con:property>bankName</con:property><con:property>payTtl</con:property><con:property>region</con:property><con:property>language</con:property><con:restartOnRun>true</con:restartOnRun></con:config></con:testStep><con:testStep type="groovy" name="generate orderNo" id="77275c46-9efe-4068-8392-4e97a4a6c53d"><con:settings/><con:config><script>import java.text.SimpleDateFormat;

def today = new Date()
def format = new SimpleDateFormat();
format = new SimpleDateFormat("yyyyMMddkkmmssSSS");
def DateToStr = format.format(today);

log.info DateToStr
return DateToStr</script></con:config></con:testStep><con:testStep type="restrequest" name="createSession request" id="e889e43b-9d1c-4e03-b420-352fd073569f"><con:settings/><con:config service="PaymentMiddleware" resourcePath="/payment-middleware-service/sessions" methodName="Sessions" xsi:type="con:RestRequestStep" xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance"><con:restRequest name="createSession request" id="ac10df94-13d9-4eb3-9c59-7dd8a7e807e1" mediaType="application/json" postQueryString="false"><con:settings><con:setting id="com.eviware.soapui.impl.wsdl.WsdlRequest@request-headers">&lt;xml-fragment/></con:setting></con:settings><con:endpoint>${#Project#ServiceEndpoint}</con:endpoint><con:request>{
    "agentId" : "${agentId}",
    "orderNo" : "${orderNo}",
    "products":[    
        {"description" : "Adult one day part ticket for date 2016-09-15","unitPrice" : 100.00,"qty" : 2, "type" : "PARK_TICKET"},
        {"description" : "Child one day part ticket for date 2016-09-15","unitPrice" : 75.00,"qty" : 3, "type" : "PARK_TICKET"}
    ],
    "orderAmount" : "${orderAmount}",
    "orderSource" : "${orderSource}",
    "currency" : "${currency}",
    "payTtl" : "${payTtl}"
}</con:request><con:originalUri>http://68.71.208.254/payment-middleware-service/sessions</con:originalUri><con:assertion type="JsonPath Match" id="eb067ffb-fa50-4656-b144-0eeab7277d49" name="SessionInfo Match"><con:configuration><path>$.sessionInfo</path><content>{"sessionId":"*","orderNo":"*","orderSource":"*","orderAmount":"*","currency":"*","state":"UNPAID","remark":*,"agentId":*,"guestMobile":*,"guestEmail":*,"guestSwid":*,"createdDate":"*","payTtl":*,"lastModifiedDate":"*","notifyUrl":*,"returnUrl":*}</content><allowWildcards>true</allowWildcards><ignoreNamspaceDifferences>false</ignoreNamspaceDifferences><ignoreComments>false</ignoreComments></con:configuration></con:assertion><con:assertion type="GroovyScriptAssertion" id="db316a27-8530-4f3b-bf13-235a8c500876" name="createdDate,expirationDate,lastModifiedDate Assertion" disabled="true"><con:configuration><scriptText>import org.joda.time.*;
import org.joda.time.format.*;

DateTimeFormatter parser = ISODateTimeFormat.dateTime();

def createdDate = parser.parseDateTime(context.expand( '${createSession request#Response#$.sessionInfo.createdDate}' ))
def expirationDate = parser.parseDateTime(context.expand( '${createSession request#Response#$.sessionInfo.expirationDate}' ))
def lastModifiedDate = parser.parseDateTime(context.expand( '${createSession request#Response#$.sessionInfo.lastModifiedDate}' ))
int payTtl  = context.expand( '${DataSource#payTtl}' ).toInteger()

assert createdDate != null
assert expirationDate != null
assert lastModifiedDate != null
assert lastModifiedDate == createdDate
assert Minutes.minutesBetween(createdDate, expirationDate).getMinutes() % 60 == payTtl-1</scriptText></con:configuration></con:assertion><con:assertion type="JsonPath Match" id="ce8eb01a-26fb-4e06-a9b1-e6f6a0b897ba" name="Match content of [links]"><con:configuration><path>$.links</path><content>{"cancelSession":{"rel":"related","href":"*://*/payment-middleware-service/session/*","type":"text/plain"},"getSession":{"rel":"related","href":"*://*/payment-middleware-service/session/*","type":"application/json"},"createTransaction":{"rel":"related","href":"*://*/payment-middleware-service/session/*/transactions","type":"application/json"}}</content><allowWildcards>true</allowWildcards><ignoreNamspaceDifferences>false</ignoreNamspaceDifferences><ignoreComments>false</ignoreComments></con:configuration></con:assertion><con:assertion type="JsonPath Match" id="82d2e8fc-9f7e-41aa-a9ba-efb065480317" name="Match content of [payTtl]"><con:configuration><path>$.sessionInfo.payTtl</path><content>${DataSource#payTtl}</content><allowWildcards>false</allowWildcards><ignoreNamspaceDifferences>false</ignoreNamspaceDifferences><ignoreComments>false</ignoreComments></con:configuration></con:assertion><con:credentials><con:username xsi:nil="true"/><con:password xsi:nil="true"/><con:domain xsi:nil="true"/><con:selectedAuthProfile>No Authorization</con:selectedAuthProfile><con:authType>No Authorization</con:authType></con:credentials><con:jmsConfig JMSDeliveryMode="PERSISTENT"/><con:jmsPropertyConfig/><con:parameters>
  <con:entry key="orderSource" value="${DataSource#orderSource}"/>
  <con:entry key="agentId" value="${DataSource#agentId}"/>
  <con:entry key="orderNo" value="${generate orderNo#result}"/>
  <con:entry key="orderAmount" value="${DataSource#orderAmount}"/>
  <con:entry key="guestMobile" value="${DataSource#guestMobile}"/>
  <con:entry key="payTtl" value="${DataSource#payTtl}"/>
  <con:entry key="currency" value="${DataSource#currency}"/>
  <con:entry key="guestEmail" value="${DataSource#guestEmail}"/>
</con:parameters><con:parameterOrder><con:entry>agentId</con:entry><con:entry>guestEmail</con:entry><con:entry>guestMobile</con:entry><con:entry>orderNo</con:entry><con:entry>orderAmount</con:entry><con:entry>orderSource</con:entry><con:entry>currency</con:entry><con:entry>payTtl</con:entry><con:entry>notifyUrl</con:entry><con:entry>guestSwid</con:entry><con:entry>returnUrl</con:entry></con:parameterOrder></con:restRequest></con:config></con:testStep><con:testStep type="restrequest" name="createTransaction" id="fc732aa7-9e67-4444-ae8f-ac0e0c5789c5"><con:settings/><con:config service="PaymentMiddleware" resourcePath="/payment-middleware-service/session/{sessionId}/transactions" methodName="Method 1" xsi:type="con:RestRequestStep" xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance"><con:restRequest name="createTransaction" id="2e9068e2-c308-4c81-90f3-30ec3896b43c" mediaType="application/json" postQueryString="false"><con:settings><con:setting id="com.eviware.soapui.impl.wsdl.WsdlRequest@request-headers">&lt;xml-fragment/></con:setting></con:settings><con:endpoint>${#Project#ServiceEndpoint}</con:endpoint><con:request>{
    "region" : "${region}",
    "payChannel" : "${payChannel}",
    "payOption" : "${payOption}"
}</con:request><con:originalUri>http://68.71.208.254/payment-middleware-service/session//transactions</con:originalUri><con:assertion type="JsonPath Match" id="5359c8c4-b42b-4644-a878-ce592e97c7cb" name="Match content of [href]"><con:configuration><path>$.href</path><content>https://*</content><allowWildcards>true</allowWildcards><ignoreNamspaceDifferences>false</ignoreNamspaceDifferences><ignoreComments>false</ignoreComments></con:configuration></con:assertion><con:assertion type="JsonPath Match" id="19a9b6f6-3166-447f-a235-a8f896906836" name="Match content of [method]"><con:configuration><path>$.method</path><content>POST</content><allowWildcards>false</allowWildcards><ignoreNamspaceDifferences>false</ignoreNamspaceDifferences><ignoreComments>false</ignoreComments></con:configuration></con:assertion><con:assertion type="JsonPath Existence Match" id="2d1a9429-c5fe-4709-a1d0-908dd305cd4d" name="Check for existence of [params]"><con:configuration><path>$.params</path><content>true</content><allowWildcards>false</allowWildcards><ignoreNamspaceDifferences>false</ignoreNamspaceDifferences><ignoreComments>false</ignoreComments></con:configuration></con:assertion><con:credentials><con:username xsi:nil="true"/><con:password xsi:nil="true"/><con:domain xsi:nil="true"/><con:selectedAuthProfile>No Authorization</con:selectedAuthProfile><con:authType>No Authorization</con:authType></con:credentials><con:jmsConfig JMSDeliveryMode="PERSISTENT"/><con:parameters>
  <con:entry key="payOption" value="${DataSource#payOption}"/>
  <con:entry key="payChannel" value="${DataSource#payChannel}"/>
  <con:entry key="sessionId" value="${createSession request#Response#$.sessionInfo.sessionId}"/>
  <con:entry key="Accept-Language" value="${DataSource#language}"/>
  <con:entry key="region" value="${DataSource#region}"/>
</con:parameters><con:parameterOrder><con:entry>sessionId</con:entry><con:entry>Accept-Language</con:entry><con:entry>payChannel</con:entry><con:entry>payOption</con:entry><con:entry>bankName</con:entry><con:entry>region</con:entry><con:entry>X-CIP</con:entry></con:parameterOrder></con:restRequest></con:config></con:testStep><con:testStep type="delay" name="Delay" id="11eef686-d296-4ac9-bc1f-4ba287411373"><con:settings/><con:config><delay>121000</delay></con:config></con:testStep><con:testStep type="restrequest" name="createTransaction again" id="1e16566d-3e53-4a1a-b0ad-faf0e2463971"><con:settings/><con:config service="PaymentMiddleware" resourcePath="/payment-middleware-service/session/{sessionId}/transactions" methodName="Method 1" xsi:type="con:RestRequestStep" xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance"><con:restRequest name="createTransaction again" id="2e9068e2-c308-4c81-90f3-30ec3896b43c" mediaType="application/json" postQueryString="false"><con:settings><con:setting id="com.eviware.soapui.impl.wsdl.WsdlRequest@request-headers">&lt;xml-fragment/></con:setting></con:settings><con:endpoint>${#Project#ServiceEndpoint}</con:endpoint><con:request>{
    "region" : "${region}",
    "payChannel" : "${payChannel}",
    "payOption" : "${payOption}"
}</con:request><con:originalUri>http://68.71.208.254/payment-middleware-service/session//transactions</con:originalUri><con:assertion type="Valid HTTP Status Codes" id="fb049155-63e2-4987-a001-b47c1dc865d3" name="Valid HTTP Status Codes"><con:settings/><con:configuration><codes>400</codes></con:configuration></con:assertion><con:assertion type="Simple Equals" id="6acad3a6-dc29-4476-8d9f-f8538e667928" name="Equals"><con:configuration><patternText>2005:There is no time left for payment</patternText><caseSensitive>true</caseSensitive></con:configuration></con:assertion><con:credentials><con:username xsi:nil="true"/><con:password xsi:nil="true"/><con:domain xsi:nil="true"/><con:selectedAuthProfile>No Authorization</con:selectedAuthProfile><con:authType>No Authorization</con:authType></con:credentials><con:jmsConfig JMSDeliveryMode="PERSISTENT"/><con:parameters>
  <con:entry key="payOption" value="${DataSource#payOption}"/>
  <con:entry key="payChannel" value="${DataSource#payChannel}"/>
  <con:entry key="sessionId" value="${createSession request#Response#$.sessionInfo.sessionId}"/>
  <con:entry key="Accept-Language" value="${DataSource#language}"/>
  <con:entry key="region" value="${DataSource#region}"/>
</con:parameters><con:parameterOrder><con:entry>sessionId</con:entry><con:entry>Accept-Language</con:entry><con:entry>payChannel</con:entry><con:entry>payOption</con:entry><con:entry>bankName</con:entry><con:entry>region</con:entry><con:entry>X-CIP</con:entry></con:parameterOrder></con:restRequest></con:config></con:testStep><con:properties/><con:reportParameters/></con:testCase><con:testCase id="7ef727ad-477a-478c-be4a-19b2e9f1d4ef" failOnError="true" failTestCaseOnErrors="true" keepSession="false" maxResults="0" name="T12 payTtl negative" searchProperties="true"><con:description>TestCase generated for REST Resource [Sessions] located at [/sessions]</con:description><con:settings/><con:testStep type="datasource" name="DataSource" id="cfcd7b64-7ab0-4ddc-a7da-1919e2a38eee"><con:settings/><con:config xsi:type="con:DataSourceStep" xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance"><con:dataSource type="Grid"><con:configuration><check><![CDATA[<xml-fragment><con:entry xmlns:con="http://eviware.com/soapui/config">true</con:entry><con:entry xmlns:con="http://eviware.com/soapui/config">true</con:entry></xml-fragment>]]></check><row><![CDATA[<xml-fragment><con:entry xmlns:con="http://eviware.com/soapui/config">3452344444332</con:entry><con:entry xmlns:con="http://eviware.com/soapui/config"/><con:entry xmlns:con="http://eviware.com/soapui/config"/><con:entry xmlns:con="http://eviware.com/soapui/config"/><con:entry xmlns:con="http://eviware.com/soapui/config">1000.01</con:entry><con:entry xmlns:con="http://eviware.com/soapui/config">TICKETING</con:entry><con:entry xmlns:con="http://eviware.com/soapui/config">CNY</con:entry><con:entry xmlns:con="http://eviware.com/soapui/config">21601</con:entry></xml-fragment>]]></row><row><![CDATA[<xml-fragment><con:entry xmlns:con="http://eviware.com/soapui/config">3452344444332</con:entry><con:entry xmlns:con="http://eviware.com/soapui/config"/><con:entry xmlns:con="http://eviware.com/soapui/config"/><con:entry xmlns:con="http://eviware.com/soapui/config"/><con:entry xmlns:con="http://eviware.com/soapui/config">1000.02</con:entry><con:entry xmlns:con="http://eviware.com/soapui/config">TICKETING</con:entry><con:entry xmlns:con="http://eviware.com/soapui/config">CNY</con:entry><con:entry xmlns:con="http://eviware.com/soapui/config">0</con:entry></xml-fragment>]]></row></con:configuration></con:dataSource><con:property>agentId</con:property><con:property>guestEmail</con:property><con:property>guestMobile</con:property><con:property>orderNo</con:property><con:property>orderAmount</con:property><con:property>orderSource</con:property><con:property>currency</con:property><con:property>payTtl</con:property><con:restartOnRun>true</con:restartOnRun></con:config></con:testStep><con:testStep type="groovy" name="generate orderNo" id="c0601705-9c7a-428d-b66d-4178f1799452"><con:settings/><con:config><script>import java.text.SimpleDateFormat;

def today = new Date()
def format = new SimpleDateFormat();
format = new SimpleDateFormat("yyyyMMddkkmmssSSS");
def DateToStr = format.format(today);

log.info DateToStr
return DateToStr</script></con:config></con:testStep><con:testStep type="restrequest" name="createSession request" id="62518a82-9a06-4bfc-b86b-a1b9d45f630d"><con:settings/><con:config service="PaymentMiddleware" resourcePath="/payment-middleware-service/sessions" methodName="Sessions" xsi:type="con:RestRequestStep" xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance"><con:restRequest name="createSession request" id="ac10df94-13d9-4eb3-9c59-7dd8a7e807e1" mediaType="application/json" postQueryString="false"><con:settings><con:setting id="com.eviware.soapui.impl.wsdl.WsdlRequest@request-headers">&lt;xml-fragment/></con:setting></con:settings><con:endpoint>${#Project#ServiceEndpoint}</con:endpoint><con:request>{
    "agentId" : "${agentId}",
    "orderNo" : "${orderNo}",
    "products":[    
        {"description" : "Adult one day part ticket for date 2016-09-15","unitPrice" : 100.00,"qty" : 2, "type" : "PARK_TICKET"},
        {"description" : "Child one day part ticket for date 2016-09-15","unitPrice" : 75.00,"qty" : 3, "type" : "PARK_TICKET"}
    ],
    "orderAmount" : "${orderAmount}",
    "orderSource" : "${orderSource}",
    "currency" : "${currency}",
    "payTtl" : "${payTtl}"
}</con:request><con:originalUri>http://68.71.208.254/payment-middleware-service/sessions</con:originalUri><con:assertion type="Valid HTTP Status Codes" id="a4bc0a32-aa75-4bb9-9c08-f65c566bcf6e" name="Valid HTTP Status Codes"><con:settings/><con:configuration><codes>400</codes></con:configuration></con:assertion><con:assertion type="Simple Equals" id="31511da0-a5d1-4be2-9620-86078cb8f953" name="Equals"><con:configuration><patternText>1023:pay ttl should be between 2 and 21600</patternText><caseSensitive>true</caseSensitive></con:configuration></con:assertion><con:credentials><con:username xsi:nil="true"/><con:password xsi:nil="true"/><con:domain xsi:nil="true"/><con:selectedAuthProfile>No Authorization</con:selectedAuthProfile><con:authType>No Authorization</con:authType></con:credentials><con:jmsConfig JMSDeliveryMode="PERSISTENT"/><con:jmsPropertyConfig/><con:parameters>
  <con:entry key="orderSource" value="${DataSource#orderSource}"/>
  <con:entry key="agentId" value="${DataSource#agentId}"/>
  <con:entry key="orderNo" value="${generate orderNo#result}"/>
  <con:entry key="orderAmount" value="${DataSource#orderAmount}"/>
  <con:entry key="guestMobile" value="${DataSource#guestMobile}"/>
  <con:entry key="payTtl" value="${DataSource#payTtl}"/>
  <con:entry key="currency" value="${DataSource#currency}"/>
  <con:entry key="guestEmail" value="${DataSource#guestEmail}"/>
</con:parameters><con:parameterOrder><con:entry>agentId</con:entry><con:entry>guestEmail</con:entry><con:entry>guestMobile</con:entry><con:entry>orderNo</con:entry><con:entry>orderAmount</con:entry><con:entry>orderSource</con:entry><con:entry>currency</con:entry><con:entry>payTtl</con:entry><con:entry>notifyUrl</con:entry><con:entry>guestSwid</con:entry><con:entry>returnUrl</con:entry></con:parameterOrder></con:restRequest></con:config></con:testStep><con:testStep type="datasourceloop" name="DataSource Loop" id="2e140a22-f0dc-41eb-9ce7-65221506e0d5"><con:settings/><con:config><dataSourceStep>DataSource</dataSourceStep><targetStep>generate orderNo</targetStep></con:config></con:testStep><con:properties/><con:reportParameters/><con:breakPoints><con:testStepId>12100cdb-d043-4c6f-b02b-df1c919be0e7</con:testStepId><con:status>NONE</con:status><con:properties/></con:breakPoints><con:breakPoints><con:testStepId>1c3c74eb-311f-4c1f-b773-06c87e6ac031</con:testStepId><con:status>NONE</con:status><con:properties/></con:breakPoints><con:breakPoints><con:testStepId>1e1f7a99-6a5d-4a2e-87f3-860e25fef011</con:testStepId><con:status>NONE</con:status><con:properties/></con:breakPoints><con:breakPoints><con:testStepId>df269192-806d-410b-a17d-dbb27dbfb7cb</con:testStepId><con:status>NONE</con:status><con:properties/></con:breakPoints><con:breakPoints><con:testStepId>a95db3fe-2e64-48f1-a641-d8dd2cebce5a</con:testStepId><con:status>NONE</con:status><con:properties/></con:breakPoints></con:testCase><con:testCase id="352d6934-a516-4561-b013-9b408e99091b" failOnError="true" failTestCaseOnErrors="true" keepSession="false" maxResults="0" name="T13 notifyUrl positive" searchProperties="true" disabled="true"><con:settings/><con:testStep type="datasource" name="DataSource" id="0d38f603-56e6-4d9e-bdfe-1d2e23c12e5f"><con:settings/><con:config xsi:type="con:DataSourceStep" xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance"><con:dataSource type="Grid"><con:configuration><check><![CDATA[<xml-fragment><con:entry xmlns:con="http://eviware.com/soapui/config">false</con:entry><con:entry xmlns:con="http://eviware.com/soapui/config">true</con:entry></xml-fragment>]]></check><row><![CDATA[<xml-fragment><con:entry xmlns:con="http://eviware.com/soapui/config">3452344444332</con:entry><con:entry xmlns:con="http://eviware.com/soapui/config"/><con:entry xmlns:con="http://eviware.com/soapui/config"/><con:entry xmlns:con="http://eviware.com/soapui/config"/><con:entry xmlns:con="http://eviware.com/soapui/config">50.01</con:entry><con:entry xmlns:con="http://eviware.com/soapui/config">LODGING</con:entry><con:entry xmlns:con="http://eviware.com/soapui/config">CNY</con:entry><con:entry xmlns:con="http://eviware.com/soapui/config">en</con:entry><con:entry xmlns:con="http://eviware.com/soapui/config">MOBILE_WEB</con:entry><con:entry xmlns:con="http://eviware.com/soapui/config">DOMESTIC_CARD</con:entry><con:entry xmlns:con="http://eviware.com/soapui/config">http://10.131.245.229:8080/payment-middleware-psp-alipay-simulator/gateway</con:entry><con:entry xmlns:con="http://eviware.com/soapui/config">cn</con:entry></xml-fragment>]]></row><row><![CDATA[<xml-fragment><con:entry xmlns:con="http://eviware.com/soapui/config">3452344444332</con:entry><con:entry xmlns:con="http://eviware.com/soapui/config"/><con:entry xmlns:con="http://eviware.com/soapui/config"/><con:entry xmlns:con="http://eviware.com/soapui/config"/><con:entry xmlns:con="http://eviware.com/soapui/config">50.02</con:entry><con:entry xmlns:con="http://eviware.com/soapui/config">TICKETING</con:entry><con:entry xmlns:con="http://eviware.com/soapui/config">CNY</con:entry><con:entry xmlns:con="http://eviware.com/soapui/config">zh-cn</con:entry><con:entry xmlns:con="http://eviware.com/soapui/config">PC_WEB</con:entry><con:entry xmlns:con="http://eviware.com/soapui/config">DOMESTIC_CARD</con:entry><con:entry xmlns:con="http://eviware.com/soapui/config">http://10.131.245.229:8080/payment-middleware-psp-alipay-simulator/gateway?format=json</con:entry><con:entry xmlns:con="http://eviware.com/soapui/config">cn</con:entry><con:entry xmlns:con="http://eviware.com/soapui/config"/></xml-fragment>]]></row></con:configuration></con:dataSource><con:property>agentId</con:property><con:property>guestEmail</con:property><con:property>guestMobile</con:property><con:property>orderNo</con:property><con:property>orderAmount</con:property><con:property>orderSource</con:property><con:property>currency</con:property><con:property>language</con:property><con:property>payChannel</con:property><con:property>payOption</con:property><con:property>notifyUrl</con:property><con:property>region</con:property><con:restartOnRun>true</con:restartOnRun></con:config></con:testStep><con:testStep type="groovy" name="generate orderNo" id="0d714ddd-85a2-4083-9bca-1de2dcb3e165"><con:settings/><con:config><script>import java.text.SimpleDateFormat;

def today = new Date()
def format = new SimpleDateFormat();
format = new SimpleDateFormat("yyyyMMddkkmmssSSS");
def DateToStr = format.format(today);

log.info DateToStr
return DateToStr</script></con:config></con:testStep><con:testStep type="restrequest" name="createSession request" id="173ca5c4-b22d-46a6-a6cb-83b1be702a26"><con:settings/><con:config service="PaymentMiddleware" resourcePath="/payment-middleware-service/sessions" methodName="Sessions" xsi:type="con:RestRequestStep" xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance"><con:restRequest name="createSession request" id="ac10df94-13d9-4eb3-9c59-7dd8a7e807e1" mediaType="application/json" postQueryString="false"><con:settings><con:setting id="com.eviware.soapui.impl.wsdl.WsdlRequest@request-headers">&lt;xml-fragment/></con:setting></con:settings><con:endpoint>${#Project#ServiceEndpoint}</con:endpoint><con:request>{
   "agentId": "${agentId}",
   "orderNo": "${orderNo}",
   "products":    [
            {
         "description": "Adult one day part ticket for date 2016-09-15",
         "unitPrice": 100,
         "qty": 2,
         "type": "PARK_TICKET"
      },
            {
         "description": "Child one day part ticket for date 2016-09-15",
         "unitPrice": 75,
         "qty": 3,
         "type": "PARK_TICKET"
      }
   ],
   "orderAmount": "${orderAmount}",
   "orderSource": "${orderSource}",
   "currency": "${currency}",
   "notifyUrl": "${notifyUrl}",
   "returnUrl": "http://www.baidu.com"
}</con:request><con:originalUri>http://68.71.208.254/payment-middleware-service/sessions</con:originalUri><con:assertion type="JsonPath Match" id="6c934317-5f11-4bc6-9579-3f69cd4aa632" name="Match content of [orderAmount]"><con:configuration><path>$.sessionInfo.orderAmount</path><content>${DataSource#orderAmount}</content><allowWildcards>false</allowWildcards><ignoreNamspaceDifferences>false</ignoreNamspaceDifferences><ignoreComments>false</ignoreComments></con:configuration></con:assertion><con:assertion type="JsonPath Match" id="eb067ffb-fa50-4656-b144-0eeab7277d49" name="SessionInfo Match" disabled="true"><con:configuration><path>$.sessionInfo</path><content>{"sessionId":"*","orderNo":"*","orderSource":"*","orderAmount":"*","currency":"*","state":"UNPAID","remark":null,"agentId":"*","guestMobile":null,"guestEmail":null,"guestSwid":null,"createdDate":"*","expirationDate":"*","lastModifiedDate":"*","notifyUrl":"*","returnUrl":null}</content><allowWildcards>true</allowWildcards><ignoreNamspaceDifferences>false</ignoreNamspaceDifferences><ignoreComments>false</ignoreComments></con:configuration></con:assertion><con:assertion type="GroovyScriptAssertion" id="db316a27-8530-4f3b-bf13-235a8c500876" name="createdDate,expirationDate,lastModifiedDate Assertion" disabled="true"><con:configuration><scriptText>import org.joda.time.*;
import org.joda.time.format.*;

DateTimeFormatter parser = ISODateTimeFormat.dateTime();

def createdDate = parser.parseDateTime(context.expand( '${createSession request#Response#$.sessionInfo.createdDate}' ))
def expirationDate = parser.parseDateTime(context.expand( '${createSession request#Response#$.sessionInfo.expirationDate}' ))
def lastModifiedDate = parser.parseDateTime(context.expand( '${createSession request#Response#$.sessionInfo.lastModifiedDate}' ))


assert createdDate != null
assert expirationDate != null
assert lastModifiedDate != null
assert lastModifiedDate == createdDate
assert Minutes.minutesBetween(createdDate, expirationDate).getMinutes() % 60 == 29</scriptText></con:configuration></con:assertion><con:assertion type="JsonPath Match" id="ce8eb01a-26fb-4e06-a9b1-e6f6a0b897ba" name="Match content of [links]"><con:configuration><path>$.links</path><content>{"cancelSession":{"rel":"related","href":"*://*/payment-middleware-service/session/*","type":"text/plain"},"getSession":{"rel":"related","href":"*://*/payment-middleware-service/session/*","type":"application/json"},"createTransaction":{"rel":"related","href":"*://*/payment-middleware-service/session/*/transactions","type":"application/json"}}</content><allowWildcards>true</allowWildcards><ignoreNamspaceDifferences>false</ignoreNamspaceDifferences><ignoreComments>false</ignoreComments></con:configuration></con:assertion><con:credentials><con:username xsi:nil="true"/><con:password xsi:nil="true"/><con:domain xsi:nil="true"/><con:selectedAuthProfile>No Authorization</con:selectedAuthProfile><con:authType>No Authorization</con:authType></con:credentials><con:jmsConfig JMSDeliveryMode="PERSISTENT"/><con:jmsPropertyConfig/><con:parameters>
  <con:entry key="orderSource" value="${DataSource#orderSource}"/>
  <con:entry key="agentId" value="${DataSource#agentId}"/>
  <con:entry key="orderNo" value="${generate orderNo#result}"/>
  <con:entry key="orderAmount" value="${DataSource#orderAmount}"/>
  <con:entry key="guestMobile" value="${DataSource#guestMobile}"/>
  <con:entry key="notifyUrl" value="${DataSource#notifyUrl}"/>
  <con:entry key="currency" value="${DataSource#currency}"/>
  <con:entry key="guestEmail" value="${DataSource#guestEmail}"/>
</con:parameters><con:parameterOrder><con:entry>agentId</con:entry><con:entry>guestEmail</con:entry><con:entry>guestMobile</con:entry><con:entry>orderNo</con:entry><con:entry>orderAmount</con:entry><con:entry>orderSource</con:entry><con:entry>currency</con:entry><con:entry>payTtl</con:entry><con:entry>notifyUrl</con:entry><con:entry>guestSwid</con:entry><con:entry>returnUrl</con:entry></con:parameterOrder></con:restRequest></con:config></con:testStep><con:testStep type="restrequest" name="createTransaction" id="25713ad0-1736-46d4-ab2d-aeb5bba30054"><con:settings/><con:config service="PaymentMiddleware" resourcePath="/payment-middleware-service/session/{sessionId}/transactions" methodName="Method 1" xsi:type="con:RestRequestStep" xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance"><con:restRequest name="createTransaction" id="2e9068e2-c308-4c81-90f3-30ec3896b43c" mediaType="application/json" postQueryString="false"><con:settings><con:setting id="com.eviware.soapui.impl.wsdl.WsdlRequest@request-headers">&lt;xml-fragment/></con:setting></con:settings><con:endpoint>${#Project#ServiceEndpoint}</con:endpoint><con:request>{
    "payChannel" : "${payChannel}",
    "payOption" : "${payOption}",
    "region" : "${region}"
}</con:request><con:originalUri>http://68.71.208.254/payment-middleware-service/session//transactions</con:originalUri><con:assertion type="JsonPath Match" id="5359c8c4-b42b-4644-a878-ce592e97c7cb" name="Match content of [href]"><con:configuration><path>$.href</path><content>https://*</content><allowWildcards>true</allowWildcards><ignoreNamspaceDifferences>false</ignoreNamspaceDifferences><ignoreComments>false</ignoreComments></con:configuration></con:assertion><con:assertion type="JsonPath Match" id="19a9b6f6-3166-447f-a235-a8f896906836" name="Match content of [method]"><con:configuration><path>$.method</path><content>POST</content><allowWildcards>false</allowWildcards><ignoreNamspaceDifferences>false</ignoreNamspaceDifferences><ignoreComments>false</ignoreComments></con:configuration></con:assertion><con:assertion type="JsonPath Existence Match" id="2d1a9429-c5fe-4709-a1d0-908dd305cd4d" name="Check for existence of [params]"><con:configuration><path>$.params</path><content>true</content><allowWildcards>false</allowWildcards><ignoreNamspaceDifferences>false</ignoreNamspaceDifferences><ignoreComments>false</ignoreComments></con:configuration></con:assertion><con:credentials><con:username xsi:nil="true"/><con:password xsi:nil="true"/><con:domain xsi:nil="true"/><con:selectedAuthProfile>No Authorization</con:selectedAuthProfile><con:authType>No Authorization</con:authType></con:credentials><con:jmsConfig JMSDeliveryMode="PERSISTENT"/><con:parameters>
  <con:entry key="payOption" value="${DataSource#payOption}"/>
  <con:entry key="payChannel" value="${DataSource#payChannel}"/>
  <con:entry key="sessionId" value="${createSession request#Response#$.sessionInfo.sessionId}"/>
  <con:entry key="Accept-Language" value="${DataSource#language}"/>
  <con:entry key="region" value="${DataSource#region}"/>
</con:parameters><con:parameterOrder><con:entry>sessionId</con:entry><con:entry>Accept-Language</con:entry><con:entry>payChannel</con:entry><con:entry>payOption</con:entry><con:entry>bankName</con:entry><con:entry>region</con:entry><con:entry>X-CIP</con:entry></con:parameterOrder></con:restRequest></con:config></con:testStep><con:properties/><con:reportParameters/><con:breakPoints><con:testStepId>b9a1c3e9-680b-489d-8fad-870ac0a0df1d</con:testStepId><con:status>NONE</con:status><con:properties/></con:breakPoints></con:testCase><con:properties/><con:reportParameters/></con:testSuite><con:testSuite id="0b47880b-4700-48a1-917a-c33c74654e66" name="CreateTransaction"><con:settings/><con:runType>SEQUENTIAL</con:runType><con:testCase id="888fab13-84e4-4e15-a702-e3150265af66" failOnError="true" failTestCaseOnErrors="true" keepSession="false" maxResults="0" name="T01 CreateTransaction positive Alipay" searchProperties="true"><con:settings/><con:testStep type="datasource" name="DataSource" id="b9a1c3e9-680b-489d-8fad-870ac0a0df1d"><con:settings/><con:config xsi:type="con:DataSourceStep" xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance"><con:dataSource type="Grid"><con:configuration><check><![CDATA[<xml-fragment><con:entry xmlns:con="http://eviware.com/soapui/config">true</con:entry><con:entry xmlns:con="http://eviware.com/soapui/config">false</con:entry></xml-fragment>]]></check><row><![CDATA[<xml-fragment><con:entry xmlns:con="http://eviware.com/soapui/config">3452344444332</con:entry><con:entry xmlns:con="http://eviware.com/soapui/config"/><con:entry xmlns:con="http://eviware.com/soapui/config"/><con:entry xmlns:con="http://eviware.com/soapui/config"/><con:entry xmlns:con="http://eviware.com/soapui/config">0.01</con:entry><con:entry xmlns:con="http://eviware.com/soapui/config">TICKETING</con:entry><con:entry xmlns:con="http://eviware.com/soapui/config">CNY</con:entry><con:entry xmlns:con="http://eviware.com/soapui/config">zh-cn</con:entry><con:entry xmlns:con="http://eviware.com/soapui/config">PC_WEB</con:entry><con:entry xmlns:con="http://eviware.com/soapui/config">ALIPAY</con:entry><con:entry xmlns:con="http://eviware.com/soapui/config">cn</con:entry><con:entry xmlns:con="http://eviware.com/soapui/config">http://10.131.245.229:8080/payment-middleware-psp-alipay-simulator/gateway</con:entry></xml-fragment>]]></row><row><![CDATA[<xml-fragment><con:entry xmlns:con="http://eviware.com/soapui/config">3452344444332</con:entry><con:entry xmlns:con="http://eviware.com/soapui/config"/><con:entry xmlns:con="http://eviware.com/soapui/config"/><con:entry xmlns:con="http://eviware.com/soapui/config"/><con:entry xmlns:con="http://eviware.com/soapui/config">0.02</con:entry><con:entry xmlns:con="http://eviware.com/soapui/config">LODGING</con:entry><con:entry xmlns:con="http://eviware.com/soapui/config">CNY</con:entry><con:entry xmlns:con="http://eviware.com/soapui/config">en</con:entry><con:entry xmlns:con="http://eviware.com/soapui/config">MOBILE_WEB</con:entry><con:entry xmlns:con="http://eviware.com/soapui/config">ALIPAY</con:entry><con:entry xmlns:con="http://eviware.com/soapui/config">cn</con:entry><con:entry xmlns:con="http://eviware.com/soapui/config">http://10.131.245.229:8080/payment-middleware-psp-alipay-simulator/gateway</con:entry></xml-fragment>]]></row></con:configuration></con:dataSource><con:property>agentId</con:property><con:property>guestEmail</con:property><con:property>guestMobile</con:property><con:property>orderNo</con:property><con:property>orderAmount</con:property><con:property>orderSource</con:property><con:property>currency</con:property><con:property>language</con:property><con:property>payChannel</con:property><con:property>payOption</con:property><con:property>region</con:property><con:property>notifyUrl</con:property><con:restartOnRun>true</con:restartOnRun></con:config></con:testStep><con:testStep type="groovy" name="generate orderNo" id="d52ce27e-410a-4597-aa44-819072c4e563"><con:settings/><con:config><script>import java.text.SimpleDateFormat;

def today = new Date()
def format = new SimpleDateFormat();
format = new SimpleDateFormat("yyyyMMddkkmmssSSS");
def DateToStr = format.format(today);

log.info DateToStr
return DateToStr</script></con:config></con:testStep><con:testStep type="restrequest" name="createSession request" id="3fd3e6e8-9ac4-4613-829f-e3c72fea60bd"><con:settings/><con:config service="PaymentMiddleware" resourcePath="/payment-middleware-service/sessions" methodName="Sessions" xsi:type="con:RestRequestStep" xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance"><con:restRequest name="createSession request" id="ac10df94-13d9-4eb3-9c59-7dd8a7e807e1" mediaType="application/json" postQueryString="false"><con:settings><con:setting id="com.eviware.soapui.impl.wsdl.WsdlRequest@request-headers">&lt;xml-fragment/></con:setting></con:settings><con:endpoint>${#Project#ServiceEndpoint}</con:endpoint><con:request>{
    "agentId" : "${agentId}",
    "orderNo" : "${orderNo}",
    "products":[    
        {"description" : "Adult one day part ticket for date 2016-09-15","unitPrice" : 100.00,"qty" : 2, "type" : "PARK_TICKET"},
        {"description" : "Child one day part ticket for date 2016-09-15","unitPrice" : 75.00,"qty" : 3, "type" : "PARK_TICKET"}
    ],
    "orderAmount" : "${orderAmount}",
    "orderSource" : "${orderSource}",
    "currency" : "${currency}",
    "notifyUrl" : "${notifyUrl}"
}</con:request><con:originalUri>http://68.71.208.254/payment-middleware-service/sessions</con:originalUri><con:assertion type="JsonPath Match" id="eb067ffb-fa50-4656-b144-0eeab7277d49" name="SessionInfo Match"><con:configuration><path>$.sessionInfo</path><content>{"sessionId":"*","orderNo":"*","orderSource":"*","orderAmount":"*","currency":"*","state":"UNPAID","remark":null,"agentId":"*","guestMobile":null,"guestEmail":null,"guestSwid":null,"createdDate":"*","payTtl":*,"lastModifiedDate":"*","notifyUrl":"*","returnUrl":null}</content><allowWildcards>true</allowWildcards><ignoreNamspaceDifferences>false</ignoreNamspaceDifferences><ignoreComments>false</ignoreComments></con:configuration></con:assertion><con:credentials><con:username xsi:nil="true"/><con:password xsi:nil="true"/><con:domain xsi:nil="true"/><con:selectedAuthProfile>No Authorization</con:selectedAuthProfile><con:authType>No Authorization</con:authType></con:credentials><con:jmsConfig JMSDeliveryMode="PERSISTENT"/><con:jmsPropertyConfig/><con:parameters>
  <con:entry key="orderSource" value="${DataSource#orderSource}"/>
  <con:entry key="agentId" value="${DataSource#agentId}"/>
  <con:entry key="orderNo" value="${generate orderNo#result}"/>
  <con:entry key="orderAmount" value="${DataSource#orderAmount}"/>
  <con:entry key="guestMobile" value="${DataSource#guestMobile}"/>
  <con:entry key="notifyUrl" value="${DataSource#notifyUrl}"/>
  <con:entry key="currency" value="${DataSource#currency}"/>
  <con:entry key="guestEmail" value="${DataSource#guestEmail}"/>
</con:parameters><con:parameterOrder><con:entry>agentId</con:entry><con:entry>guestEmail</con:entry><con:entry>guestMobile</con:entry><con:entry>orderNo</con:entry><con:entry>orderAmount</con:entry><con:entry>orderSource</con:entry><con:entry>currency</con:entry><con:entry>payTtl</con:entry><con:entry>notifyUrl</con:entry><con:entry>guestSwid</con:entry><con:entry>returnUrl</con:entry></con:parameterOrder></con:restRequest></con:config></con:testStep><con:testStep type="restrequest" name="createTransaction" id="7d3fb384-83b1-42d6-a287-b091523e15ca"><con:settings/><con:config service="PaymentMiddleware" resourcePath="/payment-middleware-service/session/{sessionId}/transactions" methodName="Method 1" xsi:type="con:RestRequestStep" xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance"><con:restRequest name="createTransaction" id="2e9068e2-c308-4c81-90f3-30ec3896b43c" mediaType="application/json" postQueryString="false"><con:settings><con:setting id="com.eviware.soapui.impl.wsdl.WsdlRequest@request-headers">&lt;xml-fragment/></con:setting></con:settings><con:endpoint>${#Project#ServiceEndpoint}</con:endpoint><con:request>{
   "payChannel": "${payChannel}",
   "payOption": "${payOption}",
   "region": "${region}"
}</con:request><con:originalUri>http://68.71.208.254/payment-middleware-service/session//transactions</con:originalUri><con:assertion type="JsonPath Match" id="5359c8c4-b42b-4644-a878-ce592e97c7cb" name="Match content of [href]"><con:configuration><path>$.href</path><content>https://*</content><allowWildcards>true</allowWildcards><ignoreNamspaceDifferences>false</ignoreNamspaceDifferences><ignoreComments>false</ignoreComments></con:configuration></con:assertion><con:assertion type="JsonPath Match" id="19a9b6f6-3166-447f-a235-a8f896906836" name="Match content of [method]"><con:configuration><path>$.method</path><content>POST</content><allowWildcards>false</allowWildcards><ignoreNamspaceDifferences>false</ignoreNamspaceDifferences><ignoreComments>false</ignoreComments></con:configuration></con:assertion><con:assertion type="JsonPath Existence Match" id="2d1a9429-c5fe-4709-a1d0-908dd305cd4d" name="Check for existence of [params]"><con:configuration><path>$.params</path><content>true</content><allowWildcards>false</allowWildcards><ignoreNamspaceDifferences>false</ignoreNamspaceDifferences><ignoreComments>false</ignoreComments></con:configuration></con:assertion><con:credentials><con:username xsi:nil="true"/><con:password xsi:nil="true"/><con:domain xsi:nil="true"/><con:selectedAuthProfile>No Authorization</con:selectedAuthProfile><con:authType>No Authorization</con:authType></con:credentials><con:jmsConfig JMSDeliveryMode="PERSISTENT"/><con:parameters>
  <con:entry key="payOption" value="${DataSource#payOption}"/>
  <con:entry key="payChannel" value="${DataSource#payChannel}"/>
  <con:entry key="sessionId" value="${createSession request#Response#$.sessionInfo.sessionId}"/>
  <con:entry key="Accept-Language" value="${DataSource#language}"/>
  <con:entry key="region" value="cn"/>
</con:parameters><con:parameterOrder><con:entry>sessionId</con:entry><con:entry>Accept-Language</con:entry><con:entry>payChannel</con:entry><con:entry>payOption</con:entry><con:entry>bankName</con:entry><con:entry>region</con:entry><con:entry>X-CIP</con:entry></con:parameterOrder></con:restRequest></con:config></con:testStep><con:testStep type="datasource" name="DataSource1" id="d751d004-0672-4c2b-9f20-6aea7ea10277"><con:settings/><con:config xsi:type="con:DataSourceStep" xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance"><con:dataSource type="JSON"><con:configuration><sourceStep>createTransaction</sourceStep><sourceProperty>Response</sourceProperty><rowPath>$.params</rowPath><columnPath>subject</columnPath><columnPath>seller_email</columnPath><columnPath>extra_common_param</columnPath><columnPath>sign</columnPath><columnPath>it_b_pay</columnPath><columnPath>notify_url</columnPath><columnPath>payment_type</columnPath><columnPath>out_trade_no</columnPath><columnPath>paymethod</columnPath><columnPath>partner</columnPath><columnPath>service</columnPath><columnPath>total_fee</columnPath><columnPath>sign_type</columnPath><columnPath>seller_id</columnPath></con:configuration></con:dataSource><con:property>subject</con:property><con:property>seller_email</con:property><con:property>extra_common_param</con:property><con:property>sign</con:property><con:property>it_b_pay</con:property><con:property>notify_url</con:property><con:property>payment_type</con:property><con:property>out_trade_no</con:property><con:property>paymethod</con:property><con:property>partner</con:property><con:property>service</con:property><con:property>total_fee</con:property><con:property>sign_type</con:property><con:property>seller_id</con:property><con:restartOnRun>true</con:restartOnRun></con:config></con:testStep><con:testStep type="httprequest" name="HTTP Request" id="3d515ed7-c11b-4c15-94fa-289b7837db96"><con:settings/><con:config method="GET" xsi:type="con:HttpRequest" id="77acbc88-d685-440c-890b-be6053a5d390" name="HTTP Request" postQueryString="false" mediaType="multipart/form-data" downloadIncludedResources="false" xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance"><con:settings><con:setting id="com.eviware.soapui.impl.wsdl.WsdlRequest@request-headers">&lt;entry key="Content-Type" value="application/x-www-form-urlencoded" xmlns="http://eviware.com/soapui/config"/></con:setting></con:settings><con:endpoint><![CDATA[https://mapi.alipay.com/gateway.do?_input_charset=utf-8&seller_email=${DataSource1#seller_email}&extra_common_param=${DataSource1#extra_common_param}&subject=${DataSource1#subject}&sign=${DataSource1#sign}&it_b_pay=${DataSource1#it_b_pay}&notify_url=${DataSource1#notify_url}&payment_type=${DataSource1#payment_type}&out_trade_no=${DataSource1#out_trade_no}&paymethod=${DataSource1#paymethod}&partner=${DataSource1#partner}&service=${DataSource1#service}&total_fee=${DataSource1#total_fee}&sign_type=${DataSource1#sign_type}&seller_id=${DataSource1#seller_id}]]></con:endpoint><con:request><![CDATA[seller_email=${DataSource1#seller_email}&extra_common_param=${DataSource1#extra_common_param}&subject=${DataSource1#subject}&sign=${DataSource1#sign}&it_b_pay=${DataSource1#it_b_pay}&notify_url=${DataSource1#notify_url}&payment_type=${DataSource1#payment_type}&out_trade_no=${DataSource1#out_trade_no}&paymethod=${DataSource1#paymethod}&partner=${DataSource1#partner}&service=${DataSource1#service}&total_fee=${DataSource1#total_fee}&sign_type=${DataSource1#sign_type}&seller_id=${DataSource1#seller_id}]]></con:request><con:assertion type="Valid HTTP Status Codes" id="4f039fa6-9fda-4e2c-a132-d561b2dfc375" name="Valid HTTP Status Codes"><con:settings/><con:configuration><codes>200</codes></con:configuration></con:assertion><con:credentials><con:selectedAuthProfile>No Authorization</con:selectedAuthProfile><con:authType>No Authorization</con:authType></con:credentials><con:attachment><con:name>global_v1158243981678990203.css</con:name><con:contentType>text/css</con:contentType><con:contentId>global_v1158243981678990203.css</con:contentId><con:url>/var/folders/2x/vnmm0wwx4dxcdjfb8pk5rjt8bqfpkh/T/global_v1158243981678990203.css</con:url><con:id>1fb23d91-9cdd-4510-a579-6374b63ea489</con:id></con:attachment><con:attachment><con:name>sys.tabs3271069107953481501.css</con:name><con:contentType>text/css</con:contentType><con:contentId>sys.tabs3271069107953481501.css</con:contentId><con:url>/var/folders/2x/vnmm0wwx4dxcdjfb8pk5rjt8bqfpkh/T/sys.tabs3271069107953481501.css</con:url><con:id>d746f8de-aacb-4aa4-b407-71c93773d79b</con:id></con:attachment><con:attachment><con:name>ot.old8819719577570650428.css</con:name><con:contentType>text/css</con:contentType><con:contentId>ot.old8819719577570650428.css</con:contentId><con:url>/var/folders/2x/vnmm0wwx4dxcdjfb8pk5rjt8bqfpkh/T/ot.old8819719577570650428.css</con:url><con:id>1a42c6a1-ad9e-4f4e-8d37-456302fae6a1</con:id></con:attachment><con:attachment><con:name>as.kt571519315013593162.css</con:name><con:contentType>text/css</con:contentType><con:contentId>as.kt571519315013593162.css</con:contentId><con:url>/var/folders/2x/vnmm0wwx4dxcdjfb8pk5rjt8bqfpkh/T/as.kt571519315013593162.css</con:url><con:id>400ef81d-cc7d-428a-b6ae-5890d9a18d5b</con:id></con:attachment><con:attachment><con:name>sjf2140417369443642286.gif</con:name><con:contentType>image/gif</con:contentType><con:contentId>sjf2140417369443642286.gif</con:contentId><con:url>/var/folders/2x/vnmm0wwx4dxcdjfb8pk5rjt8bqfpkh/T/sjf2140417369443642286.gif</con:url><con:id>0c048efa-2a10-470c-8102-f8606e095b15</con:id></con:attachment><con:jmsConfig JMSDeliveryMode="PERSISTENT"/><con:parameters/></con:config></con:testStep><con:testStep type="datasourceloop" name="DataSource Loop" id="9f9bfb7c-2464-4636-92f2-6a577b164859"><con:settings/><con:config><dataSourceStep>DataSource</dataSourceStep><targetStep>generate orderNo</targetStep></con:config></con:testStep><con:properties/><con:reportParameters/><con:breakPoints><con:testStepId>b9a1c3e9-680b-489d-8fad-870ac0a0df1d</con:testStepId><con:status>NONE</con:status><con:properties/></con:breakPoints><con:breakPoints><con:testStepId>3d515ed7-c11b-4c15-94fa-289b7837db96</con:testStepId><con:status>NONE</con:status><con:properties/></con:breakPoints><con:breakPoints><con:testStepId>d751d004-0672-4c2b-9f20-6aea7ea10277</con:testStepId><con:status>NONE</con:status><con:properties/></con:breakPoints></con:testCase><con:testCase id="6cfbc9dd-1cf8-418d-961e-04d65c5819ef" failOnError="true" failTestCaseOnErrors="true" keepSession="false" maxResults="0" name="T02 CreateTransaction positive PayEco" searchProperties="true"><con:settings/><con:testStep type="datasource" name="DataSource" id="db8e8d21-2d0d-4481-b2f3-a664ff045ae7"><con:settings/><con:config xsi:type="con:DataSourceStep" xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance"><con:dataSource type="Grid"><con:configuration><check><![CDATA[<xml-fragment><con:entry xmlns:con="http://eviware.com/soapui/config">true</con:entry><con:entry xmlns:con="http://eviware.com/soapui/config">false</con:entry><con:entry xmlns:con="http://eviware.com/soapui/config">false</con:entry><con:entry xmlns:con="http://eviware.com/soapui/config">false</con:entry><con:entry xmlns:con="http://eviware.com/soapui/config">false</con:entry></xml-fragment>]]></check><row><![CDATA[<xml-fragment><con:entry xmlns:con="http://eviware.com/soapui/config">3452344444332</con:entry><con:entry xmlns:con="http://eviware.com/soapui/config"/><con:entry xmlns:con="http://eviware.com/soapui/config"/><con:entry xmlns:con="http://eviware.com/soapui/config"/><con:entry xmlns:con="http://eviware.com/soapui/config">0.02</con:entry><con:entry xmlns:con="http://eviware.com/soapui/config">LODGING</con:entry><con:entry xmlns:con="http://eviware.com/soapui/config">CNY</con:entry><con:entry xmlns:con="http://eviware.com/soapui/config">zh-cn</con:entry><con:entry xmlns:con="http://eviware.com/soapui/config">PC_WEB</con:entry><con:entry xmlns:con="http://eviware.com/soapui/config">CALLBACK</con:entry><con:entry xmlns:con="http://eviware.com/soapui/config">cn</con:entry><con:entry xmlns:con="http://eviware.com/soapui/config">http://10.131.245.229:8080/payment-middleware-psp-alipay-simulator/gateway?format=json</con:entry></xml-fragment>]]></row><row><![CDATA[<xml-fragment><con:entry xmlns:con="http://eviware.com/soapui/config">3452344444332</con:entry><con:entry xmlns:con="http://eviware.com/soapui/config"/><con:entry xmlns:con="http://eviware.com/soapui/config"/><con:entry xmlns:con="http://eviware.com/soapui/config"/><con:entry xmlns:con="http://eviware.com/soapui/config">0.03</con:entry><con:entry xmlns:con="http://eviware.com/soapui/config">TICKETING</con:entry><con:entry xmlns:con="http://eviware.com/soapui/config">CNY</con:entry><con:entry xmlns:con="http://eviware.com/soapui/config">zh-cn</con:entry><con:entry xmlns:con="http://eviware.com/soapui/config">PC_WEB</con:entry><con:entry xmlns:con="http://eviware.com/soapui/config">INTERNATIONAL_CARD</con:entry><con:entry xmlns:con="http://eviware.com/soapui/config">cn</con:entry><con:entry xmlns:con="http://eviware.com/soapui/config">http://10.131.245.229:8080/payment-middleware-psp-alipay-simulator/gateway?format=json</con:entry></xml-fragment>]]></row><row><![CDATA[<xml-fragment><con:entry xmlns:con="http://eviware.com/soapui/config">3452344444332</con:entry><con:entry xmlns:con="http://eviware.com/soapui/config"/><con:entry xmlns:con="http://eviware.com/soapui/config"/><con:entry xmlns:con="http://eviware.com/soapui/config"/><con:entry xmlns:con="http://eviware.com/soapui/config">0.04</con:entry><con:entry xmlns:con="http://eviware.com/soapui/config">LODGING</con:entry><con:entry xmlns:con="http://eviware.com/soapui/config">CNY</con:entry><con:entry xmlns:con="http://eviware.com/soapui/config">zh-cn</con:entry><con:entry xmlns:con="http://eviware.com/soapui/config">PC_WEB</con:entry><con:entry xmlns:con="http://eviware.com/soapui/config">DOMESTIC_CARD</con:entry><con:entry xmlns:con="http://eviware.com/soapui/config">cn</con:entry><con:entry xmlns:con="http://eviware.com/soapui/config">http://10.131.245.229:8080/payment-middleware-psp-alipay-simulator/gateway?format=json</con:entry></xml-fragment>]]></row><row><![CDATA[<xml-fragment><con:entry xmlns:con="http://eviware.com/soapui/config">3452344444332</con:entry><con:entry xmlns:con="http://eviware.com/soapui/config"/><con:entry xmlns:con="http://eviware.com/soapui/config"/><con:entry xmlns:con="http://eviware.com/soapui/config"/><con:entry xmlns:con="http://eviware.com/soapui/config">0.05</con:entry><con:entry xmlns:con="http://eviware.com/soapui/config">LODGING</con:entry><con:entry xmlns:con="http://eviware.com/soapui/config">CNY</con:entry><con:entry xmlns:con="http://eviware.com/soapui/config">en</con:entry><con:entry xmlns:con="http://eviware.com/soapui/config">PC_WEB</con:entry><con:entry xmlns:con="http://eviware.com/soapui/config">CALLBACK</con:entry><con:entry xmlns:con="http://eviware.com/soapui/config">cn</con:entry><con:entry xmlns:con="http://eviware.com/soapui/config">http://10.131.245.229:8080/payment-middleware-psp-alipay-simulator/gateway?format=json</con:entry><con:entry xmlns:con="http://eviware.com/soapui/config"/></xml-fragment>]]></row><row><![CDATA[<xml-fragment><con:entry xmlns:con="http://eviware.com/soapui/config">3452344444332</con:entry><con:entry xmlns:con="http://eviware.com/soapui/config"/><con:entry xmlns:con="http://eviware.com/soapui/config"/><con:entry xmlns:con="http://eviware.com/soapui/config"/><con:entry xmlns:con="http://eviware.com/soapui/config">0.06</con:entry><con:entry xmlns:con="http://eviware.com/soapui/config">TICKETING</con:entry><con:entry xmlns:con="http://eviware.com/soapui/config">CNY</con:entry><con:entry xmlns:con="http://eviware.com/soapui/config">en</con:entry><con:entry xmlns:con="http://eviware.com/soapui/config">PC_WEB</con:entry><con:entry xmlns:con="http://eviware.com/soapui/config">DOMESTIC_CARD</con:entry><con:entry xmlns:con="http://eviware.com/soapui/config">cn</con:entry><con:entry xmlns:con="http://eviware.com/soapui/config">http://10.131.245.229:8080/payment-middleware-psp-alipay-simulator/gateway?format=json</con:entry><con:entry xmlns:con="http://eviware.com/soapui/config"/></xml-fragment>]]></row></con:configuration></con:dataSource><con:property>agentId</con:property><con:property>guestEmail</con:property><con:property>guestMobile</con:property><con:property>orderNo</con:property><con:property>orderAmount</con:property><con:property>orderSource</con:property><con:property>currency</con:property><con:property>language</con:property><con:property>payChannel</con:property><con:property>payOption</con:property><con:property>region</con:property><con:property>notifyUrl</con:property><con:restartOnRun>true</con:restartOnRun></con:config></con:testStep><con:testStep type="groovy" name="generate orderNo" id="01db1fbd-58ea-44f4-8f7a-19c655b8c1b7"><con:settings/><con:config><script>import java.text.SimpleDateFormat;

def today = new Date()
def format = new SimpleDateFormat();
format = new SimpleDateFormat("yyyyMMddkkmmssSSS");
def DateToStr = format.format(today);

log.info DateToStr
return DateToStr</script></con:config></con:testStep><con:testStep type="restrequest" name="createSession request" id="f789eec2-c830-4627-89f7-395ca35d3df1"><con:settings/><con:config service="PaymentMiddleware" resourcePath="/payment-middleware-service/sessions" methodName="Sessions" xsi:type="con:RestRequestStep" xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance"><con:restRequest name="createSession request" id="ac10df94-13d9-4eb3-9c59-7dd8a7e807e1" mediaType="application/json" postQueryString="false"><con:settings><con:setting id="com.eviware.soapui.impl.wsdl.WsdlRequest@request-headers">&lt;xml-fragment/></con:setting></con:settings><con:endpoint>${#Project#ServiceEndpoint}</con:endpoint><con:request>{
    "agentId" : "${agentId}",
    "orderNo" : "${orderNo}",
    "products":[    
        {"description" : "Adult one day part ticket for date 2016-09-15","unitPrice" : 100.00,"qty" : 2, "type" : "PARK_TICKET"},
        {"description" : "Child one day part ticket for date 2016-09-15","unitPrice" : 75.00,"qty" : 3, "type" : "PARK_TICKET"}
    ],
    "orderAmount" : "${orderAmount}",
    "orderSource" : "${orderSource}",
    "currency" : "${currency}",
    "notifyUrl" : "${notifyUrl}"
}</con:request><con:originalUri>http://68.71.208.254/payment-middleware-service/sessions</con:originalUri><con:assertion type="JsonPath Match" id="eb067ffb-fa50-4656-b144-0eeab7277d49" name="SessionInfo Match"><con:configuration><path>$.sessionInfo</path><content>{"sessionId":"*","orderNo":"*","orderSource":"*","orderAmount":"*","currency":"*","state":"UNPAID","remark":null,"agentId":"*","guestMobile":null,"guestEmail":null,"guestSwid":null,"createdDate":"*","payTtl":*,"lastModifiedDate":"*","notifyUrl":"*","returnUrl":null}</content><allowWildcards>true</allowWildcards><ignoreNamspaceDifferences>false</ignoreNamspaceDifferences><ignoreComments>false</ignoreComments></con:configuration></con:assertion><con:credentials><con:username xsi:nil="true"/><con:password xsi:nil="true"/><con:domain xsi:nil="true"/><con:selectedAuthProfile>No Authorization</con:selectedAuthProfile><con:authType>No Authorization</con:authType></con:credentials><con:jmsConfig JMSDeliveryMode="PERSISTENT"/><con:jmsPropertyConfig/><con:parameters>
  <con:entry key="orderSource" value="${DataSource#orderSource}"/>
  <con:entry key="agentId" value="${DataSource#agentId}"/>
  <con:entry key="orderNo" value="${generate orderNo#result}"/>
  <con:entry key="orderAmount" value="${DataSource#orderAmount}"/>
  <con:entry key="guestMobile" value="${DataSource#guestMobile}"/>
  <con:entry key="notifyUrl" value="${DataSource#notifyUrl}"/>
  <con:entry key="currency" value="${DataSource#currency}"/>
  <con:entry key="guestEmail" value="${DataSource#guestEmail}"/>
</con:parameters><con:parameterOrder><con:entry>agentId</con:entry><con:entry>guestEmail</con:entry><con:entry>guestMobile</con:entry><con:entry>orderNo</con:entry><con:entry>orderAmount</con:entry><con:entry>orderSource</con:entry><con:entry>currency</con:entry><con:entry>payTtl</con:entry><con:entry>notifyUrl</con:entry><con:entry>guestSwid</con:entry><con:entry>returnUrl</con:entry></con:parameterOrder></con:restRequest></con:config></con:testStep><con:testStep type="restrequest" name="createTransaction" id="38f84020-6670-401d-97be-b4fe52f51d2b"><con:settings/><con:config service="PaymentMiddleware" resourcePath="/payment-middleware-service/session/{sessionId}/transactions" methodName="Method 1" xsi:type="con:RestRequestStep" xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance"><con:restRequest name="createTransaction" id="2e9068e2-c308-4c81-90f3-30ec3896b43c" mediaType="application/json" postQueryString="false"><con:settings><con:setting id="com.eviware.soapui.impl.wsdl.WsdlRequest@request-headers">&lt;xml-fragment/></con:setting></con:settings><con:endpoint>${#Project#ServiceEndpoint}</con:endpoint><con:request>{
   "payChannel": "${payChannel}",
   "payOption": "${payOption}",
   "region": "${region}"
}</con:request><con:originalUri>http://68.71.208.254/payment-middleware-service/session//transactions</con:originalUri><con:assertion type="JsonPath Match" id="5359c8c4-b42b-4644-a878-ce592e97c7cb" name="Match content of [href]"><con:configuration><path>$.href</path><content>https://*</content><allowWildcards>true</allowWildcards><ignoreNamspaceDifferences>false</ignoreNamspaceDifferences><ignoreComments>false</ignoreComments></con:configuration></con:assertion><con:assertion type="JsonPath Match" id="19a9b6f6-3166-447f-a235-a8f896906836" name="Match content of [method]"><con:configuration><path>$.method</path><content>POST</content><allowWildcards>false</allowWildcards><ignoreNamspaceDifferences>false</ignoreNamspaceDifferences><ignoreComments>false</ignoreComments></con:configuration></con:assertion><con:assertion type="JsonPath Existence Match" id="2d1a9429-c5fe-4709-a1d0-908dd305cd4d" name="Check for existence of [params]"><con:configuration><path>$.params</path><content>true</content><allowWildcards>false</allowWildcards><ignoreNamspaceDifferences>false</ignoreNamspaceDifferences><ignoreComments>false</ignoreComments></con:configuration></con:assertion><con:credentials><con:username xsi:nil="true"/><con:password xsi:nil="true"/><con:domain xsi:nil="true"/><con:selectedAuthProfile>No Authorization</con:selectedAuthProfile><con:authType>No Authorization</con:authType></con:credentials><con:jmsConfig JMSDeliveryMode="PERSISTENT"/><con:parameters>
  <con:entry key="payOption" value="${DataSource#payOption}"/>
  <con:entry key="payChannel" value="${DataSource#payChannel}"/>
  <con:entry key="sessionId" value="${createSession request#Response#$.sessionInfo.sessionId}"/>
  <con:entry key="Accept-Language" value="${DataSource#language}"/>
  <con:entry key="region" value="cn"/>
</con:parameters><con:parameterOrder><con:entry>sessionId</con:entry><con:entry>Accept-Language</con:entry><con:entry>payChannel</con:entry><con:entry>payOption</con:entry><con:entry>bankName</con:entry><con:entry>region</con:entry><con:entry>X-CIP</con:entry></con:parameterOrder></con:restRequest></con:config></con:testStep><con:testStep type="groovy" name="get the string" id="1494e628-e00e-40bc-9f81-2fcfddfeccba"><con:settings/><con:config><script>def response = context.expand( '${createTransaction#Response#$.params}' )
log.info response
response = response[2..-6]
log.info response
return response</script></con:config></con:testStep><con:testStep type="httprequest" name="HTTP Request" id="533e5019-8aeb-44fa-b2e9-e0bad86a8f9f"><con:settings/><con:config method="POST" xsi:type="con:HttpRequest" id="77acbc88-d685-440c-890b-be6053a5d390" name="HTTP Request" postQueryString="true" mediaType="multipart/form-data" downloadIncludedResources="true" xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance"><con:settings><con:setting id="com.eviware.soapui.impl.wsdl.WsdlRequest@request-headers">&lt;xml-fragment/></con:setting></con:settings><con:endpoint>https://testdisney.payeco.com:8443/services/ApiV2ServerRSA</con:endpoint><con:request/><con:assertion type="Valid HTTP Status Codes" id="a3780ff2-4f43-4606-acd4-c72ecb9a8787" name="Valid HTTP Status Codes"><con:settings/><con:configuration><codes>200</codes></con:configuration></con:assertion><con:credentials><con:selectedAuthProfile>No Authorization</con:selectedAuthProfile><con:authType>No Authorization</con:authType></con:credentials><con:jmsConfig JMSDeliveryMode="PERSISTENT"/><con:parameters><con:parameter><con:name>name</con:name><con:value>${get the string#result}</con:value><con:style>QUERY</con:style><con:default>111</con:default><con:path xsi:nil="true"/><con:description xsi:nil="true"/></con:parameter></con:parameters></con:config></con:testStep><con:testStep type="datasourceloop" name="DataSource Loop" id="aacc453d-04de-4122-b276-7f03e788c71d"><con:settings/><con:config><dataSourceStep>DataSource</dataSourceStep><targetStep>generate orderNo</targetStep></con:config></con:testStep><con:properties/><con:reportParameters/><con:breakPoints><con:testStepId>b9a1c3e9-680b-489d-8fad-870ac0a0df1d</con:testStepId><con:status>NONE</con:status><con:properties/></con:breakPoints><con:breakPoints><con:testStepId>3d515ed7-c11b-4c15-94fa-289b7837db96</con:testStepId><con:status>NONE</con:status><con:properties/></con:breakPoints><con:breakPoints><con:testStepId>1494e628-e00e-40bc-9f81-2fcfddfeccba</con:testStepId><con:status>NONE</con:status><con:properties/></con:breakPoints></con:testCase><con:testCase id="a82d9d2c-bdf4-4f69-a9ce-4222c41255ac" failOnError="true" failTestCaseOnErrors="true" keepSession="false" maxResults="0" name="T03 bankName positive" searchProperties="true"><con:settings/><con:testStep type="datasource" name="DataSource" id="4f727054-9e05-4021-b601-9f4912edfc9f"><con:settings/><con:config xsi:type="con:DataSourceStep" xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance"><con:dataSource type="Grid"><con:configuration><check><![CDATA[<xml-fragment><con:entry xmlns:con="http://eviware.com/soapui/config">false</con:entry><con:entry xmlns:con="http://eviware.com/soapui/config">true</con:entry><con:entry xmlns:con="http://eviware.com/soapui/config">false</con:entry><con:entry xmlns:con="http://eviware.com/soapui/config">false</con:entry><con:entry xmlns:con="http://eviware.com/soapui/config">false</con:entry><con:entry xmlns:con="http://eviware.com/soapui/config">false</con:entry></xml-fragment>]]></check><row><![CDATA[<xml-fragment><con:entry xmlns:con="http://eviware.com/soapui/config">3452344444332</con:entry><con:entry xmlns:con="http://eviware.com/soapui/config"/><con:entry xmlns:con="http://eviware.com/soapui/config"/><con:entry xmlns:con="http://eviware.com/soapui/config"/><con:entry xmlns:con="http://eviware.com/soapui/config">1000.01</con:entry><con:entry xmlns:con="http://eviware.com/soapui/config">TICKETING</con:entry><con:entry xmlns:con="http://eviware.com/soapui/config">CNY</con:entry><con:entry xmlns:con="http://eviware.com/soapui/config">zh-cn</con:entry><con:entry xmlns:con="http://eviware.com/soapui/config">PC_WEB</con:entry><con:entry xmlns:con="http://eviware.com/soapui/config">ALIPAY</con:entry><con:entry xmlns:con="http://eviware.com/soapui/config">SHDR_DOMESTIC_BANK_CMB</con:entry><con:entry xmlns:con="http://eviware.com/soapui/config">cn</con:entry></xml-fragment>]]></row><row><![CDATA[<xml-fragment><con:entry xmlns:con="http://eviware.com/soapui/config">3452344444332</con:entry><con:entry xmlns:con="http://eviware.com/soapui/config"/><con:entry xmlns:con="http://eviware.com/soapui/config"/><con:entry xmlns:con="http://eviware.com/soapui/config"/><con:entry xmlns:con="http://eviware.com/soapui/config">1000.02</con:entry><con:entry xmlns:con="http://eviware.com/soapui/config">TICKETING</con:entry><con:entry xmlns:con="http://eviware.com/soapui/config">CNY</con:entry><con:entry xmlns:con="http://eviware.com/soapui/config">zh-cn</con:entry><con:entry xmlns:con="http://eviware.com/soapui/config">PC_WEB</con:entry><con:entry xmlns:con="http://eviware.com/soapui/config">DOMESTIC_CARD</con:entry><con:entry xmlns:con="http://eviware.com/soapui/config">SHDR_DOMESTIC_BANK_CMB</con:entry><con:entry xmlns:con="http://eviware.com/soapui/config">cn</con:entry><con:entry xmlns:con="http://eviware.com/soapui/config"/></xml-fragment>]]></row><row><![CDATA[<xml-fragment><con:entry xmlns:con="http://eviware.com/soapui/config">3452344444332</con:entry><con:entry xmlns:con="http://eviware.com/soapui/config"/><con:entry xmlns:con="http://eviware.com/soapui/config"/><con:entry xmlns:con="http://eviware.com/soapui/config"/><con:entry xmlns:con="http://eviware.com/soapui/config">1000.03</con:entry><con:entry xmlns:con="http://eviware.com/soapui/config">TICKETING</con:entry><con:entry xmlns:con="http://eviware.com/soapui/config">CNY</con:entry><con:entry xmlns:con="http://eviware.com/soapui/config">zh-cn</con:entry><con:entry xmlns:con="http://eviware.com/soapui/config">PC_WEB</con:entry><con:entry xmlns:con="http://eviware.com/soapui/config">DOMESTIC_CARD</con:entry><con:entry xmlns:con="http://eviware.com/soapui/config"/><con:entry xmlns:con="http://eviware.com/soapui/config">cn</con:entry><con:entry xmlns:con="http://eviware.com/soapui/config"/></xml-fragment>]]></row><row><![CDATA[<xml-fragment><con:entry xmlns:con="http://eviware.com/soapui/config">3452344444332</con:entry><con:entry xmlns:con="http://eviware.com/soapui/config"/><con:entry xmlns:con="http://eviware.com/soapui/config"/><con:entry xmlns:con="http://eviware.com/soapui/config"/><con:entry xmlns:con="http://eviware.com/soapui/config">1000.04</con:entry><con:entry xmlns:con="http://eviware.com/soapui/config">TICKETING</con:entry><con:entry xmlns:con="http://eviware.com/soapui/config">CNY</con:entry><con:entry xmlns:con="http://eviware.com/soapui/config">zh-cn</con:entry><con:entry xmlns:con="http://eviware.com/soapui/config">PC_WEB</con:entry><con:entry xmlns:con="http://eviware.com/soapui/config">INTERNATIONAL_CARD</con:entry><con:entry xmlns:con="http://eviware.com/soapui/config"/><con:entry xmlns:con="http://eviware.com/soapui/config">cn</con:entry><con:entry xmlns:con="http://eviware.com/soapui/config"/></xml-fragment>]]></row><row><![CDATA[<xml-fragment><con:entry xmlns:con="http://eviware.com/soapui/config">3452344444332</con:entry><con:entry xmlns:con="http://eviware.com/soapui/config"/><con:entry xmlns:con="http://eviware.com/soapui/config"/><con:entry xmlns:con="http://eviware.com/soapui/config"/><con:entry xmlns:con="http://eviware.com/soapui/config">1000.05</con:entry><con:entry xmlns:con="http://eviware.com/soapui/config">TICKETING</con:entry><con:entry xmlns:con="http://eviware.com/soapui/config">CNY</con:entry><con:entry xmlns:con="http://eviware.com/soapui/config">zh-cn</con:entry><con:entry xmlns:con="http://eviware.com/soapui/config">PC_WEB</con:entry><con:entry xmlns:con="http://eviware.com/soapui/config">INTERNATIONAL_CARD</con:entry><con:entry xmlns:con="http://eviware.com/soapui/config"/><con:entry xmlns:con="http://eviware.com/soapui/config">cn</con:entry><con:entry xmlns:con="http://eviware.com/soapui/config"/></xml-fragment>]]></row><row><![CDATA[<xml-fragment><con:entry xmlns:con="http://eviware.com/soapui/config">3452344444332</con:entry><con:entry xmlns:con="http://eviware.com/soapui/config"/><con:entry xmlns:con="http://eviware.com/soapui/config"/><con:entry xmlns:con="http://eviware.com/soapui/config"/><con:entry xmlns:con="http://eviware.com/soapui/config">1000.06</con:entry><con:entry xmlns:con="http://eviware.com/soapui/config">TICKETING</con:entry><con:entry xmlns:con="http://eviware.com/soapui/config">CNY</con:entry><con:entry xmlns:con="http://eviware.com/soapui/config">zh-cn</con:entry><con:entry xmlns:con="http://eviware.com/soapui/config">PC_WEB</con:entry><con:entry xmlns:con="http://eviware.com/soapui/config">INTERNATIONAL_CARD</con:entry><con:entry xmlns:con="http://eviware.com/soapui/config"/><con:entry xmlns:con="http://eviware.com/soapui/config">cn</con:entry><con:entry xmlns:con="http://eviware.com/soapui/config"/></xml-fragment>]]></row></con:configuration></con:dataSource><con:property>agentId</con:property><con:property>guestEmail</con:property><con:property>guestMobile</con:property><con:property>orderNo</con:property><con:property>orderAmount</con:property><con:property>orderSource</con:property><con:property>currency</con:property><con:property>language</con:property><con:property>payChannel</con:property><con:property>payOption</con:property><con:property>bankName</con:property><con:property>region</con:property><con:restartOnRun>true</con:restartOnRun></con:config></con:testStep><con:testStep type="groovy" name="generate orderNo" id="f1953e64-8daa-4c23-8152-abcfe4100782"><con:settings/><con:config><script>import java.text.SimpleDateFormat;

def today = new Date()
def format = new SimpleDateFormat();
format = new SimpleDateFormat("yyyyMMddkkmmssSSS");
def DateToStr = format.format(today);

log.info DateToStr
return DateToStr</script></con:config></con:testStep><con:testStep type="restrequest" name="createSession request" id="8eeb7f36-e56b-4e10-b3ca-8380693e1592"><con:settings/><con:config service="PaymentMiddleware" resourcePath="/payment-middleware-service/sessions" methodName="Sessions" xsi:type="con:RestRequestStep" xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance"><con:restRequest name="createSession request" id="ac10df94-13d9-4eb3-9c59-7dd8a7e807e1" mediaType="application/json" postQueryString="false"><con:settings><con:setting id="com.eviware.soapui.impl.wsdl.WsdlRequest@request-headers">&lt;xml-fragment/></con:setting></con:settings><con:endpoint>${#Project#ServiceEndpoint}</con:endpoint><con:request>{
    "agentId" : "${agentId}",
    "orderNo" : "${orderNo}",
    "products":[    
        {"description" : "Adult one day part ticket for date 2016-09-15","unitPrice" : 100.00,"qty" : 2, "type" : "PARK_TICKET"},
        {"description" : "Child one day part ticket for date 2016-09-15","unitPrice" : 75.00,"qty" : 3, "type" : "PARK_TICKET"}
    ],
    "orderAmount" : "${orderAmount}",
    "orderSource" : "${orderSource}",
    "currency" : "${currency}"
}</con:request><con:originalUri>http://68.71.208.254/payment-middleware-service/sessions</con:originalUri><con:assertion type="JsonPath Match" id="6c934317-5f11-4bc6-9579-3f69cd4aa632" name="Match content of [orderAmount]"><con:configuration><path>$.sessionInfo.orderAmount</path><content>${DataSource#orderAmount}</content><allowWildcards>false</allowWildcards><ignoreNamspaceDifferences>false</ignoreNamspaceDifferences><ignoreComments>false</ignoreComments></con:configuration></con:assertion><con:assertion type="JsonPath Match" id="ce8eb01a-26fb-4e06-a9b1-e6f6a0b897ba" name="Match content of [links]"><con:configuration><path>$.links</path><content>{"cancelSession":{"rel":"related","href":"*://*/payment-middleware-service/session/*","type":"text/plain"},"getSession":{"rel":"related","href":"*://*/payment-middleware-service/session/*","type":"application/json"},"createTransaction":{"rel":"related","href":"*://*/payment-middleware-service/session/*/transactions","type":"application/json"}}</content><allowWildcards>true</allowWildcards><ignoreNamspaceDifferences>false</ignoreNamspaceDifferences><ignoreComments>false</ignoreComments></con:configuration></con:assertion><con:credentials><con:username xsi:nil="true"/><con:password xsi:nil="true"/><con:domain xsi:nil="true"/><con:selectedAuthProfile>No Authorization</con:selectedAuthProfile><con:authType>No Authorization</con:authType></con:credentials><con:jmsConfig JMSDeliveryMode="PERSISTENT"/><con:jmsPropertyConfig/><con:parameters>
  <con:entry key="orderSource" value="${DataSource#orderSource}"/>
  <con:entry key="agentId" value="${DataSource#agentId}"/>
  <con:entry key="orderNo" value="${generate orderNo#result}"/>
  <con:entry key="orderAmount" value="${DataSource#orderAmount}"/>
  <con:entry key="guestMobile" value="${DataSource#guestMobile}"/>
  <con:entry key="currency" value="${DataSource#currency}"/>
  <con:entry key="guestEmail" value="${DataSource#guestEmail}"/>
</con:parameters><con:parameterOrder><con:entry>agentId</con:entry><con:entry>guestEmail</con:entry><con:entry>guestMobile</con:entry><con:entry>orderNo</con:entry><con:entry>orderAmount</con:entry><con:entry>orderSource</con:entry><con:entry>currency</con:entry><con:entry>payTtl</con:entry><con:entry>notifyUrl</con:entry><con:entry>guestSwid</con:entry><con:entry>returnUrl</con:entry></con:parameterOrder></con:restRequest></con:config></con:testStep><con:testStep type="restrequest" name="createTransaction" id="79e4772c-fd05-45c2-b451-9b3b1551cdf6"><con:settings/><con:config service="PaymentMiddleware" resourcePath="/payment-middleware-service/session/{sessionId}/transactions" methodName="Method 1" xsi:type="con:RestRequestStep" xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance"><con:restRequest name="createTransaction" id="2e9068e2-c308-4c81-90f3-30ec3896b43c" mediaType="application/json" postQueryString="false"><con:settings><con:setting id="com.eviware.soapui.impl.wsdl.WsdlRequest@request-headers">&lt;xml-fragment/></con:setting></con:settings><con:endpoint>${#Project#ServiceEndpoint}</con:endpoint><con:request>{
    "region" : "${region}",
    "payChannel" : "${payChannel}",
    "payOption" : "${payOption}",
    "bankName" : "${bankName}"
}</con:request><con:originalUri>http://68.71.208.254/payment-middleware-service/session//transactions</con:originalUri><con:assertion type="JsonPath Match" id="5359c8c4-b42b-4644-a878-ce592e97c7cb" name="Match content of [href]"><con:configuration><path>$.href</path><content>https://*</content><allowWildcards>true</allowWildcards><ignoreNamspaceDifferences>false</ignoreNamspaceDifferences><ignoreComments>false</ignoreComments></con:configuration></con:assertion><con:assertion type="JsonPath Match" id="19a9b6f6-3166-447f-a235-a8f896906836" name="Match content of [method]"><con:configuration><path>$.method</path><content>POST</content><allowWildcards>false</allowWildcards><ignoreNamspaceDifferences>false</ignoreNamspaceDifferences><ignoreComments>false</ignoreComments></con:configuration></con:assertion><con:assertion type="JsonPath Existence Match" id="2d1a9429-c5fe-4709-a1d0-908dd305cd4d" name="Check for existence of [params]"><con:configuration><path>$.params</path><content>true</content><allowWildcards>false</allowWildcards><ignoreNamspaceDifferences>false</ignoreNamspaceDifferences><ignoreComments>false</ignoreComments></con:configuration></con:assertion><con:credentials><con:username xsi:nil="true"/><con:password xsi:nil="true"/><con:domain xsi:nil="true"/><con:selectedAuthProfile>No Authorization</con:selectedAuthProfile><con:authType>No Authorization</con:authType></con:credentials><con:jmsConfig JMSDeliveryMode="PERSISTENT"/><con:parameters>
  <con:entry key="payOption" value="${DataSource#payOption}"/>
  <con:entry key="payChannel" value="${DataSource#payChannel}"/>
  <con:entry key="bankName" value="${DataSource#bankName}"/>
  <con:entry key="sessionId" value="${createSession request#Response#$.sessionInfo.sessionId}"/>
  <con:entry key="Accept-Language" value="${DataSource#language}"/>
  <con:entry key="region" value="${DataSource#region}"/>
</con:parameters><con:parameterOrder><con:entry>sessionId</con:entry><con:entry>Accept-Language</con:entry><con:entry>payChannel</con:entry><con:entry>payOption</con:entry><con:entry>bankName</con:entry><con:entry>region</con:entry><con:entry>X-CIP</con:entry></con:parameterOrder></con:restRequest></con:config></con:testStep><con:properties/><con:reportParameters/></con:testCase><con:testCase id="c08fbc1b-041a-45e0-8add-83d336878f32" failOnError="true" failTestCaseOnErrors="true" keepSession="false" maxResults="0" name="T03 language negative" searchProperties="true" disabled="true"><con:settings/><con:testStep type="datasource" name="DataSource" id="ab9c0b80-cdda-4edc-b32b-bbe35768025e"><con:settings/><con:config xsi:type="con:DataSourceStep" xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance"><con:dataSource type="Grid"><con:configuration><check><![CDATA[<xml-fragment><con:entry xmlns:con="http://eviware.com/soapui/config">false</con:entry><con:entry xmlns:con="http://eviware.com/soapui/config">true</con:entry><con:entry xmlns:con="http://eviware.com/soapui/config">true</con:entry></xml-fragment>]]></check><row><![CDATA[<xml-fragment><con:entry xmlns:con="http://eviware.com/soapui/config">3452344444332</con:entry><con:entry xmlns:con="http://eviware.com/soapui/config"/><con:entry xmlns:con="http://eviware.com/soapui/config"/><con:entry xmlns:con="http://eviware.com/soapui/config"/><con:entry xmlns:con="http://eviware.com/soapui/config">1000.01</con:entry><con:entry xmlns:con="http://eviware.com/soapui/config">TICKETING</con:entry><con:entry xmlns:con="http://eviware.com/soapui/config">CNY</con:entry><con:entry xmlns:con="http://eviware.com/soapui/config"/><con:entry xmlns:con="http://eviware.com/soapui/config">PC_WEB</con:entry><con:entry xmlns:con="http://eviware.com/soapui/config">ALIPAY</con:entry><con:entry xmlns:con="http://eviware.com/soapui/config">1020:language is required</con:entry><con:entry xmlns:con="http://eviware.com/soapui/config">cn</con:entry></xml-fragment>]]></row><row><![CDATA[<xml-fragment><con:entry xmlns:con="http://eviware.com/soapui/config">3452344444332</con:entry><con:entry xmlns:con="http://eviware.com/soapui/config"/><con:entry xmlns:con="http://eviware.com/soapui/config"/><con:entry xmlns:con="http://eviware.com/soapui/config"/><con:entry xmlns:con="http://eviware.com/soapui/config">1000.02</con:entry><con:entry xmlns:con="http://eviware.com/soapui/config">LODGING</con:entry><con:entry xmlns:con="http://eviware.com/soapui/config">CNY</con:entry><con:entry xmlns:con="http://eviware.com/soapui/config">en-us-cn</con:entry><con:entry xmlns:con="http://eviware.com/soapui/config">MOBILE_WEB</con:entry><con:entry xmlns:con="http://eviware.com/soapui/config">DOMESTIC_CARD</con:entry><con:entry xmlns:con="http://eviware.com/soapui/config">1021:language is invalid</con:entry><con:entry xmlns:con="http://eviware.com/soapui/config">cn</con:entry></xml-fragment>]]></row><row><![CDATA[<xml-fragment><con:entry xmlns:con="http://eviware.com/soapui/config">3452344444332</con:entry><con:entry xmlns:con="http://eviware.com/soapui/config"/><con:entry xmlns:con="http://eviware.com/soapui/config"/><con:entry xmlns:con="http://eviware.com/soapui/config"/><con:entry xmlns:con="http://eviware.com/soapui/config">1000.03</con:entry><con:entry xmlns:con="http://eviware.com/soapui/config">TICKETING</con:entry><con:entry xmlns:con="http://eviware.com/soapui/config">CNY</con:entry><con:entry xmlns:con="http://eviware.com/soapui/config">1111</con:entry><con:entry xmlns:con="http://eviware.com/soapui/config">PC_WEB</con:entry><con:entry xmlns:con="http://eviware.com/soapui/config">INTERNATIONAL_CARD</con:entry><con:entry xmlns:con="http://eviware.com/soapui/config">1021:language is invalid</con:entry><con:entry xmlns:con="http://eviware.com/soapui/config">cn</con:entry></xml-fragment>]]></row></con:configuration></con:dataSource><con:property>agentId</con:property><con:property>guestEmail</con:property><con:property>guestMobile</con:property><con:property>orderNo</con:property><con:property>orderAmount</con:property><con:property>orderSource</con:property><con:property>currency</con:property><con:property>language</con:property><con:property>payChannel</con:property><con:property>payOption</con:property><con:property>error message</con:property><con:property>region</con:property><con:restartOnRun>true</con:restartOnRun></con:config></con:testStep><con:testStep type="groovy" name="generate orderNo" id="fad3b83c-82e4-4b1f-b62d-c0d7fad2567f"><con:settings/><con:config><script>import java.text.SimpleDateFormat;

def today = new Date()
def format = new SimpleDateFormat();
format = new SimpleDateFormat("yyyyMMddkkmmssSSS");
def DateToStr = format.format(today);

log.info DateToStr
return DateToStr</script></con:config></con:testStep><con:testStep type="restrequest" name="createSession request" id="3e206411-55e8-4229-b024-dcd5dea1a4bb"><con:settings/><con:config service="PaymentMiddleware" resourcePath="/payment-middleware-service/sessions" methodName="Sessions" xsi:type="con:RestRequestStep" xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance"><con:restRequest name="createSession request" id="ac10df94-13d9-4eb3-9c59-7dd8a7e807e1" mediaType="application/json" postQueryString="false"><con:settings><con:setting id="com.eviware.soapui.impl.wsdl.WsdlRequest@request-headers">&lt;xml-fragment/></con:setting></con:settings><con:endpoint>${#Project#ServiceEndpoint}</con:endpoint><con:request>{
    "agentId" : "${agentId}",
    "orderNo" : "${orderNo}",
    "products":[    
        {"description" : "Adult one day part ticket for date 2016-09-15","unitPrice" : 100.00,"qty" : 2, "type" : "PARK_TICKET"},
        {"description" : "Child one day part ticket for date 2016-09-15","unitPrice" : 75.00,"qty" : 3, "type" : "PARK_TICKET"}
    ],
    "orderAmount" : "${orderAmount}",
    "orderSource" : "${orderSource}",
    "currency" : "${currency}"
}</con:request><con:originalUri>http://68.71.208.254/payment-middleware-service/sessions</con:originalUri><con:assertion type="JsonPath Match" id="6c934317-5f11-4bc6-9579-3f69cd4aa632" name="Match content of [orderAmount]"><con:configuration><path>$.sessionInfo.orderAmount</path><content>${DataSource#orderAmount}</content><allowWildcards>false</allowWildcards><ignoreNamspaceDifferences>false</ignoreNamspaceDifferences><ignoreComments>false</ignoreComments></con:configuration></con:assertion><con:assertion type="JsonPath Match" id="ce8eb01a-26fb-4e06-a9b1-e6f6a0b897ba" name="Match content of [links]"><con:configuration><path>$.links</path><content>{"cancelSession":{"rel":"related","href":"*://*/payment-middleware-service/session/*","type":"text/plain"},"getSession":{"rel":"related","href":"*://*/payment-middleware-service/session/*","type":"application/json"},"createTransaction":{"rel":"related","href":"*://*/payment-middleware-service/session/*/transactions","type":"application/json"}}</content><allowWildcards>true</allowWildcards><ignoreNamspaceDifferences>false</ignoreNamspaceDifferences><ignoreComments>false</ignoreComments></con:configuration></con:assertion><con:credentials><con:username xsi:nil="true"/><con:password xsi:nil="true"/><con:domain xsi:nil="true"/><con:selectedAuthProfile>No Authorization</con:selectedAuthProfile><con:authType>No Authorization</con:authType></con:credentials><con:jmsConfig JMSDeliveryMode="PERSISTENT"/><con:jmsPropertyConfig/><con:parameters>
  <con:entry key="orderSource" value="${DataSource#orderSource}"/>
  <con:entry key="agentId" value="${DataSource#agentId}"/>
  <con:entry key="orderNo" value="${generate orderNo#result}"/>
  <con:entry key="orderAmount" value="${DataSource#orderAmount}"/>
  <con:entry key="guestMobile" value="${DataSource#guestMobile}"/>
  <con:entry key="currency" value="${DataSource#currency}"/>
  <con:entry key="guestEmail" value="${DataSource#guestEmail}"/>
</con:parameters><con:parameterOrder><con:entry>agentId</con:entry><con:entry>guestEmail</con:entry><con:entry>guestMobile</con:entry><con:entry>orderNo</con:entry><con:entry>orderAmount</con:entry><con:entry>orderSource</con:entry><con:entry>currency</con:entry><con:entry>payTtl</con:entry><con:entry>notifyUrl</con:entry><con:entry>guestSwid</con:entry><con:entry>returnUrl</con:entry></con:parameterOrder></con:restRequest></con:config></con:testStep><con:testStep type="restrequest" name="createTransaction" id="c571027c-b551-4971-9599-c963bad27df0"><con:settings/><con:config service="PaymentMiddleware" resourcePath="/payment-middleware-service/session/{sessionId}/transactions" methodName="Method 1" xsi:type="con:RestRequestStep" xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance"><con:restRequest name="createTransaction" id="2e9068e2-c308-4c81-90f3-30ec3896b43c" mediaType="application/json" postQueryString="false"><con:settings><con:setting id="com.eviware.soapui.impl.wsdl.WsdlRequest@request-headers">&lt;xml-fragment/></con:setting></con:settings><con:endpoint>${#Project#ServiceEndpoint}</con:endpoint><con:request>{
    "region" : "${region}",
    "payChannel" : "${payChannel}",
    "payOption" : "${payOption}"
}</con:request><con:originalUri>http://68.71.208.254/payment-middleware-service/session//transactions</con:originalUri><con:assertion type="Valid HTTP Status Codes" id="5bc0a4e0-ff69-45c1-92fb-57b8278652ba" name="Valid HTTP Status Codes"><con:settings/><con:configuration><codes>400</codes></con:configuration></con:assertion><con:assertion type="Simple Equals" id="cb50178c-bf35-4dcc-bf83-8df188205f14" name="Equals"><con:configuration><patternObjectId>ab9c0b80-cdda-4edc-b32b-bbe35768025e</patternObjectId><patternProperty>error message</patternProperty><caseSensitive>true</caseSensitive></con:configuration></con:assertion><con:credentials><con:username xsi:nil="true"/><con:password xsi:nil="true"/><con:domain xsi:nil="true"/><con:selectedAuthProfile>No Authorization</con:selectedAuthProfile><con:authType>No Authorization</con:authType></con:credentials><con:jmsConfig JMSDeliveryMode="PERSISTENT"/><con:parameters>
  <con:entry key="payOption" value="${DataSource#payOption}"/>
  <con:entry key="language" value="${DataSource#language}"/>
  <con:entry key="payChannel" value="${DataSource#payChannel}"/>
  <con:entry key="sessionId" value="${createSession request#Response#$.sessionInfo.sessionId}"/>
  <con:entry key="Accept-Language" value="${DataSource#language}"/>
  <con:entry key="region" value="${DataSource#region}"/>
</con:parameters><con:parameterOrder><con:entry>sessionId</con:entry><con:entry>payChannel</con:entry><con:entry>payOption</con:entry><con:entry>bankName</con:entry><con:entry>Accept-Language</con:entry><con:entry>region</con:entry><con:entry>X-CIP</con:entry></con:parameterOrder></con:restRequest></con:config></con:testStep><con:testStep type="datasourceloop" name="DataSource Loop" id="1e21d168-4063-45df-9d81-02619a24b263"><con:settings/><con:config><dataSourceStep>DataSource</dataSourceStep><targetStep>generate orderNo</targetStep></con:config></con:testStep><con:properties/><con:reportParameters/></con:testCase><con:testCase id="edace3bc-3ce8-47ec-a417-44982a94942c" failOnError="true" failTestCaseOnErrors="true" keepSession="false" maxResults="0" name="T04 payChannel negative" searchProperties="true"><con:settings/><con:testStep type="datasource" name="DataSource" id="45325066-6603-4187-9b2f-4f25467d92b5"><con:settings/><con:config xsi:type="con:DataSourceStep" xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance"><con:dataSource type="Grid"><con:configuration><check><![CDATA[<xml-fragment><con:entry xmlns:con="http://eviware.com/soapui/config">true</con:entry><con:entry xmlns:con="http://eviware.com/soapui/config">true</con:entry><con:entry xmlns:con="http://eviware.com/soapui/config">true</con:entry></xml-fragment>]]></check><row><![CDATA[<xml-fragment><con:entry xmlns:con="http://eviware.com/soapui/config">3452344444332</con:entry><con:entry xmlns:con="http://eviware.com/soapui/config"/><con:entry xmlns:con="http://eviware.com/soapui/config"/><con:entry xmlns:con="http://eviware.com/soapui/config"/><con:entry xmlns:con="http://eviware.com/soapui/config">1000.01</con:entry><con:entry xmlns:con="http://eviware.com/soapui/config">TICKETING</con:entry><con:entry xmlns:con="http://eviware.com/soapui/config">CNY</con:entry><con:entry xmlns:con="http://eviware.com/soapui/config">en</con:entry><con:entry xmlns:con="http://eviware.com/soapui/config"/><con:entry xmlns:con="http://eviware.com/soapui/config">ALIPAY</con:entry><con:entry xmlns:con="http://eviware.com/soapui/config">1003:pay channel is required</con:entry><con:entry xmlns:con="http://eviware.com/soapui/config">cn</con:entry></xml-fragment>]]></row><row><![CDATA[<xml-fragment><con:entry xmlns:con="http://eviware.com/soapui/config">3452344444332</con:entry><con:entry xmlns:con="http://eviware.com/soapui/config"/><con:entry xmlns:con="http://eviware.com/soapui/config"/><con:entry xmlns:con="http://eviware.com/soapui/config"/><con:entry xmlns:con="http://eviware.com/soapui/config">1000.02</con:entry><con:entry xmlns:con="http://eviware.com/soapui/config">LODGING</con:entry><con:entry xmlns:con="http://eviware.com/soapui/config">CNY</con:entry><con:entry xmlns:con="http://eviware.com/soapui/config">en</con:entry><con:entry xmlns:con="http://eviware.com/soapui/config">PC</con:entry><con:entry xmlns:con="http://eviware.com/soapui/config">DOMESTIC_CARD</con:entry><con:entry xmlns:con="http://eviware.com/soapui/config">1004:pay channel is invalid</con:entry><con:entry xmlns:con="http://eviware.com/soapui/config">cn</con:entry></xml-fragment>]]></row><row><![CDATA[<xml-fragment><con:entry xmlns:con="http://eviware.com/soapui/config">3452344444332</con:entry><con:entry xmlns:con="http://eviware.com/soapui/config"/><con:entry xmlns:con="http://eviware.com/soapui/config"/><con:entry xmlns:con="http://eviware.com/soapui/config"/><con:entry xmlns:con="http://eviware.com/soapui/config">1000.03</con:entry><con:entry xmlns:con="http://eviware.com/soapui/config">TICKETING</con:entry><con:entry xmlns:con="http://eviware.com/soapui/config">CNY</con:entry><con:entry xmlns:con="http://eviware.com/soapui/config">zh-cn</con:entry><con:entry xmlns:con="http://eviware.com/soapui/config">123</con:entry><con:entry xmlns:con="http://eviware.com/soapui/config">INTERNATIONAL_CARD</con:entry><con:entry xmlns:con="http://eviware.com/soapui/config">1004:pay channel is invalid</con:entry><con:entry xmlns:con="http://eviware.com/soapui/config">cn</con:entry></xml-fragment>]]></row></con:configuration></con:dataSource><con:property>agentId</con:property><con:property>guestEmail</con:property><con:property>guestMobile</con:property><con:property>orderNo</con:property><con:property>orderAmount</con:property><con:property>orderSource</con:property><con:property>currency</con:property><con:property>language</con:property><con:property>payChannel</con:property><con:property>payOption</con:property><con:property>error message</con:property><con:property>region</con:property><con:restartOnRun>true</con:restartOnRun></con:config></con:testStep><con:testStep type="groovy" name="generate orderNo" id="9ce14374-c1cc-4458-8058-98658d8badb0"><con:settings/><con:config><script>import java.text.SimpleDateFormat;

def today = new Date()
def format = new SimpleDateFormat();
format = new SimpleDateFormat("yyyyMMddkkmmssSSS");
def DateToStr = format.format(today);

log.info DateToStr
return DateToStr</script></con:config></con:testStep><con:testStep type="restrequest" name="createSession request" id="f9aa3997-d294-43f2-91eb-ab1c5c85e7c5"><con:settings/><con:config service="PaymentMiddleware" resourcePath="/payment-middleware-service/sessions" methodName="Sessions" xsi:type="con:RestRequestStep" xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance"><con:restRequest name="createSession request" id="ac10df94-13d9-4eb3-9c59-7dd8a7e807e1" mediaType="application/json" postQueryString="false"><con:settings><con:setting id="com.eviware.soapui.impl.wsdl.WsdlRequest@request-headers">&lt;xml-fragment/></con:setting></con:settings><con:endpoint>${#Project#ServiceEndpoint}</con:endpoint><con:request>{
    "agentId" : "${agentId}",
    "orderNo" : "${orderNo}",
    "products":[    
        {"description" : "Adult one day part ticket for date 2016-09-15","unitPrice" : 100.00,"qty" : 2, "type" : "PARK_TICKET"},
        {"description" : "Child one day part ticket for date 2016-09-15","unitPrice" : 75.00,"qty" : 3, "type" : "PARK_TICKET"}
    ],
    "orderAmount" : "${orderAmount}",
    "orderSource" : "${orderSource}",
    "currency" : "${currency}"
}</con:request><con:originalUri>http://68.71.208.254/payment-middleware-service/sessions</con:originalUri><con:assertion type="JsonPath Match" id="6c934317-5f11-4bc6-9579-3f69cd4aa632" name="Match content of [orderAmount]"><con:configuration><path>$.sessionInfo.orderAmount</path><content>${DataSource#orderAmount}</content><allowWildcards>false</allowWildcards><ignoreNamspaceDifferences>false</ignoreNamspaceDifferences><ignoreComments>false</ignoreComments></con:configuration></con:assertion><con:assertion type="JsonPath Match" id="ce8eb01a-26fb-4e06-a9b1-e6f6a0b897ba" name="Match content of [links]"><con:configuration><path>$.links</path><content>{"cancelSession":{"rel":"related","href":"*://*/payment-middleware-service/session/*","type":"text/plain"},"getSession":{"rel":"related","href":"*://*/payment-middleware-service/session/*","type":"application/json"},"createTransaction":{"rel":"related","href":"*://*/payment-middleware-service/session/*/transactions","type":"application/json"}}</content><allowWildcards>true</allowWildcards><ignoreNamspaceDifferences>false</ignoreNamspaceDifferences><ignoreComments>false</ignoreComments></con:configuration></con:assertion><con:credentials><con:username xsi:nil="true"/><con:password xsi:nil="true"/><con:domain xsi:nil="true"/><con:selectedAuthProfile>No Authorization</con:selectedAuthProfile><con:authType>No Authorization</con:authType></con:credentials><con:jmsConfig JMSDeliveryMode="PERSISTENT"/><con:jmsPropertyConfig/><con:parameters>
  <con:entry key="orderSource" value="${DataSource#orderSource}"/>
  <con:entry key="agentId" value="${DataSource#agentId}"/>
  <con:entry key="orderNo" value="${generate orderNo#result}"/>
  <con:entry key="orderAmount" value="${DataSource#orderAmount}"/>
  <con:entry key="guestMobile" value="${DataSource#guestMobile}"/>
  <con:entry key="currency" value="${DataSource#currency}"/>
  <con:entry key="guestEmail" value="${DataSource#guestEmail}"/>
</con:parameters><con:parameterOrder><con:entry>agentId</con:entry><con:entry>guestEmail</con:entry><con:entry>guestMobile</con:entry><con:entry>orderNo</con:entry><con:entry>orderAmount</con:entry><con:entry>orderSource</con:entry><con:entry>currency</con:entry><con:entry>payTtl</con:entry><con:entry>notifyUrl</con:entry><con:entry>guestSwid</con:entry><con:entry>returnUrl</con:entry></con:parameterOrder></con:restRequest></con:config></con:testStep><con:testStep type="restrequest" name="createTransaction" id="c1a50e4b-f3e8-4e65-914c-5870d4536045"><con:settings/><con:config service="PaymentMiddleware" resourcePath="/payment-middleware-service/session/{sessionId}/transactions" methodName="Method 1" xsi:type="con:RestRequestStep" xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance"><con:restRequest name="createTransaction" id="2e9068e2-c308-4c81-90f3-30ec3896b43c" mediaType="application/json" postQueryString="false"><con:settings><con:setting id="com.eviware.soapui.impl.wsdl.WsdlRequest@request-headers">&lt;xml-fragment/></con:setting></con:settings><con:endpoint>${#Project#ServiceEndpoint}</con:endpoint><con:request>{
    "region" : "${region}",
    "payChannel" : "${payChannel}",
    "payOption" : "${payOption}"
}</con:request><con:originalUri>http://68.71.208.254/payment-middleware-service/session//transactions</con:originalUri><con:assertion type="Valid HTTP Status Codes" id="5bc0a4e0-ff69-45c1-92fb-57b8278652ba" name="Valid HTTP Status Codes"><con:settings/><con:configuration><codes>400</codes></con:configuration></con:assertion><con:assertion type="Simple Equals" id="cb50178c-bf35-4dcc-bf83-8df188205f14" name="Equals"><con:configuration><patternObjectId>45325066-6603-4187-9b2f-4f25467d92b5</patternObjectId><patternProperty>error message</patternProperty><caseSensitive>true</caseSensitive></con:configuration></con:assertion><con:credentials><con:username xsi:nil="true"/><con:password xsi:nil="true"/><con:domain xsi:nil="true"/><con:selectedAuthProfile>No Authorization</con:selectedAuthProfile><con:authType>No Authorization</con:authType></con:credentials><con:jmsConfig JMSDeliveryMode="PERSISTENT"/><con:parameters>
  <con:entry key="payOption" value="${DataSource#payOption}"/>
  <con:entry key="payChannel" value="${DataSource#payChannel}"/>
  <con:entry key="sessionId" value="${createSession request#Response#$.sessionInfo.sessionId}"/>
  <con:entry key="Accept-Language" value="${DataSource#language}"/>
  <con:entry key="region" value="${DataSource#region}"/>
</con:parameters><con:parameterOrder><con:entry>sessionId</con:entry><con:entry>Accept-Language</con:entry><con:entry>payChannel</con:entry><con:entry>payOption</con:entry><con:entry>bankName</con:entry><con:entry>region</con:entry><con:entry>X-CIP</con:entry></con:parameterOrder></con:restRequest></con:config></con:testStep><con:testStep type="datasourceloop" name="DataSource Loop" id="08e96a3a-d955-40c3-8676-1986c124d78b"><con:settings/><con:config><dataSourceStep>DataSource</dataSourceStep><targetStep>generate orderNo</targetStep></con:config></con:testStep><con:properties/><con:reportParameters/></con:testCase><con:testCase id="1d315e08-44d1-4215-95fb-1a7eebb252bf" failOnError="true" failTestCaseOnErrors="true" keepSession="false" maxResults="0" name="T05 payOption negative" searchProperties="true"><con:settings/><con:testStep type="datasource" name="DataSource" id="d07f5051-fa04-4ffb-a126-33d8ce22ea08"><con:settings/><con:config xsi:type="con:DataSourceStep" xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance"><con:dataSource type="Grid"><con:configuration><check><![CDATA[<xml-fragment><con:entry xmlns:con="http://eviware.com/soapui/config">true</con:entry><con:entry xmlns:con="http://eviware.com/soapui/config">true</con:entry><con:entry xmlns:con="http://eviware.com/soapui/config">true</con:entry></xml-fragment>]]></check><row><![CDATA[<xml-fragment><con:entry xmlns:con="http://eviware.com/soapui/config">3452344444332</con:entry><con:entry xmlns:con="http://eviware.com/soapui/config"/><con:entry xmlns:con="http://eviware.com/soapui/config"/><con:entry xmlns:con="http://eviware.com/soapui/config"/><con:entry xmlns:con="http://eviware.com/soapui/config">1000.01</con:entry><con:entry xmlns:con="http://eviware.com/soapui/config">TICKETING</con:entry><con:entry xmlns:con="http://eviware.com/soapui/config">CNY</con:entry><con:entry xmlns:con="http://eviware.com/soapui/config">zh-cn</con:entry><con:entry xmlns:con="http://eviware.com/soapui/config">PC_WEB</con:entry><con:entry xmlns:con="http://eviware.com/soapui/config"/><con:entry xmlns:con="http://eviware.com/soapui/config">1007:pay option is required</con:entry><con:entry xmlns:con="http://eviware.com/soapui/config">cn</con:entry></xml-fragment>]]></row><row><![CDATA[<xml-fragment><con:entry xmlns:con="http://eviware.com/soapui/config">3452344444332</con:entry><con:entry xmlns:con="http://eviware.com/soapui/config"/><con:entry xmlns:con="http://eviware.com/soapui/config"/><con:entry xmlns:con="http://eviware.com/soapui/config"/><con:entry xmlns:con="http://eviware.com/soapui/config">1000.02</con:entry><con:entry xmlns:con="http://eviware.com/soapui/config">LODGING</con:entry><con:entry xmlns:con="http://eviware.com/soapui/config">CNY</con:entry><con:entry xmlns:con="http://eviware.com/soapui/config">zh-cn</con:entry><con:entry xmlns:con="http://eviware.com/soapui/config">PC_WEB</con:entry><con:entry xmlns:con="http://eviware.com/soapui/config">PAYECHO</con:entry><con:entry xmlns:con="http://eviware.com/soapui/config">1008:pay option is invalid</con:entry><con:entry xmlns:con="http://eviware.com/soapui/config">cn</con:entry></xml-fragment>]]></row><row><![CDATA[<xml-fragment><con:entry xmlns:con="http://eviware.com/soapui/config">3452344444332</con:entry><con:entry xmlns:con="http://eviware.com/soapui/config"/><con:entry xmlns:con="http://eviware.com/soapui/config"/><con:entry xmlns:con="http://eviware.com/soapui/config"/><con:entry xmlns:con="http://eviware.com/soapui/config">1000.03</con:entry><con:entry xmlns:con="http://eviware.com/soapui/config">TICKETING</con:entry><con:entry xmlns:con="http://eviware.com/soapui/config">CNY</con:entry><con:entry xmlns:con="http://eviware.com/soapui/config">zh-cn</con:entry><con:entry xmlns:con="http://eviware.com/soapui/config">PC_WEB</con:entry><con:entry xmlns:con="http://eviware.com/soapui/config">111</con:entry><con:entry xmlns:con="http://eviware.com/soapui/config">1008:pay option is invalid</con:entry><con:entry xmlns:con="http://eviware.com/soapui/config">cn</con:entry></xml-fragment>]]></row></con:configuration></con:dataSource><con:property>agentId</con:property><con:property>guestEmail</con:property><con:property>guestMobile</con:property><con:property>orderNo</con:property><con:property>orderAmount</con:property><con:property>orderSource</con:property><con:property>currency</con:property><con:property>language</con:property><con:property>payChannel</con:property><con:property>payOption</con:property><con:property>error message</con:property><con:property>region</con:property><con:restartOnRun>true</con:restartOnRun></con:config></con:testStep><con:testStep type="groovy" name="generate orderNo" id="07f21cf3-e958-425c-b1ec-f97809107085"><con:settings/><con:config><script>import java.text.SimpleDateFormat;

def today = new Date()
def format = new SimpleDateFormat();
format = new SimpleDateFormat("yyyyMMddkkmmssSSS");
def DateToStr = format.format(today);

log.info DateToStr
return DateToStr</script></con:config></con:testStep><con:testStep type="restrequest" name="createSession request" id="89b4f2f5-3d5f-4adf-b2e5-0370b4adb4e8"><con:settings/><con:config service="PaymentMiddleware" resourcePath="/payment-middleware-service/sessions" methodName="Sessions" xsi:type="con:RestRequestStep" xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance"><con:restRequest name="createSession request" id="ac10df94-13d9-4eb3-9c59-7dd8a7e807e1" mediaType="application/json" postQueryString="false"><con:settings><con:setting id="com.eviware.soapui.impl.wsdl.WsdlRequest@request-headers">&lt;xml-fragment/></con:setting></con:settings><con:endpoint>${#Project#ServiceEndpoint}</con:endpoint><con:request>{
    "agentId" : "${agentId}",
    "orderNo" : "${orderNo}",
    "products":[    
        {"description" : "Adult one day part ticket for date 2016-09-15","unitPrice" : 100.00,"qty" : 2, "type" : "PARK_TICKET"},
        {"description" : "Child one day part ticket for date 2016-09-15","unitPrice" : 75.00,"qty" : 3, "type" : "PARK_TICKET"}
    ],
    "orderAmount" : "${orderAmount}",
    "orderSource" : "${orderSource}",
    "currency" : "${currency}"
}</con:request><con:originalUri>http://68.71.208.254/payment-middleware-service/sessions</con:originalUri><con:assertion type="JsonPath Match" id="6c934317-5f11-4bc6-9579-3f69cd4aa632" name="Match content of [orderAmount]"><con:configuration><path>$.sessionInfo.orderAmount</path><content>${DataSource#orderAmount}</content><allowWildcards>false</allowWildcards><ignoreNamspaceDifferences>false</ignoreNamspaceDifferences><ignoreComments>false</ignoreComments></con:configuration></con:assertion><con:assertion type="JsonPath Match" id="ce8eb01a-26fb-4e06-a9b1-e6f6a0b897ba" name="Match content of [links]"><con:configuration><path>$.links</path><content>{"cancelSession":{"rel":"related","href":"*://*/payment-middleware-service/session/*","type":"text/plain"},"getSession":{"rel":"related","href":"*://*/payment-middleware-service/session/*","type":"application/json"},"createTransaction":{"rel":"related","href":"*://*/payment-middleware-service/session/*/transactions","type":"application/json"}}</content><allowWildcards>true</allowWildcards><ignoreNamspaceDifferences>false</ignoreNamspaceDifferences><ignoreComments>false</ignoreComments></con:configuration></con:assertion><con:credentials><con:username xsi:nil="true"/><con:password xsi:nil="true"/><con:domain xsi:nil="true"/><con:selectedAuthProfile>No Authorization</con:selectedAuthProfile><con:authType>No Authorization</con:authType></con:credentials><con:jmsConfig JMSDeliveryMode="PERSISTENT"/><con:jmsPropertyConfig/><con:parameters>
  <con:entry key="orderSource" value="${DataSource#orderSource}"/>
  <con:entry key="agentId" value="${DataSource#agentId}"/>
  <con:entry key="orderNo" value="${generate orderNo#result}"/>
  <con:entry key="orderAmount" value="${DataSource#orderAmount}"/>
  <con:entry key="guestMobile" value="${DataSource#guestMobile}"/>
  <con:entry key="currency" value="${DataSource#currency}"/>
  <con:entry key="guestEmail" value="${DataSource#guestEmail}"/>
</con:parameters><con:parameterOrder><con:entry>agentId</con:entry><con:entry>guestEmail</con:entry><con:entry>guestMobile</con:entry><con:entry>orderNo</con:entry><con:entry>orderAmount</con:entry><con:entry>orderSource</con:entry><con:entry>currency</con:entry><con:entry>payTtl</con:entry><con:entry>notifyUrl</con:entry><con:entry>guestSwid</con:entry><con:entry>returnUrl</con:entry></con:parameterOrder></con:restRequest></con:config></con:testStep><con:testStep type="restrequest" name="createTransaction" id="0308629e-ebe2-4048-908a-488dd8ee58a2"><con:settings/><con:config service="PaymentMiddleware" resourcePath="/payment-middleware-service/session/{sessionId}/transactions" methodName="Method 1" xsi:type="con:RestRequestStep" xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance"><con:restRequest name="createTransaction" id="2e9068e2-c308-4c81-90f3-30ec3896b43c" mediaType="application/json" postQueryString="false"><con:settings><con:setting id="com.eviware.soapui.impl.wsdl.WsdlRequest@request-headers">&lt;xml-fragment/></con:setting></con:settings><con:endpoint>${#Project#ServiceEndpoint}</con:endpoint><con:request>{
    "region" : "${region}",
    "payChannel" : "${payChannel}",
    "payOption" : "${payOption}"
}</con:request><con:originalUri>http://68.71.208.254/payment-middleware-service/session//transactions</con:originalUri><con:assertion type="Valid HTTP Status Codes" id="5bc0a4e0-ff69-45c1-92fb-57b8278652ba" name="Valid HTTP Status Codes"><con:settings/><con:configuration><codes>400</codes></con:configuration></con:assertion><con:assertion type="Simple Equals" id="cb50178c-bf35-4dcc-bf83-8df188205f14" name="Equals"><con:configuration><patternObjectId>d07f5051-fa04-4ffb-a126-33d8ce22ea08</patternObjectId><patternProperty>error message</patternProperty><caseSensitive>true</caseSensitive></con:configuration></con:assertion><con:credentials><con:username xsi:nil="true"/><con:password xsi:nil="true"/><con:domain xsi:nil="true"/><con:selectedAuthProfile>No Authorization</con:selectedAuthProfile><con:authType>No Authorization</con:authType></con:credentials><con:jmsConfig JMSDeliveryMode="PERSISTENT"/><con:parameters>
  <con:entry key="payOption" value="${DataSource#payOption}"/>
  <con:entry key="payChannel" value="${DataSource#payChannel}"/>
  <con:entry key="sessionId" value="${createSession request#Response#$.sessionInfo.sessionId}"/>
  <con:entry key="Accept-Language" value="${DataSource#language}"/>
  <con:entry key="region" value="${DataSource#region}"/>
</con:parameters><con:parameterOrder><con:entry>sessionId</con:entry><con:entry>Accept-Language</con:entry><con:entry>payChannel</con:entry><con:entry>payOption</con:entry><con:entry>bankName</con:entry><con:entry>region</con:entry><con:entry>X-CIP</con:entry></con:parameterOrder></con:restRequest></con:config></con:testStep><con:testStep type="datasourceloop" name="DataSource Loop" id="958eb32e-ac79-4c15-9235-b02af9ab74f0"><con:settings/><con:config><dataSourceStep>DataSource</dataSourceStep><targetStep>generate orderNo</targetStep></con:config></con:testStep><con:properties/><con:reportParameters/></con:testCase><con:testCase id="2578c295-168e-4d40-b91e-4e6c456acfc7" failOnError="true" failTestCaseOnErrors="true" keepSession="false" maxResults="0" name="T06 bankName negative" searchProperties="true"><con:settings/><con:testStep type="datasource" name="DataSource" id="11350686-ca30-4586-8ab8-26d883c70484"><con:settings/><con:config xsi:type="con:DataSourceStep" xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance"><con:dataSource type="Grid"><con:configuration><check><![CDATA[<xml-fragment><con:entry xmlns:con="http://eviware.com/soapui/config">true</con:entry><con:entry xmlns:con="http://eviware.com/soapui/config">false</con:entry><con:entry xmlns:con="http://eviware.com/soapui/config">true</con:entry><con:entry xmlns:con="http://eviware.com/soapui/config">false</con:entry></xml-fragment>]]></check><row><![CDATA[<xml-fragment><con:entry xmlns:con="http://eviware.com/soapui/config">3452344444332</con:entry><con:entry xmlns:con="http://eviware.com/soapui/config"/><con:entry xmlns:con="http://eviware.com/soapui/config"/><con:entry xmlns:con="http://eviware.com/soapui/config"/><con:entry xmlns:con="http://eviware.com/soapui/config">1000.01</con:entry><con:entry xmlns:con="http://eviware.com/soapui/config">TICKETING</con:entry><con:entry xmlns:con="http://eviware.com/soapui/config">CNY</con:entry><con:entry xmlns:con="http://eviware.com/soapui/config">zh-cn</con:entry><con:entry xmlns:con="http://eviware.com/soapui/config">PC_WEB</con:entry><con:entry xmlns:con="http://eviware.com/soapui/config">DOMESTIC_CARD</con:entry><con:entry xmlns:con="http://eviware.com/soapui/config">1017:bank name is invalid</con:entry><con:entry xmlns:con="http://eviware.com/soapui/config">111</con:entry><con:entry xmlns:con="http://eviware.com/soapui/config">cn</con:entry></xml-fragment>]]></row><row><![CDATA[<xml-fragment><con:entry xmlns:con="http://eviware.com/soapui/config">3452344444332</con:entry><con:entry xmlns:con="http://eviware.com/soapui/config"/><con:entry xmlns:con="http://eviware.com/soapui/config"/><con:entry xmlns:con="http://eviware.com/soapui/config"/><con:entry xmlns:con="http://eviware.com/soapui/config">1000.02</con:entry><con:entry xmlns:con="http://eviware.com/soapui/config">TICKETING</con:entry><con:entry xmlns:con="http://eviware.com/soapui/config">CNY</con:entry><con:entry xmlns:con="http://eviware.com/soapui/config">zh-cn</con:entry><con:entry xmlns:con="http://eviware.com/soapui/config">PC_WEB</con:entry><con:entry xmlns:con="http://eviware.com/soapui/config">ALIPAY</con:entry><con:entry xmlns:con="http://eviware.com/soapui/config">1017:bank name is invalid</con:entry><con:entry xmlns:con="http://eviware.com/soapui/config">111</con:entry><con:entry xmlns:con="http://eviware.com/soapui/config">cn</con:entry></xml-fragment>]]></row><row><![CDATA[<xml-fragment><con:entry xmlns:con="http://eviware.com/soapui/config">3452344444332</con:entry><con:entry xmlns:con="http://eviware.com/soapui/config"/><con:entry xmlns:con="http://eviware.com/soapui/config"/><con:entry xmlns:con="http://eviware.com/soapui/config"/><con:entry xmlns:con="http://eviware.com/soapui/config">1000.03</con:entry><con:entry xmlns:con="http://eviware.com/soapui/config">TICKETING</con:entry><con:entry xmlns:con="http://eviware.com/soapui/config">CNY</con:entry><con:entry xmlns:con="http://eviware.com/soapui/config">zh-cn</con:entry><con:entry xmlns:con="http://eviware.com/soapui/config">PC_WEB</con:entry><con:entry xmlns:con="http://eviware.com/soapui/config">INTERNATIONAL_CARD</con:entry><con:entry xmlns:con="http://eviware.com/soapui/config">1019:international card is invalid</con:entry><con:entry xmlns:con="http://eviware.com/soapui/config">111</con:entry><con:entry xmlns:con="http://eviware.com/soapui/config">cn</con:entry></xml-fragment>]]></row><row><![CDATA[<xml-fragment><con:entry xmlns:con="http://eviware.com/soapui/config">3452344444332</con:entry><con:entry xmlns:con="http://eviware.com/soapui/config"/><con:entry xmlns:con="http://eviware.com/soapui/config"/><con:entry xmlns:con="http://eviware.com/soapui/config"/><con:entry xmlns:con="http://eviware.com/soapui/config">1000.04</con:entry><con:entry xmlns:con="http://eviware.com/soapui/config">TICKETING</con:entry><con:entry xmlns:con="http://eviware.com/soapui/config">CNY</con:entry><con:entry xmlns:con="http://eviware.com/soapui/config">zh-cn</con:entry><con:entry xmlns:con="http://eviware.com/soapui/config">PC_WEB</con:entry><con:entry xmlns:con="http://eviware.com/soapui/config">CALLBACK</con:entry><con:entry xmlns:con="http://eviware.com/soapui/config">1017:bank name is invalid</con:entry><con:entry xmlns:con="http://eviware.com/soapui/config">111</con:entry><con:entry xmlns:con="http://eviware.com/soapui/config">cn</con:entry></xml-fragment>]]></row></con:configuration></con:dataSource><con:property>agentId</con:property><con:property>guestEmail</con:property><con:property>guestMobile</con:property><con:property>orderNo</con:property><con:property>orderAmount</con:property><con:property>orderSource</con:property><con:property>currency</con:property><con:property>language</con:property><con:property>payChannel</con:property><con:property>payOption</con:property><con:property>error message</con:property><con:property>bankName</con:property><con:property>region</con:property><con:restartOnRun>true</con:restartOnRun></con:config></con:testStep><con:testStep type="groovy" name="generate orderNo" id="d3ff568b-81bc-4ba5-b6d0-02ab56b12239"><con:settings/><con:config><script>import java.text.SimpleDateFormat;

def today = new Date()
def format = new SimpleDateFormat();
format = new SimpleDateFormat("yyyyMMddkkmmssSSS");
def DateToStr = format.format(today);

log.info DateToStr
return DateToStr</script></con:config></con:testStep><con:testStep type="restrequest" name="createSession request" id="51e28968-f10d-486e-8f88-721d04880961"><con:settings/><con:config service="PaymentMiddleware" resourcePath="/payment-middleware-service/sessions" methodName="Sessions" xsi:type="con:RestRequestStep" xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance"><con:restRequest name="createSession request" id="ac10df94-13d9-4eb3-9c59-7dd8a7e807e1" mediaType="application/json" postQueryString="false"><con:settings><con:setting id="com.eviware.soapui.impl.wsdl.WsdlRequest@request-headers">&lt;xml-fragment/></con:setting></con:settings><con:endpoint>${#Project#ServiceEndpoint}</con:endpoint><con:request>{
    "agentId" : "${agentId}",
    "orderNo" : "${orderNo}",
    "products":[    
        {"description" : "Adult one day part ticket for date 2016-09-15","unitPrice" : 100.00,"qty" : 2, "type" : "PARK_TICKET"},
        {"description" : "Child one day part ticket for date 2016-09-15","unitPrice" : 75.00,"qty" : 3, "type" : "PARK_TICKET"}
    ],
    "orderAmount" : "${orderAmount}",
    "orderSource" : "${orderSource}",
    "currency" : "${currency}"
}</con:request><con:originalUri>http://68.71.208.254/payment-middleware-service/sessions</con:originalUri><con:assertion type="JsonPath Match" id="6c934317-5f11-4bc6-9579-3f69cd4aa632" name="Match content of [orderAmount]"><con:configuration><path>$.sessionInfo.orderAmount</path><content>${DataSource#orderAmount}</content><allowWildcards>false</allowWildcards><ignoreNamspaceDifferences>false</ignoreNamspaceDifferences><ignoreComments>false</ignoreComments></con:configuration></con:assertion><con:assertion type="JsonPath Match" id="ce8eb01a-26fb-4e06-a9b1-e6f6a0b897ba" name="Match content of [links]"><con:configuration><path>$.links</path><content>{"cancelSession":{"rel":"related","href":"*://*/payment-middleware-service/session/*","type":"text/plain"},"getSession":{"rel":"related","href":"*://*/payment-middleware-service/session/*","type":"application/json"},"createTransaction":{"rel":"related","href":"*://*/payment-middleware-service/session/*/transactions","type":"application/json"}}</content><allowWildcards>true</allowWildcards><ignoreNamspaceDifferences>false</ignoreNamspaceDifferences><ignoreComments>false</ignoreComments></con:configuration></con:assertion><con:credentials><con:username xsi:nil="true"/><con:password xsi:nil="true"/><con:domain xsi:nil="true"/><con:selectedAuthProfile>No Authorization</con:selectedAuthProfile><con:authType>No Authorization</con:authType></con:credentials><con:jmsConfig JMSDeliveryMode="PERSISTENT"/><con:jmsPropertyConfig/><con:parameters>
  <con:entry key="orderSource" value="${DataSource#orderSource}"/>
  <con:entry key="agentId" value="${DataSource#agentId}"/>
  <con:entry key="orderNo" value="${generate orderNo#result}"/>
  <con:entry key="orderAmount" value="${DataSource#orderAmount}"/>
  <con:entry key="guestMobile" value="${DataSource#guestMobile}"/>
  <con:entry key="currency" value="${DataSource#currency}"/>
  <con:entry key="guestEmail" value="${DataSource#guestEmail}"/>
</con:parameters><con:parameterOrder><con:entry>agentId</con:entry><con:entry>guestEmail</con:entry><con:entry>guestMobile</con:entry><con:entry>orderNo</con:entry><con:entry>orderAmount</con:entry><con:entry>orderSource</con:entry><con:entry>currency</con:entry><con:entry>payTtl</con:entry><con:entry>notifyUrl</con:entry><con:entry>guestSwid</con:entry><con:entry>returnUrl</con:entry></con:parameterOrder></con:restRequest></con:config></con:testStep><con:testStep type="restrequest" name="createTransaction" id="d154f809-cf18-4673-99e1-5231ffe7055e"><con:settings/><con:config service="PaymentMiddleware" resourcePath="/payment-middleware-service/session/{sessionId}/transactions" methodName="Method 1" xsi:type="con:RestRequestStep" xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance"><con:restRequest name="createTransaction" id="2e9068e2-c308-4c81-90f3-30ec3896b43c" mediaType="application/json" postQueryString="false"><con:settings><con:setting id="com.eviware.soapui.impl.wsdl.WsdlRequest@request-headers">&lt;xml-fragment/></con:setting></con:settings><con:endpoint>${#Project#ServiceEndpoint}</con:endpoint><con:request>{
    "region" : "${region}",
    "payChannel" : "${payChannel}",
    "payOption" : "${payOption}",
    "bankName" : "${bankName}"
}</con:request><con:originalUri>http://68.71.208.254/payment-middleware-service/session//transactions</con:originalUri><con:assertion type="Valid HTTP Status Codes" id="5bc0a4e0-ff69-45c1-92fb-57b8278652ba" name="Valid HTTP Status Codes"><con:settings/><con:configuration><codes>400</codes></con:configuration></con:assertion><con:assertion type="Simple Equals" id="cb50178c-bf35-4dcc-bf83-8df188205f14" name="Equals"><con:configuration><patternObjectId>11350686-ca30-4586-8ab8-26d883c70484</patternObjectId><patternProperty>error message</patternProperty><caseSensitive>true</caseSensitive></con:configuration></con:assertion><con:credentials><con:username xsi:nil="true"/><con:password xsi:nil="true"/><con:domain xsi:nil="true"/><con:selectedAuthProfile>No Authorization</con:selectedAuthProfile><con:authType>No Authorization</con:authType></con:credentials><con:jmsConfig JMSDeliveryMode="PERSISTENT"/><con:parameters>
  <con:entry key="payOption" value="${DataSource#payOption}"/>
  <con:entry key="bankName" value="${DataSource#bankName}"/>
  <con:entry key="payChannel" value="${DataSource#payChannel}"/>
  <con:entry key="sessionId" value="${createSession request#Response#$.sessionInfo.sessionId}"/>
  <con:entry key="Accept-Language" value="${DataSource#language}"/>
  <con:entry key="region" value="${DataSource#region}"/>
</con:parameters><con:parameterOrder><con:entry>sessionId</con:entry><con:entry>Accept-Language</con:entry><con:entry>payChannel</con:entry><con:entry>payOption</con:entry><con:entry>bankName</con:entry><con:entry>region</con:entry><con:entry>X-CIP</con:entry></con:parameterOrder></con:restRequest></con:config></con:testStep><con:testStep type="datasourceloop" name="DataSource Loop" id="cfe21dca-791b-4066-997f-001c4ad6b7d8"><con:settings/><con:config><dataSourceStep>DataSource</dataSourceStep><targetStep>generate orderNo</targetStep></con:config></con:testStep><con:properties/><con:reportParameters/><con:breakPoints><con:testStepId>51e28968-f10d-486e-8f88-721d04880961</con:testStepId><con:status>NONE</con:status><con:properties/></con:breakPoints><con:breakPoints><con:testStepId>d3ff568b-81bc-4ba5-b6d0-02ab56b12239</con:testStepId><con:status>NONE</con:status><con:properties/></con:breakPoints></con:testCase><con:testCase id="3d6dfef6-c93a-4616-acfb-52b3975405b3" failOnError="true" failTestCaseOnErrors="true" keepSession="false" maxResults="0" name="T07 Duplicate Transaction" searchProperties="true" disabled="true"><con:description>As a Travel Agent, I can proceed to payment processing from lodging/tickets checkout page 

manual test</con:description><con:settings/><con:testStep type="datasource" name="DataSource" id="4ecd52fd-713a-4096-9074-0542866b1325"><con:settings/><con:config xsi:type="con:DataSourceStep" xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance"><con:dataSource type="Grid"><con:configuration><check>&lt;con:entry xmlns:con="http://eviware.com/soapui/config">true&lt;/con:entry></check><row><![CDATA[<xml-fragment><con:entry xmlns:con="http://eviware.com/soapui/config">3452344444332</con:entry><con:entry xmlns:con="http://eviware.com/soapui/config"/><con:entry xmlns:con="http://eviware.com/soapui/config"/><con:entry xmlns:con="http://eviware.com/soapui/config"/><con:entry xmlns:con="http://eviware.com/soapui/config">1000.01</con:entry><con:entry xmlns:con="http://eviware.com/soapui/config">TICKETING</con:entry><con:entry xmlns:con="http://eviware.com/soapui/config">CNY</con:entry><con:entry xmlns:con="http://eviware.com/soapui/config">zh-cn</con:entry><con:entry xmlns:con="http://eviware.com/soapui/config">PC_WEB</con:entry><con:entry xmlns:con="http://eviware.com/soapui/config">ALIPAY</con:entry><con:entry xmlns:con="http://eviware.com/soapui/config">SHDR_DOMESTIC_BANK_CMB</con:entry><con:entry xmlns:con="http://eviware.com/soapui/config">cn</con:entry></xml-fragment>]]></row></con:configuration></con:dataSource><con:property>agentId</con:property><con:property>guestEmail</con:property><con:property>guestMobile</con:property><con:property>orderNo</con:property><con:property>orderAmount</con:property><con:property>orderSource</con:property><con:property>currency</con:property><con:property>language</con:property><con:property>payChannel</con:property><con:property>payOption</con:property><con:property>bankName</con:property><con:property>region</con:property><con:restartOnRun>true</con:restartOnRun></con:config></con:testStep><con:testStep type="groovy" name="generate orderNo" id="5baba130-9b92-4468-b6c2-70f9e3f89bbe"><con:settings/><con:config><script>import java.text.SimpleDateFormat;

def today = new Date()
def format = new SimpleDateFormat();
format = new SimpleDateFormat("yyyyMMddkkmmssSSS");
def DateToStr = format.format(today);

log.info DateToStr
return DateToStr</script></con:config></con:testStep><con:testStep type="restrequest" name="createSession request" id="8a077c72-c27b-4e16-b069-6d0e3f3a4bf9"><con:settings/><con:config service="PaymentMiddleware" resourcePath="/payment-middleware-service/sessions" methodName="Sessions" xsi:type="con:RestRequestStep" xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance"><con:restRequest name="createSession request" id="ac10df94-13d9-4eb3-9c59-7dd8a7e807e1" mediaType="application/json" postQueryString="false"><con:settings><con:setting id="com.eviware.soapui.impl.wsdl.WsdlRequest@request-headers">&lt;xml-fragment/></con:setting></con:settings><con:endpoint>http://68.71.208.254:8080</con:endpoint><con:request>{
    "agentId" : "${agentId}",
    "orderNo" : "${orderNo}",
    "products":[    
        {"description" : "Adult one day part ticket for date 2016-09-15","unitPrice" : 100.00,"qty" : 2, "type" : "PARK_TICKET"},
        {"description" : "Child one day part ticket for date 2016-09-15","unitPrice" : 75.00,"qty" : 3, "type" : "PARK_TICKET"}
    ],
    "orderAmount" : "${orderAmount}",
    "orderSource" : "${orderSource}",
    "currency" : "${currency}"
}</con:request><con:originalUri>http://68.71.208.254/payment-middleware-service/sessions</con:originalUri><con:assertion type="JsonPath Match" id="6c934317-5f11-4bc6-9579-3f69cd4aa632" name="Match content of [orderAmount]"><con:configuration><path>$.sessionInfo.orderAmount</path><content>${DataSource#orderAmount}</content><allowWildcards>false</allowWildcards><ignoreNamspaceDifferences>false</ignoreNamspaceDifferences><ignoreComments>false</ignoreComments></con:configuration></con:assertion><con:assertion type="JsonPath Match" id="ce8eb01a-26fb-4e06-a9b1-e6f6a0b897ba" name="Match content of [links]"><con:configuration><path>$.links</path><content>{"cancelSession":{"rel":"related","href":"http://*/payment-middleware-service/session/*","type":"text/plain"},"getSession":{"rel":"related","href":"http://*/payment-middleware-service/session/*","type":"application/json"},"createTransaction":{"rel":"related","href":"http://*/payment-middleware-service/session/*/transactions","type":"application/json"}}</content><allowWildcards>true</allowWildcards><ignoreNamspaceDifferences>false</ignoreNamspaceDifferences><ignoreComments>false</ignoreComments></con:configuration></con:assertion><con:credentials><con:username xsi:nil="true"/><con:password xsi:nil="true"/><con:domain xsi:nil="true"/><con:selectedAuthProfile>No Authorization</con:selectedAuthProfile><con:authType>No Authorization</con:authType></con:credentials><con:jmsConfig JMSDeliveryMode="PERSISTENT"/><con:jmsPropertyConfig/><con:parameters>
  <con:entry key="orderSource" value="${DataSource#orderSource}"/>
  <con:entry key="agentId" value="${DataSource#agentId}"/>
  <con:entry key="orderNo" value="${generate orderNo#result}"/>
  <con:entry key="orderAmount" value="${DataSource#orderAmount}"/>
  <con:entry key="guestMobile" value="${DataSource#guestMobile}"/>
  <con:entry key="currency" value="${DataSource#currency}"/>
  <con:entry key="guestEmail" value="${DataSource#guestEmail}"/>
</con:parameters><con:parameterOrder><con:entry>agentId</con:entry><con:entry>guestEmail</con:entry><con:entry>guestMobile</con:entry><con:entry>orderNo</con:entry><con:entry>orderAmount</con:entry><con:entry>orderSource</con:entry><con:entry>currency</con:entry><con:entry>payTtl</con:entry><con:entry>notifyUrl</con:entry><con:entry>guestSwid</con:entry><con:entry>returnUrl</con:entry></con:parameterOrder></con:restRequest></con:config></con:testStep><con:testStep type="restrequest" name="createTransaction" id="91be767e-4fd9-458d-a47c-1193b694318b"><con:settings/><con:config service="PaymentMiddleware" resourcePath="/payment-middleware-service/session/{sessionId}/transactions" methodName="Method 1" xsi:type="con:RestRequestStep" xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance"><con:restRequest name="createTransaction" id="2e9068e2-c308-4c81-90f3-30ec3896b43c" mediaType="application/json" postQueryString="false"><con:settings><con:setting id="com.eviware.soapui.impl.wsdl.WsdlRequest@request-headers">&lt;xml-fragment/></con:setting></con:settings><con:endpoint>http://68.71.208.254:8080</con:endpoint><con:request>{
    "region" : "${region}",
    "payChannel" : "${payChannel}",
    "payOption" : "${payOption}",
    "bankName" : "${bankName}"
}</con:request><con:originalUri>http://68.71.208.254/payment-middleware-service/session//transactions</con:originalUri><con:assertion type="JsonPath Match" id="5359c8c4-b42b-4644-a878-ce592e97c7cb" name="Match content of [href]"><con:configuration><path>$.href</path><content>https://*</content><allowWildcards>true</allowWildcards><ignoreNamspaceDifferences>false</ignoreNamspaceDifferences><ignoreComments>false</ignoreComments></con:configuration></con:assertion><con:assertion type="JsonPath Match" id="19a9b6f6-3166-447f-a235-a8f896906836" name="Match content of [method]"><con:configuration><path>$.method</path><content>POST</content><allowWildcards>false</allowWildcards><ignoreNamspaceDifferences>false</ignoreNamspaceDifferences><ignoreComments>false</ignoreComments></con:configuration></con:assertion><con:assertion type="JsonPath Existence Match" id="2d1a9429-c5fe-4709-a1d0-908dd305cd4d" name="Check for existence of [params]"><con:configuration><path>$.params</path><content>true</content><allowWildcards>false</allowWildcards><ignoreNamspaceDifferences>false</ignoreNamspaceDifferences><ignoreComments>false</ignoreComments></con:configuration></con:assertion><con:credentials><con:username xsi:nil="true"/><con:password xsi:nil="true"/><con:domain xsi:nil="true"/><con:selectedAuthProfile>No Authorization</con:selectedAuthProfile><con:authType>No Authorization</con:authType></con:credentials><con:jmsConfig JMSDeliveryMode="PERSISTENT"/><con:parameters>
  <con:entry key="payOption" value="${DataSource#payOption}"/>
  <con:entry key="payChannel" value="${DataSource#payChannel}"/>
  <con:entry key="sessionId" value="${createSession request#Response#$.sessionInfo.sessionId}"/>
  <con:entry key="Accept-Language" value="${DataSource#language}"/>
  <con:entry key="region" value="${DataSource#region}"/>
</con:parameters><con:parameterOrder><con:entry>sessionId</con:entry><con:entry>Accept-Language</con:entry><con:entry>payChannel</con:entry><con:entry>payOption</con:entry><con:entry>bankName</con:entry><con:entry>region</con:entry><con:entry>X-CIP</con:entry></con:parameterOrder></con:restRequest></con:config></con:testStep><con:testStep type="restrequest" name="dup createTransaction" id="88cc040c-48d9-4f23-a53d-f223306848c5"><con:settings/><con:config service="PaymentMiddleware" resourcePath="/payment-middleware-service/session/{sessionId}/transactions" methodName="Method 1" xsi:type="con:RestRequestStep" xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance"><con:restRequest name="dup createTransaction" id="2e9068e2-c308-4c81-90f3-30ec3896b43c" mediaType="application/json" postQueryString="false"><con:settings><con:setting id="com.eviware.soapui.impl.wsdl.WsdlRequest@request-headers">&lt;xml-fragment/></con:setting></con:settings><con:endpoint>http://68.71.208.254:8080</con:endpoint><con:request>{
    "region" : "${region}",
    "payChannel" : "${payChannel}",
    "payOption" : "${payOption}",
    "bankName" : "${bankName}"
}</con:request><con:originalUri>http://68.71.208.254/payment-middleware-service/session//transactions</con:originalUri><con:assertion type="JsonPath Match" id="5359c8c4-b42b-4644-a878-ce592e97c7cb" name="Match content of [href]"><con:configuration><path>$.href</path><content>https://*</content><allowWildcards>true</allowWildcards><ignoreNamspaceDifferences>false</ignoreNamspaceDifferences><ignoreComments>false</ignoreComments></con:configuration></con:assertion><con:assertion type="JsonPath Match" id="19a9b6f6-3166-447f-a235-a8f896906836" name="Match content of [method]"><con:configuration><path>$.method</path><content>POST</content><allowWildcards>false</allowWildcards><ignoreNamspaceDifferences>false</ignoreNamspaceDifferences><ignoreComments>false</ignoreComments></con:configuration></con:assertion><con:assertion type="JsonPath Existence Match" id="2d1a9429-c5fe-4709-a1d0-908dd305cd4d" name="Check for existence of [params]"><con:configuration><path>$.params</path><content>true</content><allowWildcards>false</allowWildcards><ignoreNamspaceDifferences>false</ignoreNamspaceDifferences><ignoreComments>false</ignoreComments></con:configuration></con:assertion><con:credentials><con:username xsi:nil="true"/><con:password xsi:nil="true"/><con:domain xsi:nil="true"/><con:selectedAuthProfile>No Authorization</con:selectedAuthProfile><con:authType>No Authorization</con:authType></con:credentials><con:jmsConfig JMSDeliveryMode="PERSISTENT"/><con:parameters>
  <con:entry key="payOption" value="${DataSource#payOption}"/>
  <con:entry key="payChannel" value="${DataSource#payChannel}"/>
  <con:entry key="sessionId" value="${createSession request#Response#$.sessionInfo.sessionId}"/>
  <con:entry key="Accept-Language" value="${DataSource#language}"/>
  <con:entry key="region" value="${DataSource#region}"/>
</con:parameters><con:parameterOrder><con:entry>sessionId</con:entry><con:entry>Accept-Language</con:entry><con:entry>payChannel</con:entry><con:entry>payOption</con:entry><con:entry>bankName</con:entry><con:entry>region</con:entry><con:entry>X-CIP</con:entry></con:parameterOrder></con:restRequest></con:config></con:testStep><con:properties/><con:reportParameters/><con:breakPoints><con:testStepId>badd4032-90ea-4f32-81e1-f370a9f525e0</con:testStepId><con:status>NONE</con:status><con:properties/></con:breakPoints></con:testCase><con:testCase id="ca0d6918-a648-4ec6-9780-26c318dde1bd" failOnError="true" failTestCaseOnErrors="true" keepSession="false" maxResults="0" name="T08 X-CIP positive" searchProperties="true"><con:settings/><con:testStep type="datasource" name="DataSource" id="7a05fd8a-1c44-40eb-adec-7ea018f7d383"><con:settings/><con:config xsi:type="con:DataSourceStep" xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance"><con:dataSource type="Grid"><con:configuration><check><![CDATA[<xml-fragment><con:entry xmlns:con="http://eviware.com/soapui/config">true</con:entry><con:entry xmlns:con="http://eviware.com/soapui/config">true</con:entry></xml-fragment>]]></check><row><![CDATA[<xml-fragment><con:entry xmlns:con="http://eviware.com/soapui/config">3452344444332</con:entry><con:entry xmlns:con="http://eviware.com/soapui/config"/><con:entry xmlns:con="http://eviware.com/soapui/config"/><con:entry xmlns:con="http://eviware.com/soapui/config"/><con:entry xmlns:con="http://eviware.com/soapui/config">0.01</con:entry><con:entry xmlns:con="http://eviware.com/soapui/config">TICKETING</con:entry><con:entry xmlns:con="http://eviware.com/soapui/config">CNY</con:entry><con:entry xmlns:con="http://eviware.com/soapui/config">zh-cn</con:entry><con:entry xmlns:con="http://eviware.com/soapui/config">PC_WEB</con:entry><con:entry xmlns:con="http://eviware.com/soapui/config">ALIPAY</con:entry><con:entry xmlns:con="http://eviware.com/soapui/config">cn</con:entry><con:entry xmlns:con="http://eviware.com/soapui/config">http://10.131.245.229:8080/payment-middleware-psp-alipay-simulator/gateway</con:entry><con:entry xmlns:con="http://eviware.com/soapui/config">10.131.245.229</con:entry></xml-fragment>]]></row><row><![CDATA[<xml-fragment><con:entry xmlns:con="http://eviware.com/soapui/config">3452344444332</con:entry><con:entry xmlns:con="http://eviware.com/soapui/config"/><con:entry xmlns:con="http://eviware.com/soapui/config"/><con:entry xmlns:con="http://eviware.com/soapui/config"/><con:entry xmlns:con="http://eviware.com/soapui/config">1000.02</con:entry><con:entry xmlns:con="http://eviware.com/soapui/config">LODGING</con:entry><con:entry xmlns:con="http://eviware.com/soapui/config">CNY</con:entry><con:entry xmlns:con="http://eviware.com/soapui/config">en</con:entry><con:entry xmlns:con="http://eviware.com/soapui/config">MOBILE_WEB</con:entry><con:entry xmlns:con="http://eviware.com/soapui/config">CALLBACK</con:entry><con:entry xmlns:con="http://eviware.com/soapui/config">cn</con:entry><con:entry xmlns:con="http://eviware.com/soapui/config">http://10.131.245.229:8080/payment-middleware-psp-alipay-simulator/gateway</con:entry><con:entry xmlns:con="http://eviware.com/soapui/config">10.131.245.229</con:entry></xml-fragment>]]></row></con:configuration></con:dataSource><con:property>agentId</con:property><con:property>guestEmail</con:property><con:property>guestMobile</con:property><con:property>orderNo</con:property><con:property>orderAmount</con:property><con:property>orderSource</con:property><con:property>currency</con:property><con:property>language</con:property><con:property>payChannel</con:property><con:property>payOption</con:property><con:property>region</con:property><con:property>notifyUrl</con:property><con:property>X-CIP</con:property><con:restartOnRun>true</con:restartOnRun></con:config></con:testStep><con:testStep type="groovy" name="generate orderNo" id="b5461933-f6bc-4654-8c2d-e894b6529fd1"><con:settings/><con:config><script>import java.text.SimpleDateFormat;

def today = new Date()
def format = new SimpleDateFormat();
format = new SimpleDateFormat("yyyyMMddkkmmssSSS");
def DateToStr = format.format(today);

log.info DateToStr
return DateToStr</script></con:config></con:testStep><con:testStep type="restrequest" name="createSession request" id="52faff87-874b-42b4-97cd-e37ca8a358e0"><con:settings/><con:config service="PaymentMiddleware" resourcePath="/payment-middleware-service/sessions" methodName="Sessions" xsi:type="con:RestRequestStep" xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance"><con:restRequest name="createSession request" id="ac10df94-13d9-4eb3-9c59-7dd8a7e807e1" mediaType="application/json" postQueryString="false"><con:settings><con:setting id="com.eviware.soapui.impl.wsdl.WsdlRequest@request-headers">&lt;xml-fragment/></con:setting></con:settings><con:endpoint>${#Project#ServiceEndpoint}</con:endpoint><con:request>{
    "agentId" : "${agentId}",
    "orderNo" : "${orderNo}",
    "products":[    
        {"description" : "Adult one day part ticket for date 2016-09-15","unitPrice" : 100.00,"qty" : 2, "type" : "PARK_TICKET"},
        {"description" : "Child one day part ticket for date 2016-09-15","unitPrice" : 75.00,"qty" : 3, "type" : "PARK_TICKET"}
    ],
    "orderAmount" : "${orderAmount}",
    "orderSource" : "${orderSource}",
    "currency" : "${currency}"
}</con:request><con:originalUri>http://68.71.208.254/payment-middleware-service/sessions</con:originalUri><con:assertion type="JsonPath Match" id="eb067ffb-fa50-4656-b144-0eeab7277d49" name="SessionInfo Match"><con:configuration><path>$.sessionInfo</path><content>{"sessionId":"*","orderNo":"*","orderSource":"*","orderAmount":"*","currency":"*","state":"UNPAID","remark":null,"agentId":"*","guestMobile":null,"guestEmail":null,"guestSwid":null,"createdDate":"*","payTtl":*,"lastModifiedDate":"*","notifyUrl":null,"returnUrl":null}</content><allowWildcards>true</allowWildcards><ignoreNamspaceDifferences>false</ignoreNamspaceDifferences><ignoreComments>false</ignoreComments></con:configuration></con:assertion><con:credentials><con:username xsi:nil="true"/><con:password xsi:nil="true"/><con:domain xsi:nil="true"/><con:selectedAuthProfile>No Authorization</con:selectedAuthProfile><con:authType>No Authorization</con:authType></con:credentials><con:jmsConfig JMSDeliveryMode="PERSISTENT"/><con:jmsPropertyConfig/><con:parameters>
  <con:entry key="orderSource" value="${DataSource#orderSource}"/>
  <con:entry key="agentId" value="${DataSource#agentId}"/>
  <con:entry key="orderNo" value="${generate orderNo#result}"/>
  <con:entry key="orderAmount" value="${DataSource#orderAmount}"/>
  <con:entry key="guestMobile" value="${DataSource#guestMobile}"/>
  <con:entry key="notifyUrl" value="${DataSource#notifyUrl}"/>
  <con:entry key="currency" value="${DataSource#currency}"/>
  <con:entry key="guestEmail" value="${DataSource#guestEmail}"/>
</con:parameters><con:parameterOrder><con:entry>agentId</con:entry><con:entry>guestEmail</con:entry><con:entry>guestMobile</con:entry><con:entry>orderNo</con:entry><con:entry>orderAmount</con:entry><con:entry>orderSource</con:entry><con:entry>currency</con:entry><con:entry>payTtl</con:entry><con:entry>notifyUrl</con:entry><con:entry>guestSwid</con:entry><con:entry>returnUrl</con:entry></con:parameterOrder></con:restRequest></con:config></con:testStep><con:testStep type="restrequest" name="createTransaction" id="a3cb8848-2f8f-4f70-bb77-b1a8ed17d9ab"><con:settings/><con:config service="PaymentMiddleware" resourcePath="/payment-middleware-service/session/{sessionId}/transactions" methodName="Method 1" xsi:type="con:RestRequestStep" xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance"><con:restRequest name="createTransaction" id="2e9068e2-c308-4c81-90f3-30ec3896b43c" mediaType="application/json" postQueryString="false"><con:settings><con:setting id="com.eviware.soapui.impl.wsdl.WsdlRequest@request-headers">&lt;xml-fragment/></con:setting></con:settings><con:endpoint>${#Project#ServiceEndpoint}</con:endpoint><con:request>{
   "payChannel": "${payChannel}",
   "payOption": "${payOption}",
   "region": "${region}"
}</con:request><con:originalUri>http://68.71.208.254/payment-middleware-service/session//transactions</con:originalUri><con:assertion type="JsonPath Match" id="5359c8c4-b42b-4644-a878-ce592e97c7cb" name="Match content of [href]"><con:configuration><path>$.href</path><content>https://*</content><allowWildcards>true</allowWildcards><ignoreNamspaceDifferences>false</ignoreNamspaceDifferences><ignoreComments>false</ignoreComments></con:configuration></con:assertion><con:assertion type="JsonPath Match" id="19a9b6f6-3166-447f-a235-a8f896906836" name="Match content of [method]"><con:configuration><path>$.method</path><content>POST</content><allowWildcards>false</allowWildcards><ignoreNamspaceDifferences>false</ignoreNamspaceDifferences><ignoreComments>false</ignoreComments></con:configuration></con:assertion><con:assertion type="JsonPath Existence Match" id="2d1a9429-c5fe-4709-a1d0-908dd305cd4d" name="Check for existence of [params]"><con:configuration><path>$.params</path><content>true</content><allowWildcards>false</allowWildcards><ignoreNamspaceDifferences>false</ignoreNamspaceDifferences><ignoreComments>false</ignoreComments></con:configuration></con:assertion><con:credentials><con:username xsi:nil="true"/><con:password xsi:nil="true"/><con:domain xsi:nil="true"/><con:selectedAuthProfile>No Authorization</con:selectedAuthProfile><con:authType>No Authorization</con:authType></con:credentials><con:jmsConfig JMSDeliveryMode="PERSISTENT"/><con:parameters>
  <con:entry key="X-CIP" value="${DataSource#X-CIP}"/>
  <con:entry key="payOption" value="${DataSource#payOption}"/>
  <con:entry key="payChannel" value="${DataSource#payChannel}"/>
  <con:entry key="sessionId" value="${createSession request#Response#$.sessionInfo.sessionId}"/>
  <con:entry key="Accept-Language" value="${DataSource#language}"/>
  <con:entry key="region" value="${DataSource#region}"/>
</con:parameters><con:parameterOrder><con:entry>sessionId</con:entry><con:entry>Accept-Language</con:entry><con:entry>payChannel</con:entry><con:entry>payOption</con:entry><con:entry>bankName</con:entry><con:entry>region</con:entry><con:entry>X-CIP</con:entry></con:parameterOrder></con:restRequest></con:config></con:testStep><con:testStep type="datasourceloop" name="DataSource Loop" id="9c23c09d-263e-4f30-bac2-70d5d04c1cb9"><con:settings/><con:config><dataSourceStep>DataSource</dataSourceStep><targetStep>generate orderNo</targetStep></con:config></con:testStep><con:properties/><con:reportParameters/><con:breakPoints><con:testStepId>b9a1c3e9-680b-489d-8fad-870ac0a0df1d</con:testStepId><con:status>NONE</con:status><con:properties/></con:breakPoints><con:breakPoints><con:testStepId>3d515ed7-c11b-4c15-94fa-289b7837db96</con:testStepId><con:status>NONE</con:status><con:properties/></con:breakPoints><con:breakPoints><con:testStepId>d751d004-0672-4c2b-9f20-6aea7ea10277</con:testStepId><con:status>NONE</con:status><con:properties/></con:breakPoints></con:testCase><con:properties/><con:reportParameters/></con:testSuite><con:testSuite id="c67ed7a5-acec-401b-87e5-c5b3d9888e77" name="Combined"><con:settings/><con:runType>SEQUENTIAL</con:runType><con:testCase id="7da82314-e09d-4a0c-82ca-03844c9af13d" failOnError="true" failTestCaseOnErrors="true" keepSession="false" name="T01 agentId positive" searchProperties="true" maxResults="0"><con:settings/><con:testStep type="groovy" name="generate orderNo" id="061d81fa-ff4e-428c-8b90-0b7c5604343f"><con:settings/><con:config><script>import java.text.SimpleDateFormat;

def today = new Date()
def format = new SimpleDateFormat();
format = new SimpleDateFormat("yyyyMMddkkmmssSSS");
def DateToStr = format.format(today);

log.info DateToStr
return DateToStr</script></con:config></con:testStep><con:testStep type="datasource" name="DataSource" id="41ec187e-ed17-4d8d-9c48-b362fcca165b"><con:settings/><con:config xsi:type="con:DataSourceStep" xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance"><con:dataSource type="Grid"><con:configuration><check>&lt;con:entry xmlns:con="http://eviware.com/soapui/config">true&lt;/con:entry></check><row><![CDATA[<xml-fragment><con:entry xmlns:con="http://eviware.com/soapui/config">zh-cn</con:entry><con:entry xmlns:con="http://eviware.com/soapui/config">3452344444332</con:entry><con:entry xmlns:con="http://eviware.com/soapui/config"/><con:entry xmlns:con="http://eviware.com/soapui/config"/><con:entry xmlns:con="http://eviware.com/soapui/config"/><con:entry xmlns:con="http://eviware.com/soapui/config">${generate orderNo#result}</con:entry><con:entry xmlns:con="http://eviware.com/soapui/config">1000.00</con:entry><con:entry xmlns:con="http://eviware.com/soapui/config">TICKETING</con:entry><con:entry xmlns:con="http://eviware.com/soapui/config">CNY</con:entry><con:entry xmlns:con="http://eviware.com/soapui/config"/><con:entry xmlns:con="http://eviware.com/soapui/config"/><con:entry xmlns:con="http://eviware.com/soapui/config"/><con:entry xmlns:con="http://eviware.com/soapui/config">cn</con:entry><con:entry xmlns:con="http://eviware.com/soapui/config">PC_WEB</con:entry><con:entry xmlns:con="http://eviware.com/soapui/config"/><con:entry xmlns:con="http://eviware.com/soapui/config">ALIPAY</con:entry></xml-fragment>]]></row></con:configuration></con:dataSource><con:property>Accept-Language</con:property><con:property>agentId</con:property><con:property>guestEmail</con:property><con:property>guestMobile</con:property><con:property>guestSwid</con:property><con:property>orderNo</con:property><con:property>orderAmount</con:property><con:property>orderSource</con:property><con:property>currency</con:property><con:property>payTtl</con:property><con:property>notifyUrl</con:property><con:property>returnUrl</con:property><con:property>region</con:property><con:property>payChannel</con:property><con:property>bankName</con:property><con:property>payOption</con:property><con:restartOnRun>true</con:restartOnRun></con:config></con:testStep><con:testStep type="restrequest" name="CreateCombinedTransaction" id="50403509-d5a0-4ce6-a131-8f9872e1594b"><con:settings/><con:config service="PaymentMiddleware" resourcePath="/payment-middleware-service/transactions/combined" methodName="Method 1" xsi:type="con:RestRequestStep" xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance"><con:restRequest name="CreateCombinedTransaction" id="37607dca-b5c5-490a-9910-01c664282dd1" mediaType="application/json" postQueryString="false"><con:settings><con:setting id="com.eviware.soapui.impl.wsdl.WsdlRequest@request-headers">&lt;xml-fragment/></con:setting></con:settings><con:request>{
    "agentId" : "${agentId}",
    "orderNo" : "${orderNo}",
    "products":[    
        {"description" : "Adult one day part ticket for date 2016-09-15","unitPrice" : 100.00,"qty" : 2, "type" : "PARK_TICKET"},
        {"description" : "Child one day part ticket for date 2016-09-15","unitPrice" : 75.00,"qty" : 3, "type" : "PARK_TICKET"}
    ],
    "orderAmount" : "${orderAmount}",
    "orderSource" : "${orderSource}",
    "currency" : "${currency}",
    "region" : "${region}",
    "payChannel" : "${payChannel}",
    "payOption" : "${payOption}"
}</con:request><con:originalUri>https://latest.payment-middleware-service-lite.nap7.wdpro.disney.com/payment-middleware-service/transactions/combined</con:originalUri><con:assertion type="Valid HTTP Status Codes" id="f5c3e3ec-2372-4786-a189-fbb9e7738043" name="Valid HTTP Status Codes"><con:settings/><con:configuration><codes>200
</codes></con:configuration></con:assertion><con:assertion type="JsonPath Match" id="db68fef4-b052-4f1d-a4ad-b425a2afce63" name="Match content of [sessionInfo]"><con:configuration><path>$.sessionDetail.sessionInfo</path><content>{"sessionId":"*","orderNo":"*","orderSource":"*","orderAmount":"*","currency":"*","state":"UNPAID","remark":null,"agentId":"*","guestMobile":null,"guestEmail":null,"guestSwid":null,"createdDate":"*","payTtl":30,"lastModifiedDate":"*","notifyUrl":null,"returnUrl":null}</content><allowWildcards>true</allowWildcards><ignoreNamspaceDifferences>false</ignoreNamspaceDifferences><ignoreComments>false</ignoreComments></con:configuration></con:assertion><con:assertion type="JsonPath Match" id="b1cc2732-a6c9-45f8-8cc1-21d15fb817df" name="Match content of [links]"><con:configuration><path>$.sessionDetail.links</path><content>{"cancelSession":{"rel":"related","href":"http*","type":"text/plain"},"getSession":{"rel":"related","href":"http*","type":"application/json"},"createTransaction":{"rel":"related","href":"http*","type":"application/json"}}</content><allowWildcards>true</allowWildcards><ignoreNamspaceDifferences>false</ignoreNamspaceDifferences><ignoreComments>false</ignoreComments></con:configuration></con:assertion><con:assertion type="JsonPath Match" id="8021ebdf-9fb3-4e52-9942-34e6169232e0" name="Match content of [redirectInfo]"><con:configuration><path>$.redirectInfo</path><content>{"href":"http*","params":{*},"method":"POST"}</content><allowWildcards>true</allowWildcards><ignoreNamspaceDifferences>false</ignoreNamspaceDifferences><ignoreComments>false</ignoreComments></con:configuration></con:assertion><con:credentials><con:selectedAuthProfile>No Authorization</con:selectedAuthProfile><con:authType>No Authorization</con:authType></con:credentials><con:jmsConfig JMSDeliveryMode="PERSISTENT"/><con:parameters>
  <con:entry key="agentId" value="${DataSource#agentId}"/>
  <con:entry key="orderSource" value="${DataSource#orderSource}"/>
  <con:entry key="orderNo" value="${DataSource#orderNo}"/>
  <con:entry key="guestMobile" value="${DataSource#guestMobile}"/>
  <con:entry key="payTtl" value="${DataSource#payTtl}"/>
  <con:entry key="bankName" value="${DataSource#bankName}"/>
  <con:entry key="guestEmail" value="${DataSource#guestEmail}"/>
  <con:entry key="orderAmount" value="${DataSource#orderAmount}"/>
  <con:entry key="guestSwid" value="${DataSource#guestSwid}"/>
  <con:entry key="payOption" value="${DataSource#payOption}"/>
  <con:entry key="notifyUrl" value="${DataSource#notifyUrl}"/>
  <con:entry key="currency" value="${DataSource#currency}"/>
  <con:entry key="payChannel" value="${DataSource#payChannel}"/>
  <con:entry key="Accept-Language" value="${DataSource#Accept-Language}"/>
  <con:entry key="region" value="${DataSource#region}"/>
  <con:entry key="returnUrl" value="${DataSource#returnUrl}"/>
</con:parameters><con:parameterOrder><con:entry>Accept-Language</con:entry><con:entry>agentId</con:entry><con:entry>guestEmail</con:entry><con:entry>guestMobile</con:entry><con:entry>guestSwid</con:entry><con:entry>orderNo</con:entry><con:entry>orderAmount</con:entry><con:entry>orderSource</con:entry><con:entry>currency</con:entry><con:entry>payTtl</con:entry><con:entry>notifyUrl</con:entry><con:entry>returnUrl</con:entry><con:entry>region</con:entry><con:entry>payChannel</con:entry><con:entry>bankName</con:entry><con:entry>payOption</con:entry></con:parameterOrder></con:restRequest></con:config></con:testStep><con:properties/><con:reportParameters/></con:testCase><con:testCase id="25f25bd5-1117-4e87-b15a-cdd172532de1" failOnError="true" failTestCaseOnErrors="true" keepSession="false" name="T02 agentId,guestEmail,guestMobile empty" searchProperties="true" maxResults="0"><con:settings/><con:testStep type="groovy" name="generate orderNo" id="85b22321-038b-44ba-9b54-aec47d187571"><con:settings/><con:config><script>import java.text.SimpleDateFormat;

def today = new Date()
def format = new SimpleDateFormat();
format = new SimpleDateFormat("yyyyMMddkkmmssSSS");
def DateToStr = format.format(today);

log.info DateToStr
return DateToStr</script></con:config></con:testStep><con:testStep type="datasource" name="DataSource" id="18894e71-db45-4d30-8251-59a98c3b23da"><con:settings/><con:config xsi:type="con:DataSourceStep" xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance"><con:dataSource type="Grid"><con:configuration><check>&lt;con:entry xmlns:con="http://eviware.com/soapui/config">true&lt;/con:entry></check><row><![CDATA[<xml-fragment><con:entry xmlns:con="http://eviware.com/soapui/config">zh-cn</con:entry><con:entry xmlns:con="http://eviware.com/soapui/config"/><con:entry xmlns:con="http://eviware.com/soapui/config"/><con:entry xmlns:con="http://eviware.com/soapui/config"/><con:entry xmlns:con="http://eviware.com/soapui/config"/><con:entry xmlns:con="http://eviware.com/soapui/config">${generate orderNo#result}</con:entry><con:entry xmlns:con="http://eviware.com/soapui/config">1000.00</con:entry><con:entry xmlns:con="http://eviware.com/soapui/config">TICKETING</con:entry><con:entry xmlns:con="http://eviware.com/soapui/config">CNY</con:entry><con:entry xmlns:con="http://eviware.com/soapui/config"/><con:entry xmlns:con="http://eviware.com/soapui/config"/><con:entry xmlns:con="http://eviware.com/soapui/config"/><con:entry xmlns:con="http://eviware.com/soapui/config">cn</con:entry><con:entry xmlns:con="http://eviware.com/soapui/config">PC_WEB</con:entry><con:entry xmlns:con="http://eviware.com/soapui/config"/><con:entry xmlns:con="http://eviware.com/soapui/config">ALIPAY</con:entry></xml-fragment>]]></row></con:configuration></con:dataSource><con:property>Accept-Language</con:property><con:property>agentId</con:property><con:property>guestEmail</con:property><con:property>guestMobile</con:property><con:property>guestSwid</con:property><con:property>orderNo</con:property><con:property>orderAmount</con:property><con:property>orderSource</con:property><con:property>currency</con:property><con:property>payTtl</con:property><con:property>notifyUrl</con:property><con:property>returnUrl</con:property><con:property>region</con:property><con:property>payChannel</con:property><con:property>bankName</con:property><con:property>payOption</con:property><con:restartOnRun>true</con:restartOnRun></con:config></con:testStep><con:testStep type="restrequest" name="CreateCombinedTransaction" id="f197aa13-9067-465b-8c59-119d268e1ca9"><con:settings/><con:config service="PaymentMiddleware" resourcePath="/payment-middleware-service/transactions/combined" methodName="Method 1" xsi:type="con:RestRequestStep" xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance"><con:restRequest name="CreateCombinedTransaction" id="37607dca-b5c5-490a-9910-01c664282dd1" mediaType="application/json" postQueryString="false"><con:settings><con:setting id="com.eviware.soapui.impl.wsdl.WsdlRequest@request-headers">&lt;xml-fragment/></con:setting></con:settings><con:request>{
    "orderNo" : "${orderNo}",
    "products":[    
        {"description" : "Adult one day part ticket for date 2016-09-15","unitPrice" : 100.00,"qty" : 2, "type" : "PARK_TICKET"},
        {"description" : "Child one day part ticket for date 2016-09-15","unitPrice" : 75.00,"qty" : 3, "type" : "PARK_TICKET"}
    ],
    "orderAmount" : "${orderAmount}",
    "orderSource" : "${orderSource}",
    "currency" : "${currency}",
    "region" : "${region}",
    "payChannel" : "${payChannel}",
    "payOption" : "${payOption}"
}</con:request><con:originalUri>https://latest.payment-middleware-service-lite.nap7.wdpro.disney.com/payment-middleware-service/transactions/combined</con:originalUri><con:assertion type="Valid HTTP Status Codes" id="f5c3e3ec-2372-4786-a189-fbb9e7738043" name="Valid HTTP Status Codes"><con:settings/><con:configuration><codes>400</codes></con:configuration></con:assertion><con:assertion type="Simple Equals" id="4d1ed315-4ce5-4b8e-bc9d-7bf7c5d76aca" name="Equals"><con:configuration><patternText>1012:guest email, guest mobile, guest swid and agent id are empty</patternText><caseSensitive>true</caseSensitive></con:configuration></con:assertion><con:credentials><con:selectedAuthProfile>No Authorization</con:selectedAuthProfile><con:authType>No Authorization</con:authType></con:credentials><con:jmsConfig JMSDeliveryMode="PERSISTENT"/><con:parameters>
  <con:entry key="agentId" value="${DataSource#agentId}"/>
  <con:entry key="orderSource" value="${DataSource#orderSource}"/>
  <con:entry key="orderNo" value="${DataSource#orderNo}"/>
  <con:entry key="guestMobile" value="${DataSource#guestMobile}"/>
  <con:entry key="payTtl" value="${DataSource#payTtl}"/>
  <con:entry key="bankName" value="${DataSource#bankName}"/>
  <con:entry key="guestEmail" value="${DataSource#guestEmail}"/>
  <con:entry key="orderAmount" value="${DataSource#orderAmount}"/>
  <con:entry key="guestSwid" value="${DataSource#guestSwid}"/>
  <con:entry key="payOption" value="${DataSource#payOption}"/>
  <con:entry key="notifyUrl" value="${DataSource#notifyUrl}"/>
  <con:entry key="currency" value="${DataSource#currency}"/>
  <con:entry key="payChannel" value="${DataSource#payChannel}"/>
  <con:entry key="Accept-Language" value="${DataSource#Accept-Language}"/>
  <con:entry key="region" value="${DataSource#region}"/>
  <con:entry key="returnUrl" value="${DataSource#returnUrl}"/>
</con:parameters><con:parameterOrder><con:entry>Accept-Language</con:entry><con:entry>agentId</con:entry><con:entry>guestEmail</con:entry><con:entry>guestMobile</con:entry><con:entry>guestSwid</con:entry><con:entry>orderNo</con:entry><con:entry>orderAmount</con:entry><con:entry>orderSource</con:entry><con:entry>currency</con:entry><con:entry>payTtl</con:entry><con:entry>notifyUrl</con:entry><con:entry>returnUrl</con:entry><con:entry>region</con:entry><con:entry>payChannel</con:entry><con:entry>bankName</con:entry><con:entry>payOption</con:entry></con:parameterOrder></con:restRequest></con:config></con:testStep><con:properties/><con:reportParameters/></con:testCase><con:testCase id="b1f47e9a-4343-4749-a0ea-d3d6af96bcac" failOnError="true" failTestCaseOnErrors="true" keepSession="false" maxResults="0" name="T03 guestEmail positive" searchProperties="true"><con:settings/><con:testStep type="groovy" name="generate orderNo" id="5191669c-0593-4a0f-910c-e0ffed3f1a3b"><con:settings/><con:config><script>import java.text.SimpleDateFormat;

def today = new Date()
def format = new SimpleDateFormat();
format = new SimpleDateFormat("yyyyMMddkkmmssSSS");
def DateToStr = format.format(today);

log.info DateToStr
return DateToStr</script></con:config></con:testStep><con:testStep type="datasource" name="DataSource" id="2c064e65-39d0-482b-9029-9317f056862d"><con:settings/><con:config xsi:type="con:DataSourceStep" xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance"><con:dataSource type="Grid"><con:configuration><check>&lt;con:entry xmlns:con="http://eviware.com/soapui/config">true&lt;/con:entry></check><row><![CDATA[<xml-fragment><con:entry xmlns:con="http://eviware.com/soapui/config">zh-cn</con:entry><con:entry xmlns:con="http://eviware.com/soapui/config">3452344444332</con:entry><con:entry xmlns:con="http://eviware.com/soapui/config">a@aa.com</con:entry><con:entry xmlns:con="http://eviware.com/soapui/config"/><con:entry xmlns:con="http://eviware.com/soapui/config"/><con:entry xmlns:con="http://eviware.com/soapui/config">${generate orderNo#result}</con:entry><con:entry xmlns:con="http://eviware.com/soapui/config">1000.00</con:entry><con:entry xmlns:con="http://eviware.com/soapui/config">TICKETING</con:entry><con:entry xmlns:con="http://eviware.com/soapui/config">CNY</con:entry><con:entry xmlns:con="http://eviware.com/soapui/config"/><con:entry xmlns:con="http://eviware.com/soapui/config"/><con:entry xmlns:con="http://eviware.com/soapui/config"/><con:entry xmlns:con="http://eviware.com/soapui/config">cn</con:entry><con:entry xmlns:con="http://eviware.com/soapui/config">PC_WEB</con:entry><con:entry xmlns:con="http://eviware.com/soapui/config"/><con:entry xmlns:con="http://eviware.com/soapui/config">ALIPAY</con:entry></xml-fragment>]]></row></con:configuration></con:dataSource><con:property>Accept-Language</con:property><con:property>agentId</con:property><con:property>guestEmail</con:property><con:property>guestMobile</con:property><con:property>guestSwid</con:property><con:property>orderNo</con:property><con:property>orderAmount</con:property><con:property>orderSource</con:property><con:property>currency</con:property><con:property>payTtl</con:property><con:property>notifyUrl</con:property><con:property>returnUrl</con:property><con:property>region</con:property><con:property>payChannel</con:property><con:property>bankName</con:property><con:property>payOption</con:property><con:restartOnRun>true</con:restartOnRun></con:config></con:testStep><con:testStep type="restrequest" name="CreateCombinedTransaction" id="02d3d637-03fa-4bd1-b816-d93a84167684"><con:settings/><con:config service="PaymentMiddleware" resourcePath="/payment-middleware-service/transactions/combined" methodName="Method 1" xsi:type="con:RestRequestStep" xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance"><con:restRequest name="CreateCombinedTransaction" id="37607dca-b5c5-490a-9910-01c664282dd1" mediaType="application/json" postQueryString="false"><con:settings><con:setting id="com.eviware.soapui.impl.wsdl.WsdlRequest@request-headers">&lt;xml-fragment/></con:setting></con:settings><con:request>{
    "guestEmail" : "${guestEmail}",
    "orderNo" : "${orderNo}",
    "products":[    
        {"description" : "Adult one day part ticket for date 2016-09-15","unitPrice" : 100.00,"qty" : 2, "type" : "PARK_TICKET"},
        {"description" : "Child one day part ticket for date 2016-09-15","unitPrice" : 75.00,"qty" : 3, "type" : "PARK_TICKET"}
    ],
    "orderAmount" : "${orderAmount}",
    "orderSource" : "${orderSource}",
    "currency" : "${currency}",
    "region" : "${region}",
    "payChannel" : "${payChannel}",
    "payOption" : "${payOption}"
}</con:request><con:originalUri>https://latest.payment-middleware-service-lite.nap7.wdpro.disney.com/payment-middleware-service/transactions/combined</con:originalUri><con:assertion type="Valid HTTP Status Codes" id="f5c3e3ec-2372-4786-a189-fbb9e7738043" name="Valid HTTP Status Codes"><con:settings/><con:configuration><codes>200
</codes></con:configuration></con:assertion><con:assertion type="JsonPath Match" id="db68fef4-b052-4f1d-a4ad-b425a2afce63" name="Match content of [sessionInfo]"><con:configuration><path>$.sessionDetail.sessionInfo</path><content>{"sessionId":"*","orderNo":"*","orderSource":"*","orderAmount":"*","currency":"*","state":"UNPAID","remark":null,"agentId":null,"guestMobile":null,"guestEmail":"*","guestSwid":null,"createdDate":"*","payTtl":30,"lastModifiedDate":"*","notifyUrl":null,"returnUrl":null}</content><allowWildcards>true</allowWildcards><ignoreNamspaceDifferences>false</ignoreNamspaceDifferences><ignoreComments>false</ignoreComments></con:configuration></con:assertion><con:assertion type="JsonPath Match" id="b1cc2732-a6c9-45f8-8cc1-21d15fb817df" name="Match content of [links]"><con:configuration><path>$.sessionDetail.links</path><content>{"cancelSession":{"rel":"related","href":"http*","type":"text/plain"},"getSession":{"rel":"related","href":"http*","type":"application/json"},"createTransaction":{"rel":"related","href":"http*","type":"application/json"}}</content><allowWildcards>true</allowWildcards><ignoreNamspaceDifferences>false</ignoreNamspaceDifferences><ignoreComments>false</ignoreComments></con:configuration></con:assertion><con:assertion type="JsonPath Match" id="8021ebdf-9fb3-4e52-9942-34e6169232e0" name="Match content of [redirectInfo]"><con:configuration><path>$.redirectInfo</path><content>{"href":"http*","params":{*},"method":"POST"}</content><allowWildcards>true</allowWildcards><ignoreNamspaceDifferences>false</ignoreNamspaceDifferences><ignoreComments>false</ignoreComments></con:configuration></con:assertion><con:credentials><con:selectedAuthProfile>No Authorization</con:selectedAuthProfile><con:authType>No Authorization</con:authType></con:credentials><con:jmsConfig JMSDeliveryMode="PERSISTENT"/><con:parameters>
  <con:entry key="agentId" value="${DataSource#agentId}"/>
  <con:entry key="orderSource" value="${DataSource#orderSource}"/>
  <con:entry key="orderNo" value="${DataSource#orderNo}"/>
  <con:entry key="guestMobile" value="${DataSource#guestMobile}"/>
  <con:entry key="payTtl" value="${DataSource#payTtl}"/>
  <con:entry key="bankName" value="${DataSource#bankName}"/>
  <con:entry key="guestEmail" value="${DataSource#guestEmail}"/>
  <con:entry key="orderAmount" value="${DataSource#orderAmount}"/>
  <con:entry key="guestSwid" value="${DataSource#guestSwid}"/>
  <con:entry key="payOption" value="${DataSource#payOption}"/>
  <con:entry key="notifyUrl" value="${DataSource#notifyUrl}"/>
  <con:entry key="currency" value="${DataSource#currency}"/>
  <con:entry key="payChannel" value="${DataSource#payChannel}"/>
  <con:entry key="Accept-Language" value="${DataSource#Accept-Language}"/>
  <con:entry key="region" value="${DataSource#region}"/>
  <con:entry key="returnUrl" value="${DataSource#returnUrl}"/>
</con:parameters><con:parameterOrder><con:entry>Accept-Language</con:entry><con:entry>agentId</con:entry><con:entry>guestEmail</con:entry><con:entry>guestMobile</con:entry><con:entry>guestSwid</con:entry><con:entry>orderNo</con:entry><con:entry>orderAmount</con:entry><con:entry>orderSource</con:entry><con:entry>currency</con:entry><con:entry>payTtl</con:entry><con:entry>notifyUrl</con:entry><con:entry>returnUrl</con:entry><con:entry>region</con:entry><con:entry>payChannel</con:entry><con:entry>bankName</con:entry><con:entry>payOption</con:entry></con:parameterOrder></con:restRequest></con:config></con:testStep><con:properties/><con:reportParameters/><con:breakPoints><con:testStepId>2c064e65-39d0-482b-9029-9317f056862d</con:testStepId><con:status>NONE</con:status><con:properties/></con:breakPoints></con:testCase><con:testCase id="7effd843-5dc5-4419-bb62-414a970296c7" failOnError="true" failTestCaseOnErrors="true" keepSession="false" maxResults="0" name="T04 guestSwid positive" searchProperties="true"><con:settings/><con:testStep type="groovy" name="generate orderNo" id="e8be3ff0-de8f-447e-b164-340ff9a425ce"><con:settings/><con:config><script>import java.text.SimpleDateFormat;

def today = new Date()
def format = new SimpleDateFormat();
format = new SimpleDateFormat("yyyyMMddkkmmssSSS");
def DateToStr = format.format(today);

log.info DateToStr
return DateToStr</script></con:config></con:testStep><con:testStep type="datasource" name="DataSource" id="9bd124d0-47b4-40ea-91c9-b3d43f86f5f1"><con:settings/><con:config xsi:type="con:DataSourceStep" xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance"><con:dataSource type="Grid"><con:configuration><check>&lt;con:entry xmlns:con="http://eviware.com/soapui/config">true&lt;/con:entry></check><row><![CDATA[<xml-fragment><con:entry xmlns:con="http://eviware.com/soapui/config">zh-cn</con:entry><con:entry xmlns:con="http://eviware.com/soapui/config">3452344444332</con:entry><con:entry xmlns:con="http://eviware.com/soapui/config"/><con:entry xmlns:con="http://eviware.com/soapui/config"/><con:entry xmlns:con="http://eviware.com/soapui/config">1111</con:entry><con:entry xmlns:con="http://eviware.com/soapui/config">${generate orderNo#result}</con:entry><con:entry xmlns:con="http://eviware.com/soapui/config">1000.00</con:entry><con:entry xmlns:con="http://eviware.com/soapui/config">TICKETING</con:entry><con:entry xmlns:con="http://eviware.com/soapui/config">CNY</con:entry><con:entry xmlns:con="http://eviware.com/soapui/config"/><con:entry xmlns:con="http://eviware.com/soapui/config"/><con:entry xmlns:con="http://eviware.com/soapui/config"/><con:entry xmlns:con="http://eviware.com/soapui/config">cn</con:entry><con:entry xmlns:con="http://eviware.com/soapui/config">PC_WEB</con:entry><con:entry xmlns:con="http://eviware.com/soapui/config"/><con:entry xmlns:con="http://eviware.com/soapui/config">ALIPAY</con:entry></xml-fragment>]]></row></con:configuration></con:dataSource><con:property>Accept-Language</con:property><con:property>agentId</con:property><con:property>guestEmail</con:property><con:property>guestMobile</con:property><con:property>guestSwid</con:property><con:property>orderNo</con:property><con:property>orderAmount</con:property><con:property>orderSource</con:property><con:property>currency</con:property><con:property>payTtl</con:property><con:property>notifyUrl</con:property><con:property>returnUrl</con:property><con:property>region</con:property><con:property>payChannel</con:property><con:property>bankName</con:property><con:property>payOption</con:property><con:restartOnRun>true</con:restartOnRun></con:config></con:testStep><con:testStep type="restrequest" name="CreateCombinedTransaction" id="6123a83e-4bd1-48a8-ba27-e2eff1b0f23d"><con:settings/><con:config service="PaymentMiddleware" resourcePath="/payment-middleware-service/transactions/combined" methodName="Method 1" xsi:type="con:RestRequestStep" xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance"><con:restRequest name="CreateCombinedTransaction" id="37607dca-b5c5-490a-9910-01c664282dd1" mediaType="application/json" postQueryString="false"><con:settings><con:setting id="com.eviware.soapui.impl.wsdl.WsdlRequest@request-headers">&lt;xml-fragment/></con:setting></con:settings><con:request>{
    "guestSwid" : "${guestSwid}",
    "orderNo" : "${orderNo}",
    "products":[    
        {"description" : "Adult one day part ticket for date 2016-09-15","unitPrice" : 100.00,"qty" : 2, "type" : "PARK_TICKET"},
        {"description" : "Child one day part ticket for date 2016-09-15","unitPrice" : 75.00,"qty" : 3, "type" : "PARK_TICKET"}
    ],
    "orderAmount" : "${orderAmount}",
    "orderSource" : "${orderSource}",
    "currency" : "${currency}",
    "region" : "${region}",
    "payChannel" : "${payChannel}",
    "payOption" : "${payOption}"
}</con:request><con:originalUri>https://latest.payment-middleware-service-lite.nap7.wdpro.disney.com/payment-middleware-service/transactions/combined</con:originalUri><con:assertion type="Valid HTTP Status Codes" id="f5c3e3ec-2372-4786-a189-fbb9e7738043" name="Valid HTTP Status Codes"><con:settings/><con:configuration><codes>200
</codes></con:configuration></con:assertion><con:assertion type="JsonPath Match" id="db68fef4-b052-4f1d-a4ad-b425a2afce63" name="Match content of [sessionInfo]"><con:configuration><path>$.sessionDetail.sessionInfo</path><content>{"sessionId":"*","orderNo":"*","orderSource":"*","orderAmount":"*","currency":"*","state":"UNPAID","remark":null,"agentId":null,"guestMobile":null,"guestEmail":null,"guestSwid":"*","createdDate":"*","payTtl":30,"lastModifiedDate":"*","notifyUrl":null,"returnUrl":null}</content><allowWildcards>true</allowWildcards><ignoreNamspaceDifferences>false</ignoreNamspaceDifferences><ignoreComments>false</ignoreComments></con:configuration></con:assertion><con:assertion type="JsonPath Match" id="b1cc2732-a6c9-45f8-8cc1-21d15fb817df" name="Match content of [links]"><con:configuration><path>$.sessionDetail.links</path><content>{"cancelSession":{"rel":"related","href":"http*","type":"text/plain"},"getSession":{"rel":"related","href":"http*","type":"application/json"},"createTransaction":{"rel":"related","href":"http*","type":"application/json"}}</content><allowWildcards>true</allowWildcards><ignoreNamspaceDifferences>false</ignoreNamspaceDifferences><ignoreComments>false</ignoreComments></con:configuration></con:assertion><con:assertion type="JsonPath Match" id="8021ebdf-9fb3-4e52-9942-34e6169232e0" name="Match content of [redirectInfo]"><con:configuration><path>$.redirectInfo</path><content>{"href":"http*","params":{*},"method":"POST"}</content><allowWildcards>true</allowWildcards><ignoreNamspaceDifferences>false</ignoreNamspaceDifferences><ignoreComments>false</ignoreComments></con:configuration></con:assertion><con:credentials><con:selectedAuthProfile>No Authorization</con:selectedAuthProfile><con:authType>No Authorization</con:authType></con:credentials><con:jmsConfig JMSDeliveryMode="PERSISTENT"/><con:parameters>
  <con:entry key="agentId" value="${DataSource#agentId}"/>
  <con:entry key="orderSource" value="${DataSource#orderSource}"/>
  <con:entry key="orderNo" value="${DataSource#orderNo}"/>
  <con:entry key="guestMobile" value="${DataSource#guestMobile}"/>
  <con:entry key="payTtl" value="${DataSource#payTtl}"/>
  <con:entry key="bankName" value="${DataSource#bankName}"/>
  <con:entry key="guestEmail" value="${DataSource#guestEmail}"/>
  <con:entry key="orderAmount" value="${DataSource#orderAmount}"/>
  <con:entry key="guestSwid" value="${DataSource#guestSwid}"/>
  <con:entry key="payOption" value="${DataSource#payOption}"/>
  <con:entry key="notifyUrl" value="${DataSource#notifyUrl}"/>
  <con:entry key="currency" value="${DataSource#currency}"/>
  <con:entry key="payChannel" value="${DataSource#payChannel}"/>
  <con:entry key="Accept-Language" value="${DataSource#Accept-Language}"/>
  <con:entry key="region" value="${DataSource#region}"/>
  <con:entry key="returnUrl" value="${DataSource#returnUrl}"/>
</con:parameters><con:parameterOrder><con:entry>Accept-Language</con:entry><con:entry>agentId</con:entry><con:entry>guestEmail</con:entry><con:entry>guestMobile</con:entry><con:entry>guestSwid</con:entry><con:entry>orderNo</con:entry><con:entry>orderAmount</con:entry><con:entry>orderSource</con:entry><con:entry>currency</con:entry><con:entry>payTtl</con:entry><con:entry>notifyUrl</con:entry><con:entry>returnUrl</con:entry><con:entry>region</con:entry><con:entry>payChannel</con:entry><con:entry>bankName</con:entry><con:entry>payOption</con:entry></con:parameterOrder></con:restRequest></con:config></con:testStep><con:properties/><con:reportParameters/><con:breakPoints><con:testStepId>2c064e65-39d0-482b-9029-9317f056862d</con:testStepId><con:status>NONE</con:status><con:properties/></con:breakPoints></con:testCase><con:testCase id="f59e5c1c-62a0-46d1-92ec-0f44a6296360" failOnError="true" failTestCaseOnErrors="true" keepSession="false" maxResults="0" name="T05 guestMobile positive" searchProperties="true"><con:settings/><con:testStep type="groovy" name="generate orderNo" id="adbece6f-aaca-4177-b432-fd375863ad57"><con:settings/><con:config><script>import java.text.SimpleDateFormat;

def today = new Date()
def format = new SimpleDateFormat();
format = new SimpleDateFormat("yyyyMMddkkmmssSSS");
def DateToStr = format.format(today);

log.info DateToStr
return DateToStr</script></con:config></con:testStep><con:testStep type="datasource" name="DataSource" id="d3398ccc-cef2-4688-990d-4fbe5c9b365d"><con:settings/><con:config xsi:type="con:DataSourceStep" xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance"><con:dataSource type="Grid"><con:configuration><check>&lt;con:entry xmlns:con="http://eviware.com/soapui/config">true&lt;/con:entry></check><row><![CDATA[<xml-fragment><con:entry xmlns:con="http://eviware.com/soapui/config">zh-cn</con:entry><con:entry xmlns:con="http://eviware.com/soapui/config">3452344444332</con:entry><con:entry xmlns:con="http://eviware.com/soapui/config"/><con:entry xmlns:con="http://eviware.com/soapui/config">1111111111</con:entry><con:entry xmlns:con="http://eviware.com/soapui/config"/><con:entry xmlns:con="http://eviware.com/soapui/config">${generate orderNo#result}</con:entry><con:entry xmlns:con="http://eviware.com/soapui/config">1000.00</con:entry><con:entry xmlns:con="http://eviware.com/soapui/config">TICKETING</con:entry><con:entry xmlns:con="http://eviware.com/soapui/config">CNY</con:entry><con:entry xmlns:con="http://eviware.com/soapui/config"/><con:entry xmlns:con="http://eviware.com/soapui/config"/><con:entry xmlns:con="http://eviware.com/soapui/config"/><con:entry xmlns:con="http://eviware.com/soapui/config">cn</con:entry><con:entry xmlns:con="http://eviware.com/soapui/config">PC_WEB</con:entry><con:entry xmlns:con="http://eviware.com/soapui/config"/><con:entry xmlns:con="http://eviware.com/soapui/config">ALIPAY</con:entry></xml-fragment>]]></row></con:configuration></con:dataSource><con:property>Accept-Language</con:property><con:property>agentId</con:property><con:property>guestEmail</con:property><con:property>guestMobile</con:property><con:property>guestSwid</con:property><con:property>orderNo</con:property><con:property>orderAmount</con:property><con:property>orderSource</con:property><con:property>currency</con:property><con:property>payTtl</con:property><con:property>notifyUrl</con:property><con:property>returnUrl</con:property><con:property>region</con:property><con:property>payChannel</con:property><con:property>bankName</con:property><con:property>payOption</con:property><con:restartOnRun>true</con:restartOnRun></con:config></con:testStep><con:testStep type="restrequest" name="CreateCombinedTransaction" id="1659059a-e2eb-4479-91b7-f63fbf7aa567"><con:settings/><con:config service="PaymentMiddleware" resourcePath="/payment-middleware-service/transactions/combined" methodName="Method 1" xsi:type="con:RestRequestStep" xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance"><con:restRequest name="CreateCombinedTransaction" id="37607dca-b5c5-490a-9910-01c664282dd1" mediaType="application/json" postQueryString="false"><con:settings><con:setting id="com.eviware.soapui.impl.wsdl.WsdlRequest@request-headers">&lt;xml-fragment/></con:setting></con:settings><con:request>{
    "guestMobile" : "${guestMobile}",
    "orderNo" : "${orderNo}",
    "products":[    
        {"description" : "Adult one day part ticket for date 2016-09-15","unitPrice" : 100.00,"qty" : 2, "type" : "PARK_TICKET"},
        {"description" : "Child one day part ticket for date 2016-09-15","unitPrice" : 75.00,"qty" : 3, "type" : "PARK_TICKET"}
    ],
    "orderAmount" : "${orderAmount}",
    "orderSource" : "${orderSource}",
    "currency" : "${currency}",
    "region" : "${region}",
    "payChannel" : "${payChannel}",
    "payOption" : "${payOption}"
}</con:request><con:originalUri>https://latest.payment-middleware-service-lite.nap7.wdpro.disney.com/payment-middleware-service/transactions/combined</con:originalUri><con:assertion type="Valid HTTP Status Codes" id="f5c3e3ec-2372-4786-a189-fbb9e7738043" name="Valid HTTP Status Codes"><con:settings/><con:configuration><codes>200
</codes></con:configuration></con:assertion><con:assertion type="JsonPath Match" id="db68fef4-b052-4f1d-a4ad-b425a2afce63" name="Match content of [sessionInfo]"><con:configuration><path>$.sessionDetail.sessionInfo</path><content>{"sessionId":"*","orderNo":"*","orderSource":"*","orderAmount":"*","currency":"*","state":"UNPAID","remark":null,"agentId":null,"guestMobile":"*","guestEmail":null,"guestSwid":null,"createdDate":"*","payTtl":30,"lastModifiedDate":"*","notifyUrl":null,"returnUrl":null}</content><allowWildcards>true</allowWildcards><ignoreNamspaceDifferences>false</ignoreNamspaceDifferences><ignoreComments>false</ignoreComments></con:configuration></con:assertion><con:assertion type="JsonPath Match" id="b1cc2732-a6c9-45f8-8cc1-21d15fb817df" name="Match content of [links]"><con:configuration><path>$.sessionDetail.links</path><content>{"cancelSession":{"rel":"related","href":"http*","type":"text/plain"},"getSession":{"rel":"related","href":"http*","type":"application/json"},"createTransaction":{"rel":"related","href":"http*","type":"application/json"}}</content><allowWildcards>true</allowWildcards><ignoreNamspaceDifferences>false</ignoreNamspaceDifferences><ignoreComments>false</ignoreComments></con:configuration></con:assertion><con:assertion type="JsonPath Match" id="8021ebdf-9fb3-4e52-9942-34e6169232e0" name="Match content of [redirectInfo]"><con:configuration><path>$.redirectInfo</path><content>{"href":"http*","params":{*},"method":"POST"}</content><allowWildcards>true</allowWildcards><ignoreNamspaceDifferences>false</ignoreNamspaceDifferences><ignoreComments>false</ignoreComments></con:configuration></con:assertion><con:credentials><con:selectedAuthProfile>No Authorization</con:selectedAuthProfile><con:authType>No Authorization</con:authType></con:credentials><con:jmsConfig JMSDeliveryMode="PERSISTENT"/><con:parameters>
  <con:entry key="agentId" value="${DataSource#agentId}"/>
  <con:entry key="orderSource" value="${DataSource#orderSource}"/>
  <con:entry key="orderNo" value="${DataSource#orderNo}"/>
  <con:entry key="guestMobile" value="${DataSource#guestMobile}"/>
  <con:entry key="payTtl" value="${DataSource#payTtl}"/>
  <con:entry key="bankName" value="${DataSource#bankName}"/>
  <con:entry key="guestEmail" value="${DataSource#guestEmail}"/>
  <con:entry key="orderAmount" value="${DataSource#orderAmount}"/>
  <con:entry key="guestSwid" value="${DataSource#guestSwid}"/>
  <con:entry key="payOption" value="${DataSource#payOption}"/>
  <con:entry key="notifyUrl" value="${DataSource#notifyUrl}"/>
  <con:entry key="currency" value="${DataSource#currency}"/>
  <con:entry key="payChannel" value="${DataSource#payChannel}"/>
  <con:entry key="Accept-Language" value="${DataSource#Accept-Language}"/>
  <con:entry key="region" value="${DataSource#region}"/>
  <con:entry key="returnUrl" value="${DataSource#returnUrl}"/>
</con:parameters><con:parameterOrder><con:entry>Accept-Language</con:entry><con:entry>agentId</con:entry><con:entry>guestEmail</con:entry><con:entry>guestMobile</con:entry><con:entry>guestSwid</con:entry><con:entry>orderNo</con:entry><con:entry>orderAmount</con:entry><con:entry>orderSource</con:entry><con:entry>currency</con:entry><con:entry>payTtl</con:entry><con:entry>notifyUrl</con:entry><con:entry>returnUrl</con:entry><con:entry>region</con:entry><con:entry>payChannel</con:entry><con:entry>bankName</con:entry><con:entry>payOption</con:entry></con:parameterOrder></con:restRequest></con:config></con:testStep><con:properties/><con:reportParameters/><con:breakPoints><con:testStepId>4480997f-b686-4a2b-aafc-77602ec4f300</con:testStepId><con:status>NONE</con:status><con:properties/></con:breakPoints><con:breakPoints><con:testStepId>21417c84-c0e2-41f4-b19b-f2741e5e8df9</con:testStepId><con:status>NONE</con:status><con:properties/></con:breakPoints></con:testCase><con:testCase id="db7fa15d-969b-4de3-beac-31d5dfc3f782" failOnError="true" failTestCaseOnErrors="true" keepSession="false" maxResults="0" name="T06 orderNo negative" searchProperties="true"><con:settings/><con:testStep type="groovy" name="Empty orderNo" id="8d660928-8c4d-4597-a9db-72b2d2820622"><con:settings/><con:config><script>/*import java.text.SimpleDateFormat;

def today = new Date()
def format = new SimpleDateFormat();
format = new SimpleDateFormat("yyyyMMddkkmmss");
def DateToStr = format.format(today);
DateToStr=DateToStr*/
def DateToStr = null

log.info DateToStr
return DateToStr</script></con:config></con:testStep><con:testStep type="datasource" name="DataSource" id="4480997f-b686-4a2b-aafc-77602ec4f300"><con:settings/><con:config xsi:type="con:DataSourceStep" xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance"><con:dataSource type="Grid"><con:configuration><check>&lt;con:entry xmlns:con="http://eviware.com/soapui/config">true&lt;/con:entry></check><row><![CDATA[<xml-fragment><con:entry xmlns:con="http://eviware.com/soapui/config">zh-cn</con:entry><con:entry xmlns:con="http://eviware.com/soapui/config">3452344444332</con:entry><con:entry xmlns:con="http://eviware.com/soapui/config"/><con:entry xmlns:con="http://eviware.com/soapui/config"/><con:entry xmlns:con="http://eviware.com/soapui/config"/><con:entry xmlns:con="http://eviware.com/soapui/config">${generate orderNo#result}</con:entry><con:entry xmlns:con="http://eviware.com/soapui/config">1000.00</con:entry><con:entry xmlns:con="http://eviware.com/soapui/config">TICKETING</con:entry><con:entry xmlns:con="http://eviware.com/soapui/config">CNY</con:entry><con:entry xmlns:con="http://eviware.com/soapui/config"/><con:entry xmlns:con="http://eviware.com/soapui/config"/><con:entry xmlns:con="http://eviware.com/soapui/config"/><con:entry xmlns:con="http://eviware.com/soapui/config">cn</con:entry><con:entry xmlns:con="http://eviware.com/soapui/config">PC_WEB</con:entry><con:entry xmlns:con="http://eviware.com/soapui/config"/><con:entry xmlns:con="http://eviware.com/soapui/config">ALIPAY</con:entry></xml-fragment>]]></row></con:configuration></con:dataSource><con:property>Accept-Language</con:property><con:property>agentId</con:property><con:property>guestEmail</con:property><con:property>guestMobile</con:property><con:property>guestSwid</con:property><con:property>orderNo</con:property><con:property>orderAmount</con:property><con:property>orderSource</con:property><con:property>currency</con:property><con:property>payTtl</con:property><con:property>notifyUrl</con:property><con:property>returnUrl</con:property><con:property>region</con:property><con:property>payChannel</con:property><con:property>bankName</con:property><con:property>payOption</con:property><con:restartOnRun>true</con:restartOnRun></con:config></con:testStep><con:testStep type="restrequest" name="CreateCombinedTransaction" id="21417c84-c0e2-41f4-b19b-f2741e5e8df9"><con:settings/><con:config service="PaymentMiddleware" resourcePath="/payment-middleware-service/transactions/combined" methodName="Method 1" xsi:type="con:RestRequestStep" xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance"><con:restRequest name="CreateCombinedTransaction" id="37607dca-b5c5-490a-9910-01c664282dd1" mediaType="application/json" postQueryString="false"><con:settings><con:setting id="com.eviware.soapui.impl.wsdl.WsdlRequest@request-headers">&lt;xml-fragment/></con:setting></con:settings><con:request>{
    "agentId" : "${agentId}",
    "products":[    
        {"description" : "Adult one day part ticket for date 2016-09-15","unitPrice" : 100.00,"qty" : 2, "type" : "PARK_TICKET"},
        {"description" : "Child one day part ticket for date 2016-09-15","unitPrice" : 75.00,"qty" : 3, "type" : "PARK_TICKET"}
    ],
    "orderAmount" : "${orderAmount}",
    "orderSource" : "${orderSource}",
    "currency" : "${currency}",
    "region" : "${region}",
    "payChannel" : "${payChannel}",
    "payOption" : "${payOption}"
}</con:request><con:originalUri>https://latest.payment-middleware-service-lite.nap7.wdpro.disney.com/payment-middleware-service/transactions/combined</con:originalUri><con:assertion type="Valid HTTP Status Codes" id="f5c3e3ec-2372-4786-a189-fbb9e7738043" name="Valid HTTP Status Codes"><con:settings/><con:configuration><codes>400</codes></con:configuration></con:assertion><con:assertion type="Simple Equals" id="32a30984-9b1d-49df-8fe2-cb73223d99ab" name="Equals"><con:configuration><patternText>1014:order number is required</patternText><caseSensitive>true</caseSensitive></con:configuration></con:assertion><con:credentials><con:selectedAuthProfile>No Authorization</con:selectedAuthProfile><con:authType>No Authorization</con:authType></con:credentials><con:jmsConfig JMSDeliveryMode="PERSISTENT"/><con:parameters>
  <con:entry key="agentId" value="${DataSource#agentId}"/>
  <con:entry key="orderSource" value="${DataSource#orderSource}"/>
  <con:entry key="orderNo" value="${DataSource#orderNo}"/>
  <con:entry key="guestMobile" value="${DataSource#guestMobile}"/>
  <con:entry key="payTtl" value="${DataSource#payTtl}"/>
  <con:entry key="bankName" value="${DataSource#bankName}"/>
  <con:entry key="guestEmail" value="${DataSource#guestEmail}"/>
  <con:entry key="orderAmount" value="${DataSource#orderAmount}"/>
  <con:entry key="guestSwid" value="${DataSource#guestSwid}"/>
  <con:entry key="payOption" value="${DataSource#payOption}"/>
  <con:entry key="notifyUrl" value="${DataSource#notifyUrl}"/>
  <con:entry key="currency" value="${DataSource#currency}"/>
  <con:entry key="payChannel" value="${DataSource#payChannel}"/>
  <con:entry key="Accept-Language" value="${DataSource#Accept-Language}"/>
  <con:entry key="region" value="${DataSource#region}"/>
  <con:entry key="returnUrl" value="${DataSource#returnUrl}"/>
</con:parameters><con:parameterOrder><con:entry>Accept-Language</con:entry><con:entry>agentId</con:entry><con:entry>guestEmail</con:entry><con:entry>guestMobile</con:entry><con:entry>guestSwid</con:entry><con:entry>orderNo</con:entry><con:entry>orderAmount</con:entry><con:entry>orderSource</con:entry><con:entry>currency</con:entry><con:entry>payTtl</con:entry><con:entry>notifyUrl</con:entry><con:entry>returnUrl</con:entry><con:entry>region</con:entry><con:entry>payChannel</con:entry><con:entry>bankName</con:entry><con:entry>payOption</con:entry></con:parameterOrder></con:restRequest></con:config></con:testStep><con:testStep type="groovy" name="Generate orderNo" id="3b5a7d8a-f71a-415a-85be-30359716f19d"><con:settings/><con:config><script>import java.text.SimpleDateFormat;

def today = new Date()
def format = new SimpleDateFormat();
format = new SimpleDateFormat("yyyyMMddkkmmssSSS");
def DateToStr = format.format(today);
DateToStr=DateToStr

log.info DateToStr
return DateToStr</script></con:config></con:testStep><con:testStep type="restrequest" name="CreateCombinedTransaction SUCCESS" id="5f6c934d-482f-4ddf-94e5-9bce224cf8e6"><con:settings/><con:config service="PaymentMiddleware" resourcePath="/payment-middleware-service/transactions/combined" methodName="Method 1" xsi:type="con:RestRequestStep" xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance"><con:restRequest name="CreateCombinedTransaction SUCCESS" id="37607dca-b5c5-490a-9910-01c664282dd1" mediaType="application/json" postQueryString="false"><con:settings><con:setting id="com.eviware.soapui.impl.wsdl.WsdlRequest@request-headers">&lt;xml-fragment/></con:setting></con:settings><con:request>{
    "agentId" : "${agentId}",
    "orderNo" : "${orderNo}",
    "products":[    
        {"description" : "Adult one day part ticket for date 2016-09-15","unitPrice" : 100.00,"qty" : 2, "type" : "PARK_TICKET"},
        {"description" : "Child one day part ticket for date 2016-09-15","unitPrice" : 75.00,"qty" : 3, "type" : "PARK_TICKET"}
    ],
    "orderAmount" : "${orderAmount}",
    "orderSource" : "${orderSource}",
    "currency" : "${currency}",
    "region" : "${region}",
    "payChannel" : "${payChannel}",
    "payOption" : "${payOption}"
}</con:request><con:originalUri>https://latest.payment-middleware-service-lite.nap7.wdpro.disney.com/payment-middleware-service/transactions/combined</con:originalUri><con:assertion type="Valid HTTP Status Codes" id="f5c3e3ec-2372-4786-a189-fbb9e7738043" name="Valid HTTP Status Codes"><con:settings/><con:configuration><codes>200</codes></con:configuration></con:assertion><con:credentials><con:selectedAuthProfile>No Authorization</con:selectedAuthProfile><con:authType>No Authorization</con:authType></con:credentials><con:jmsConfig JMSDeliveryMode="PERSISTENT"/><con:parameters>
  <con:entry key="agentId" value="${DataSource#agentId}"/>
  <con:entry key="orderSource" value="${DataSource#orderSource}"/>
  <con:entry key="orderNo" value="${Generate orderNo#result}"/>
  <con:entry key="guestMobile" value="${DataSource#guestMobile}"/>
  <con:entry key="payTtl" value="${DataSource#payTtl}"/>
  <con:entry key="bankName" value="${DataSource#bankName}"/>
  <con:entry key="guestEmail" value="${DataSource#guestEmail}"/>
  <con:entry key="orderAmount" value="${DataSource#orderAmount}"/>
  <con:entry key="guestSwid" value="${DataSource#guestSwid}"/>
  <con:entry key="payOption" value="${DataSource#payOption}"/>
  <con:entry key="notifyUrl" value="${DataSource#notifyUrl}"/>
  <con:entry key="currency" value="${DataSource#currency}"/>
  <con:entry key="payChannel" value="${DataSource#payChannel}"/>
  <con:entry key="Accept-Language" value="${DataSource#Accept-Language}"/>
  <con:entry key="region" value="${DataSource#region}"/>
  <con:entry key="returnUrl" value="${DataSource#returnUrl}"/>
</con:parameters><con:parameterOrder><con:entry>Accept-Language</con:entry><con:entry>agentId</con:entry><con:entry>guestEmail</con:entry><con:entry>guestMobile</con:entry><con:entry>guestSwid</con:entry><con:entry>orderNo</con:entry><con:entry>orderAmount</con:entry><con:entry>orderSource</con:entry><con:entry>currency</con:entry><con:entry>payTtl</con:entry><con:entry>notifyUrl</con:entry><con:entry>returnUrl</con:entry><con:entry>region</con:entry><con:entry>payChannel</con:entry><con:entry>bankName</con:entry><con:entry>payOption</con:entry></con:parameterOrder></con:restRequest></con:config></con:testStep><con:testStep type="restrequest" name="DUP CreateCombinedTransaction" id="2836f009-1d2c-4cbf-9e21-43ed087dea96"><con:settings/><con:config service="PaymentMiddleware" resourcePath="/payment-middleware-service/transactions/combined" methodName="Method 1" xsi:type="con:RestRequestStep" xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance"><con:restRequest name="DUP CreateCombinedTransaction" id="37607dca-b5c5-490a-9910-01c664282dd1" mediaType="application/json" postQueryString="false"><con:settings><con:setting id="com.eviware.soapui.impl.wsdl.WsdlRequest@request-headers">&lt;xml-fragment/></con:setting></con:settings><con:request>{
    "agentId" : "${agentId}",
    "orderNo" : "${orderNo}",
    "products":[    
        {"description" : "Adult one day part ticket for date 2016-09-15","unitPrice" : 100.00,"qty" : 2, "type" : "PARK_TICKET"},
        {"description" : "Child one day part ticket for date 2016-09-15","unitPrice" : 75.00,"qty" : 3, "type" : "PARK_TICKET"}
    ],
    "orderAmount" : "${orderAmount}",
    "orderSource" : "${orderSource}",
    "currency" : "${currency}",
    "region" : "${region}",
    "payChannel" : "${payChannel}",
    "payOption" : "${payOption}"
}</con:request><con:originalUri>https://latest.payment-middleware-service-lite.nap7.wdpro.disney.com/payment-middleware-service/transactions/combined</con:originalUri><con:assertion type="Valid HTTP Status Codes" id="f5c3e3ec-2372-4786-a189-fbb9e7738043" name="Valid HTTP Status Codes"><con:settings/><con:configuration><codes>409</codes></con:configuration></con:assertion><con:assertion type="Simple Equals" id="c83f49a5-3eb0-4264-a044-426691da011d" name="Equals"><con:configuration><patternText>2003:this payment session is not necessary as it is already existed</patternText><caseSensitive>true</caseSensitive></con:configuration></con:assertion><con:credentials><con:selectedAuthProfile>No Authorization</con:selectedAuthProfile><con:authType>No Authorization</con:authType></con:credentials><con:jmsConfig JMSDeliveryMode="PERSISTENT"/><con:parameters>
  <con:entry key="agentId" value="${DataSource#agentId}"/>
  <con:entry key="orderSource" value="${DataSource#orderSource}"/>
  <con:entry key="orderNo" value="${Generate orderNo#result}"/>
  <con:entry key="guestMobile" value="${DataSource#guestMobile}"/>
  <con:entry key="payTtl" value="${DataSource#payTtl}"/>
  <con:entry key="bankName" value="${DataSource#bankName}"/>
  <con:entry key="guestEmail" value="${DataSource#guestEmail}"/>
  <con:entry key="orderAmount" value="${DataSource#orderAmount}"/>
  <con:entry key="guestSwid" value="${DataSource#guestSwid}"/>
  <con:entry key="payOption" value="${DataSource#payOption}"/>
  <con:entry key="notifyUrl" value="${DataSource#notifyUrl}"/>
  <con:entry key="currency" value="${DataSource#currency}"/>
  <con:entry key="payChannel" value="${DataSource#payChannel}"/>
  <con:entry key="Accept-Language" value="${DataSource#Accept-Language}"/>
  <con:entry key="region" value="${DataSource#region}"/>
  <con:entry key="returnUrl" value="${DataSource#returnUrl}"/>
</con:parameters><con:parameterOrder><con:entry>Accept-Language</con:entry><con:entry>agentId</con:entry><con:entry>guestEmail</con:entry><con:entry>guestMobile</con:entry><con:entry>guestSwid</con:entry><con:entry>orderNo</con:entry><con:entry>orderAmount</con:entry><con:entry>orderSource</con:entry><con:entry>currency</con:entry><con:entry>payTtl</con:entry><con:entry>notifyUrl</con:entry><con:entry>returnUrl</con:entry><con:entry>region</con:entry><con:entry>payChannel</con:entry><con:entry>bankName</con:entry><con:entry>payOption</con:entry></con:parameterOrder></con:restRequest></con:config></con:testStep><con:properties/><con:reportParameters/><con:breakPoints><con:testStepId>d75a3c81-84b4-4558-9632-6e2513960711</con:testStepId><con:status>NONE</con:status><con:properties/></con:breakPoints><con:breakPoints><con:testStepId>519e5f84-5a74-4097-9ced-699d3d18c2c3</con:testStepId><con:status>NONE</con:status><con:properties/></con:breakPoints></con:testCase><con:testCase id="17416982-c7e4-467f-a1f7-a7cbf4c7737f" failOnError="true" failTestCaseOnErrors="true" keepSession="false" maxResults="0" name="T07 orderAmount negative" searchProperties="true"><con:description>TestCase generated for REST Resource [Sessions] located at [/sessions]</con:description><con:settings/><con:testStep type="datasource" name="DataSource" id="7d125b74-6834-4802-ac20-619673ddab45"><con:settings/><con:config xsi:type="con:DataSourceStep" xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance"><con:dataSource type="Grid"><con:configuration><check><![CDATA[<xml-fragment><con:entry xmlns:con="http://eviware.com/soapui/config">true</con:entry><con:entry xmlns:con="http://eviware.com/soapui/config">true</con:entry><con:entry xmlns:con="http://eviware.com/soapui/config">false</con:entry><con:entry xmlns:con="http://eviware.com/soapui/config">true</con:entry><con:entry xmlns:con="http://eviware.com/soapui/config">false</con:entry></xml-fragment>]]></check><row><![CDATA[<xml-fragment><con:entry xmlns:con="http://eviware.com/soapui/config"/><con:entry xmlns:con="http://eviware.com/soapui/config">3452344444332</con:entry><con:entry xmlns:con="http://eviware.com/soapui/config"/><con:entry xmlns:con="http://eviware.com/soapui/config"/><con:entry xmlns:con="http://eviware.com/soapui/config"/><con:entry xmlns:con="http://eviware.com/soapui/config"/><con:entry xmlns:con="http://eviware.com/soapui/config"/><con:entry xmlns:con="http://eviware.com/soapui/config">TICKETING</con:entry><con:entry xmlns:con="http://eviware.com/soapui/config">CNY</con:entry><con:entry xmlns:con="http://eviware.com/soapui/config"/><con:entry xmlns:con="http://eviware.com/soapui/config"/><con:entry xmlns:con="http://eviware.com/soapui/config"/><con:entry xmlns:con="http://eviware.com/soapui/config">cn</con:entry><con:entry xmlns:con="http://eviware.com/soapui/config">PC_WEB</con:entry><con:entry xmlns:con="http://eviware.com/soapui/config"/><con:entry xmlns:con="http://eviware.com/soapui/config">ALIPAY</con:entry></xml-fragment>]]></row><row><![CDATA[<xml-fragment><con:entry xmlns:con="http://eviware.com/soapui/config"/><con:entry xmlns:con="http://eviware.com/soapui/config">3452344444332</con:entry><con:entry xmlns:con="http://eviware.com/soapui/config"/><con:entry xmlns:con="http://eviware.com/soapui/config"/><con:entry xmlns:con="http://eviware.com/soapui/config"/><con:entry xmlns:con="http://eviware.com/soapui/config"/><con:entry xmlns:con="http://eviware.com/soapui/config">-100</con:entry><con:entry xmlns:con="http://eviware.com/soapui/config">TICKETING</con:entry><con:entry xmlns:con="http://eviware.com/soapui/config">CNY</con:entry><con:entry xmlns:con="http://eviware.com/soapui/config"/><con:entry xmlns:con="http://eviware.com/soapui/config"/><con:entry xmlns:con="http://eviware.com/soapui/config"/><con:entry xmlns:con="http://eviware.com/soapui/config">cn</con:entry><con:entry xmlns:con="http://eviware.com/soapui/config">PC_WEB</con:entry><con:entry xmlns:con="http://eviware.com/soapui/config"/><con:entry xmlns:con="http://eviware.com/soapui/config">ALIPAY</con:entry></xml-fragment>]]></row><row><![CDATA[<xml-fragment><con:entry xmlns:con="http://eviware.com/soapui/config"/><con:entry xmlns:con="http://eviware.com/soapui/config">3452344444332</con:entry><con:entry xmlns:con="http://eviware.com/soapui/config"/><con:entry xmlns:con="http://eviware.com/soapui/config"/><con:entry xmlns:con="http://eviware.com/soapui/config"/><con:entry xmlns:con="http://eviware.com/soapui/config"/><con:entry xmlns:con="http://eviware.com/soapui/config">aaa</con:entry><con:entry xmlns:con="http://eviware.com/soapui/config">TICKETING</con:entry><con:entry xmlns:con="http://eviware.com/soapui/config">CNY</con:entry><con:entry xmlns:con="http://eviware.com/soapui/config"/><con:entry xmlns:con="http://eviware.com/soapui/config"/><con:entry xmlns:con="http://eviware.com/soapui/config"/><con:entry xmlns:con="http://eviware.com/soapui/config">cn</con:entry><con:entry xmlns:con="http://eviware.com/soapui/config">PC_WEB</con:entry><con:entry xmlns:con="http://eviware.com/soapui/config"/><con:entry xmlns:con="http://eviware.com/soapui/config">ALIPAY</con:entry></xml-fragment>]]></row><row><![CDATA[<xml-fragment><con:entry xmlns:con="http://eviware.com/soapui/config"/><con:entry xmlns:con="http://eviware.com/soapui/config">3452344444332</con:entry><con:entry xmlns:con="http://eviware.com/soapui/config"/><con:entry xmlns:con="http://eviware.com/soapui/config"/><con:entry xmlns:con="http://eviware.com/soapui/config"/><con:entry xmlns:con="http://eviware.com/soapui/config"/><con:entry xmlns:con="http://eviware.com/soapui/config">0</con:entry><con:entry xmlns:con="http://eviware.com/soapui/config">TICKETING</con:entry><con:entry xmlns:con="http://eviware.com/soapui/config">CNY</con:entry><con:entry xmlns:con="http://eviware.com/soapui/config"/><con:entry xmlns:con="http://eviware.com/soapui/config"/><con:entry xmlns:con="http://eviware.com/soapui/config"/><con:entry xmlns:con="http://eviware.com/soapui/config">cn</con:entry><con:entry xmlns:con="http://eviware.com/soapui/config">PC_WEB</con:entry><con:entry xmlns:con="http://eviware.com/soapui/config"/><con:entry xmlns:con="http://eviware.com/soapui/config">ALIPAY</con:entry></xml-fragment>]]></row><row><![CDATA[<xml-fragment><con:entry xmlns:con="http://eviware.com/soapui/config"/><con:entry xmlns:con="http://eviware.com/soapui/config">3452344444332</con:entry><con:entry xmlns:con="http://eviware.com/soapui/config"/><con:entry xmlns:con="http://eviware.com/soapui/config"/><con:entry xmlns:con="http://eviware.com/soapui/config"/><con:entry xmlns:con="http://eviware.com/soapui/config"/><con:entry xmlns:con="http://eviware.com/soapui/config">0.001</con:entry><con:entry xmlns:con="http://eviware.com/soapui/config">TICKETING</con:entry><con:entry xmlns:con="http://eviware.com/soapui/config">CNY</con:entry><con:entry xmlns:con="http://eviware.com/soapui/config"/><con:entry xmlns:con="http://eviware.com/soapui/config"/><con:entry xmlns:con="http://eviware.com/soapui/config"/><con:entry xmlns:con="http://eviware.com/soapui/config">cn</con:entry><con:entry xmlns:con="http://eviware.com/soapui/config">PC_WEB</con:entry><con:entry xmlns:con="http://eviware.com/soapui/config"/><con:entry xmlns:con="http://eviware.com/soapui/config">ALIPAY</con:entry><con:entry xmlns:con="http://eviware.com/soapui/config"/></xml-fragment>]]></row></con:configuration></con:dataSource><con:property>Accept-Language</con:property><con:property>agentId</con:property><con:property>guestEmail</con:property><con:property>guestMobile</con:property><con:property>guestSwid</con:property><con:property>orderNo</con:property><con:property>orderAmount</con:property><con:property>orderSource</con:property><con:property>currency</con:property><con:property>payTtl</con:property><con:property>notifyUrl</con:property><con:property>returnUrl</con:property><con:property>region</con:property><con:property>payChannel</con:property><con:property>bankName</con:property><con:property>payOption</con:property><con:restartOnRun>true</con:restartOnRun></con:config></con:testStep><con:testStep type="groovy" name="generate orderNo" id="0f70c07a-fdac-487e-bb5d-2a201e3db5d6"><con:settings/><con:config><script>import java.text.SimpleDateFormat;

def today = new Date()
def format = new SimpleDateFormat();
format = new SimpleDateFormat("yyyyMMddkkmmssSSS");
def DateToStr = format.format(today);

log.info DateToStr
return DateToStr</script></con:config></con:testStep><con:testStep type="restrequest" name="CreateCombinedTransaction" id="519e5f84-5a74-4097-9ced-699d3d18c2c3"><con:settings/><con:config service="PaymentMiddleware" resourcePath="/payment-middleware-service/transactions/combined" methodName="Method 1" xsi:type="con:RestRequestStep" xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance"><con:restRequest name="CreateCombinedTransaction" id="37607dca-b5c5-490a-9910-01c664282dd1" mediaType="application/json" postQueryString="false"><con:settings><con:setting id="com.eviware.soapui.impl.wsdl.WsdlRequest@request-headers">&lt;xml-fragment/></con:setting></con:settings><con:request>{
    "agentId" : "${agentId}",
    "orderNo" : "${orderNo}",
    "products":[    
        {"description" : "Adult one day part ticket for date 2016-09-15","unitPrice" : 100.00,"qty" : 2, "type" : "PARK_TICKET"},
        {"description" : "Child one day part ticket for date 2016-09-15","unitPrice" : 75.00,"qty" : 3, "type" : "PARK_TICKET"}
    ],
    "orderAmount" : "${orderAmount}",
    "orderSource" : "${orderSource}",
    "currency" : "${currency}",
    "region" : "${region}",
    "payChannel" : "${payChannel}",
    "payOption" : "${payOption}"
}</con:request><con:originalUri>https://latest.payment-middleware-service-lite.nap7.wdpro.disney.com/payment-middleware-service/transactions/combined</con:originalUri><con:assertion type="Valid HTTP Status Codes" id="f5c3e3ec-2372-4786-a189-fbb9e7738043" name="Valid HTTP Status Codes"><con:settings/><con:configuration><codes>400</codes></con:configuration></con:assertion><con:credentials><con:selectedAuthProfile>No Authorization</con:selectedAuthProfile><con:authType>No Authorization</con:authType></con:credentials><con:jmsConfig JMSDeliveryMode="PERSISTENT"/><con:parameters>
  <con:entry key="agentId" value="${DataSource#agentId}"/>
  <con:entry key="orderSource" value="${DataSource#orderSource}"/>
  <con:entry key="orderNo" value="${generate orderNo#result}"/>
  <con:entry key="guestMobile" value="${DataSource#guestMobile}"/>
  <con:entry key="payTtl" value="${DataSource#payTtl}"/>
  <con:entry key="bankName" value="${DataSource#bankName}"/>
  <con:entry key="guestEmail" value="${DataSource#guestEmail}"/>
  <con:entry key="orderAmount" value="${DataSource#orderAmount}"/>
  <con:entry key="guestSwid" value="${DataSource#guestSwid}"/>
  <con:entry key="payOption" value="${DataSource#payOption}"/>
  <con:entry key="notifyUrl" value="${DataSource#notifyUrl}"/>
  <con:entry key="currency" value="${DataSource#currency}"/>
  <con:entry key="payChannel" value="${DataSource#payChannel}"/>
  <con:entry key="Accept-Language" value="${DataSource#Accept-Language}"/>
  <con:entry key="region" value="${DataSource#region}"/>
  <con:entry key="returnUrl" value="${DataSource#returnUrl}"/>
</con:parameters><con:parameterOrder><con:entry>Accept-Language</con:entry><con:entry>agentId</con:entry><con:entry>guestEmail</con:entry><con:entry>guestMobile</con:entry><con:entry>guestSwid</con:entry><con:entry>orderNo</con:entry><con:entry>orderAmount</con:entry><con:entry>orderSource</con:entry><con:entry>currency</con:entry><con:entry>payTtl</con:entry><con:entry>notifyUrl</con:entry><con:entry>returnUrl</con:entry><con:entry>region</con:entry><con:entry>payChannel</con:entry><con:entry>bankName</con:entry><con:entry>payOption</con:entry></con:parameterOrder></con:restRequest></con:config></con:testStep><con:testStep type="datasourceloop" name="DataSource Loop" id="a3f49b22-d95f-4203-bc1b-8316d63d664b"><con:settings/><con:config><dataSourceStep>DataSource</dataSourceStep><targetStep>generate orderNo</targetStep></con:config></con:testStep><con:properties/><con:reportParameters/><con:breakPoints><con:testStepId>12100cdb-d043-4c6f-b02b-df1c919be0e7</con:testStepId><con:status>NONE</con:status><con:properties/></con:breakPoints><con:breakPoints><con:testStepId>1c3c74eb-311f-4c1f-b773-06c87e6ac031</con:testStepId><con:status>NONE</con:status><con:properties/></con:breakPoints><con:breakPoints><con:testStepId>1e1f7a99-6a5d-4a2e-87f3-860e25fef011</con:testStepId><con:status>NONE</con:status><con:properties/></con:breakPoints><con:breakPoints><con:testStepId>df269192-806d-410b-a17d-dbb27dbfb7cb</con:testStepId><con:status>NONE</con:status><con:properties/></con:breakPoints><con:breakPoints><con:testStepId>a95db3fe-2e64-48f1-a641-d8dd2cebce5a</con:testStepId><con:status>NONE</con:status><con:properties/></con:breakPoints></con:testCase><con:testCase id="e9752eae-fea1-4ed6-848c-e17b83137eae" failOnError="true" failTestCaseOnErrors="true" keepSession="false" maxResults="0" name="T08 orderSource positive" searchProperties="true"><con:description>TestCase generated for REST Resource [Sessions] located at [/sessions]</con:description><con:settings/><con:testStep type="datasource" name="DataSource" id="55183816-8638-4caf-aa0d-680b1b4ee5f2"><con:settings/><con:config xsi:type="con:DataSourceStep" xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance"><con:dataSource type="Grid"><con:configuration><check><![CDATA[<xml-fragment><con:entry xmlns:con="http://eviware.com/soapui/config">true</con:entry><con:entry xmlns:con="http://eviware.com/soapui/config">true</con:entry></xml-fragment>]]></check><row><![CDATA[<xml-fragment><con:entry xmlns:con="http://eviware.com/soapui/config">zh-cn</con:entry><con:entry xmlns:con="http://eviware.com/soapui/config">3452344444332</con:entry><con:entry xmlns:con="http://eviware.com/soapui/config"/><con:entry xmlns:con="http://eviware.com/soapui/config">1111111111</con:entry><con:entry xmlns:con="http://eviware.com/soapui/config"/><con:entry xmlns:con="http://eviware.com/soapui/config"/><con:entry xmlns:con="http://eviware.com/soapui/config">1000.00</con:entry><con:entry xmlns:con="http://eviware.com/soapui/config">TICKETING</con:entry><con:entry xmlns:con="http://eviware.com/soapui/config">CNY</con:entry><con:entry xmlns:con="http://eviware.com/soapui/config"/><con:entry xmlns:con="http://eviware.com/soapui/config"/><con:entry xmlns:con="http://eviware.com/soapui/config"/><con:entry xmlns:con="http://eviware.com/soapui/config">cn</con:entry><con:entry xmlns:con="http://eviware.com/soapui/config">PC_WEB</con:entry><con:entry xmlns:con="http://eviware.com/soapui/config"/><con:entry xmlns:con="http://eviware.com/soapui/config">ALIPAY</con:entry></xml-fragment>]]></row><row><![CDATA[<xml-fragment><con:entry xmlns:con="http://eviware.com/soapui/config">zh-cn</con:entry><con:entry xmlns:con="http://eviware.com/soapui/config">3452344444332</con:entry><con:entry xmlns:con="http://eviware.com/soapui/config"/><con:entry xmlns:con="http://eviware.com/soapui/config">1111111111</con:entry><con:entry xmlns:con="http://eviware.com/soapui/config"/><con:entry xmlns:con="http://eviware.com/soapui/config"/><con:entry xmlns:con="http://eviware.com/soapui/config">1000.00</con:entry><con:entry xmlns:con="http://eviware.com/soapui/config">LODGING</con:entry><con:entry xmlns:con="http://eviware.com/soapui/config">CNY</con:entry><con:entry xmlns:con="http://eviware.com/soapui/config"/><con:entry xmlns:con="http://eviware.com/soapui/config"/><con:entry xmlns:con="http://eviware.com/soapui/config"/><con:entry xmlns:con="http://eviware.com/soapui/config">cn</con:entry><con:entry xmlns:con="http://eviware.com/soapui/config">PC_WEB</con:entry><con:entry xmlns:con="http://eviware.com/soapui/config"/><con:entry xmlns:con="http://eviware.com/soapui/config">ALIPAY</con:entry><con:entry xmlns:con="http://eviware.com/soapui/config"/></xml-fragment>]]></row></con:configuration></con:dataSource><con:property>Accept-Language</con:property><con:property>agentId</con:property><con:property>guestEmail</con:property><con:property>guestMobile</con:property><con:property>guestSwid</con:property><con:property>orderNo</con:property><con:property>orderAmount</con:property><con:property>orderSource</con:property><con:property>currency</con:property><con:property>payTtl</con:property><con:property>notifyUrl</con:property><con:property>returnUrl</con:property><con:property>region</con:property><con:property>payChannel</con:property><con:property>bankName</con:property><con:property>payOption</con:property><con:restartOnRun>true</con:restartOnRun></con:config></con:testStep><con:testStep type="groovy" name="generate orderNo" id="00117ad2-593a-492e-97b7-c724baa93b4b"><con:settings/><con:config><script>import java.text.SimpleDateFormat;

def today = new Date()
def format = new SimpleDateFormat();
format = new SimpleDateFormat("yyyyMMddkkmmssSSS");
def DateToStr = format.format(today);

log.info DateToStr
return DateToStr</script></con:config></con:testStep><con:testStep type="restrequest" name="CreateCombinedTransaction" id="e305dbff-b8ba-4428-adb4-781d66af167d"><con:settings/><con:config service="PaymentMiddleware" resourcePath="/payment-middleware-service/transactions/combined" methodName="Method 1" xsi:type="con:RestRequestStep" xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance"><con:restRequest name="CreateCombinedTransaction" id="37607dca-b5c5-490a-9910-01c664282dd1" mediaType="application/json" postQueryString="false"><con:settings><con:setting id="com.eviware.soapui.impl.wsdl.WsdlRequest@request-headers">&lt;xml-fragment/></con:setting></con:settings><con:request>{
    "agentId" : "${agentId}",
    "orderNo" : "${orderNo}",
    "products":[    
        {"description" : "Adult one day part ticket for date 2016-09-15","unitPrice" : 100.00,"qty" : 2, "type" : "PARK_TICKET"},
        {"description" : "Child one day part ticket for date 2016-09-15","unitPrice" : 75.00,"qty" : 3, "type" : "PARK_TICKET"}
    ],
    "orderAmount" : "${orderAmount}",
    "orderSource" : "${orderSource}",
    "currency" : "${currency}",
    "region" : "${region}",
    "payChannel" : "${payChannel}",
    "payOption" : "${payOption}"
}</con:request><con:originalUri>https://latest.payment-middleware-service-lite.nap7.wdpro.disney.com/payment-middleware-service/transactions/combined</con:originalUri><con:assertion type="Valid HTTP Status Codes" id="f5c3e3ec-2372-4786-a189-fbb9e7738043" name="Valid HTTP Status Codes"><con:settings/><con:configuration><codes>200</codes></con:configuration></con:assertion><con:assertion type="JsonPath Match" id="788f4fa7-f2e6-4342-83ee-6b945756f79c" name="Match content of [sessionInfo]"><con:configuration><path>$.sessionDetail.sessionInfo</path><content>{"sessionId":"*","orderNo":"*","orderSource":"*","orderAmount":"*","currency":"*","state":"UNPAID","remark":null,"agentId":"*","guestMobile":null,"guestEmail":null,"guestSwid":null,"createdDate":"*","payTtl":30,"lastModifiedDate":"*","notifyUrl":null,"returnUrl":null}</content><allowWildcards>true</allowWildcards><ignoreNamspaceDifferences>false</ignoreNamspaceDifferences><ignoreComments>false</ignoreComments></con:configuration></con:assertion><con:assertion type="JsonPath Match" id="95b3ad06-0474-4666-afbe-760f12f41a7a" name="Match content of [links]"><con:configuration><path>$.sessionDetail.links</path><content>{"cancelSession":{"rel":"related","href":"http*/payment-middleware-service/session/*","type":"text/plain"},"getSession":{"rel":"related","href":"http*/payment-middleware-service/session/*","type":"application/json"},"createTransaction":{"rel":"related","href":"http*/payment-middleware-service/session/*/transactions","type":"application/json"}}</content><allowWildcards>true</allowWildcards><ignoreNamspaceDifferences>false</ignoreNamspaceDifferences><ignoreComments>false</ignoreComments></con:configuration></con:assertion><con:assertion type="JsonPath Match" id="9898591d-d9a4-4785-9cab-d0544c3004a2" name="Match content of [redirectInfo]"><con:configuration><path>$.redirectInfo</path><content>{"href":"http*","params":{*}</content><allowWildcards>true</allowWildcards><ignoreNamspaceDifferences>false</ignoreNamspaceDifferences><ignoreComments>false</ignoreComments></con:configuration></con:assertion><con:credentials><con:selectedAuthProfile>No Authorization</con:selectedAuthProfile><con:authType>No Authorization</con:authType></con:credentials><con:jmsConfig JMSDeliveryMode="PERSISTENT"/><con:parameters>
  <con:entry key="agentId" value="${DataSource#agentId}"/>
  <con:entry key="orderSource" value="${DataSource#orderSource}"/>
  <con:entry key="orderNo" value="${generate orderNo#result}"/>
  <con:entry key="guestMobile" value="${DataSource#guestMobile}"/>
  <con:entry key="payTtl" value="${DataSource#payTtl}"/>
  <con:entry key="bankName" value="${DataSource#bankName}"/>
  <con:entry key="guestEmail" value="${DataSource#guestEmail}"/>
  <con:entry key="orderAmount" value="${DataSource#orderAmount}"/>
  <con:entry key="guestSwid" value="${DataSource#guestSwid}"/>
  <con:entry key="payOption" value="${DataSource#payOption}"/>
  <con:entry key="notifyUrl" value="${DataSource#notifyUrl}"/>
  <con:entry key="currency" value="${DataSource#currency}"/>
  <con:entry key="payChannel" value="${DataSource#payChannel}"/>
  <con:entry key="Accept-Language" value="${DataSource#Accept-Language}"/>
  <con:entry key="region" value="${DataSource#region}"/>
  <con:entry key="returnUrl" value="${DataSource#returnUrl}"/>
</con:parameters><con:parameterOrder><con:entry>Accept-Language</con:entry><con:entry>agentId</con:entry><con:entry>guestEmail</con:entry><con:entry>guestMobile</con:entry><con:entry>guestSwid</con:entry><con:entry>orderNo</con:entry><con:entry>orderAmount</con:entry><con:entry>orderSource</con:entry><con:entry>currency</con:entry><con:entry>payTtl</con:entry><con:entry>notifyUrl</con:entry><con:entry>returnUrl</con:entry><con:entry>region</con:entry><con:entry>payChannel</con:entry><con:entry>bankName</con:entry><con:entry>payOption</con:entry></con:parameterOrder></con:restRequest></con:config></con:testStep><con:testStep type="datasourceloop" name="DataSource Loop" id="be042be5-6f36-4d01-a6e4-92c45901a28a"><con:settings/><con:config><dataSourceStep>DataSource</dataSourceStep><targetStep>generate orderNo</targetStep></con:config></con:testStep><con:properties/><con:reportParameters/><con:breakPoints><con:testStepId>12100cdb-d043-4c6f-b02b-df1c919be0e7</con:testStepId><con:status>NONE</con:status><con:properties/></con:breakPoints><con:breakPoints><con:testStepId>0cddb9ca-20f5-48b3-a57f-017e1f03c088</con:testStepId><con:status>NONE</con:status><con:properties/></con:breakPoints><con:breakPoints><con:testStepId>e305dbff-b8ba-4428-adb4-781d66af167d</con:testStepId><con:status>NONE</con:status><con:properties/></con:breakPoints><con:breakPoints><con:testStepId>55183816-8638-4caf-aa0d-680b1b4ee5f2</con:testStepId><con:status>NONE</con:status><con:properties/></con:breakPoints><con:breakPoints><con:testStepId>00117ad2-593a-492e-97b7-c724baa93b4b</con:testStepId><con:status>NONE</con:status><con:properties/></con:breakPoints></con:testCase><con:testCase id="8254baf6-5f46-43a3-891a-2d8f1e4b1774" failOnError="true" failTestCaseOnErrors="true" keepSession="false" maxResults="0" name="T09 orderSource negative" searchProperties="true"><con:settings/><con:testStep type="datasource" name="DataSource" id="be0533ff-1432-49c9-98ab-cade00b11bbb"><con:settings/><con:config xsi:type="con:DataSourceStep" xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance"><con:dataSource type="Grid"><con:configuration><check><![CDATA[<xml-fragment><con:entry xmlns:con="http://eviware.com/soapui/config">true</con:entry><con:entry xmlns:con="http://eviware.com/soapui/config">true</con:entry><con:entry xmlns:con="http://eviware.com/soapui/config">true</con:entry></xml-fragment>]]></check><row><![CDATA[<xml-fragment><con:entry xmlns:con="http://eviware.com/soapui/config"/><con:entry xmlns:con="http://eviware.com/soapui/config">3452344444332</con:entry><con:entry xmlns:con="http://eviware.com/soapui/config"/><con:entry xmlns:con="http://eviware.com/soapui/config"/><con:entry xmlns:con="http://eviware.com/soapui/config"/><con:entry xmlns:con="http://eviware.com/soapui/config"/><con:entry xmlns:con="http://eviware.com/soapui/config">1</con:entry><con:entry xmlns:con="http://eviware.com/soapui/config">1111</con:entry><con:entry xmlns:con="http://eviware.com/soapui/config">CNY</con:entry><con:entry xmlns:con="http://eviware.com/soapui/config"/><con:entry xmlns:con="http://eviware.com/soapui/config"/><con:entry xmlns:con="http://eviware.com/soapui/config"/><con:entry xmlns:con="http://eviware.com/soapui/config">cn</con:entry><con:entry xmlns:con="http://eviware.com/soapui/config">PC_WEB</con:entry><con:entry xmlns:con="http://eviware.com/soapui/config"/><con:entry xmlns:con="http://eviware.com/soapui/config">ALIPAY</con:entry></xml-fragment>]]></row><row><![CDATA[<xml-fragment><con:entry xmlns:con="http://eviware.com/soapui/config"/><con:entry xmlns:con="http://eviware.com/soapui/config">3452344444332</con:entry><con:entry xmlns:con="http://eviware.com/soapui/config"/><con:entry xmlns:con="http://eviware.com/soapui/config"/><con:entry xmlns:con="http://eviware.com/soapui/config"/><con:entry xmlns:con="http://eviware.com/soapui/config"/><con:entry xmlns:con="http://eviware.com/soapui/config">2</con:entry><con:entry xmlns:con="http://eviware.com/soapui/config"/><con:entry xmlns:con="http://eviware.com/soapui/config">CNY</con:entry><con:entry xmlns:con="http://eviware.com/soapui/config"/><con:entry xmlns:con="http://eviware.com/soapui/config"/><con:entry xmlns:con="http://eviware.com/soapui/config"/><con:entry xmlns:con="http://eviware.com/soapui/config">cn</con:entry><con:entry xmlns:con="http://eviware.com/soapui/config">PC_WEB</con:entry><con:entry xmlns:con="http://eviware.com/soapui/config"/><con:entry xmlns:con="http://eviware.com/soapui/config">ALIPAY</con:entry></xml-fragment>]]></row><row><![CDATA[<xml-fragment><con:entry xmlns:con="http://eviware.com/soapui/config"/><con:entry xmlns:con="http://eviware.com/soapui/config">3452344444332</con:entry><con:entry xmlns:con="http://eviware.com/soapui/config"/><con:entry xmlns:con="http://eviware.com/soapui/config"/><con:entry xmlns:con="http://eviware.com/soapui/config"/><con:entry xmlns:con="http://eviware.com/soapui/config"/><con:entry xmlns:con="http://eviware.com/soapui/config">3</con:entry><con:entry xmlns:con="http://eviware.com/soapui/config">-1.1</con:entry><con:entry xmlns:con="http://eviware.com/soapui/config">CNY</con:entry><con:entry xmlns:con="http://eviware.com/soapui/config"/><con:entry xmlns:con="http://eviware.com/soapui/config"/><con:entry xmlns:con="http://eviware.com/soapui/config"/><con:entry xmlns:con="http://eviware.com/soapui/config">cn</con:entry><con:entry xmlns:con="http://eviware.com/soapui/config">PC_WEB</con:entry><con:entry xmlns:con="http://eviware.com/soapui/config"/><con:entry xmlns:con="http://eviware.com/soapui/config">ALIPAY</con:entry></xml-fragment>]]></row></con:configuration></con:dataSource><con:property>Accept-Language</con:property><con:property>agentId</con:property><con:property>guestEmail</con:property><con:property>guestMobile</con:property><con:property>guestSwid</con:property><con:property>orderNo</con:property><con:property>orderAmount</con:property><con:property>orderSource</con:property><con:property>currency</con:property><con:property>payTtl</con:property><con:property>notifyUrl</con:property><con:property>returnUrl</con:property><con:property>region</con:property><con:property>payChannel</con:property><con:property>bankName</con:property><con:property>payOption</con:property><con:restartOnRun>true</con:restartOnRun></con:config></con:testStep><con:testStep type="groovy" name="generate orderNo" id="9db947eb-feda-45be-9947-6deefd010048"><con:settings/><con:config><script>import java.text.SimpleDateFormat;

def today = new Date()
def format = new SimpleDateFormat();
format = new SimpleDateFormat("yyyyMMddkkmmssSSS");
def DateToStr = format.format(today);

log.info DateToStr
return DateToStr</script></con:config></con:testStep><con:testStep type="restrequest" name="CreateCombinedTransaction" id="6aee9c1a-3736-438b-8f90-fb2dda3efd8e"><con:settings/><con:config service="PaymentMiddleware" resourcePath="/payment-middleware-service/transactions/combined" methodName="Method 1" xsi:type="con:RestRequestStep" xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance"><con:restRequest name="CreateCombinedTransaction" id="37607dca-b5c5-490a-9910-01c664282dd1" mediaType="application/json" postQueryString="false"><con:settings><con:setting id="com.eviware.soapui.impl.wsdl.WsdlRequest@request-headers">&lt;xml-fragment/></con:setting></con:settings><con:request>{
    "agentId" : "${agentId}",
    "orderNo" : "${orderNo}",
    "products":[    
        {"description" : "Adult one day part ticket for date 2016-09-15","unitPrice" : 100.00,"qty" : 2, "type" : "PARK_TICKET"},
        {"description" : "Child one day part ticket for date 2016-09-15","unitPrice" : 75.00,"qty" : 3, "type" : "PARK_TICKET"}
    ],
    "orderAmount" : "${orderAmount}",
    "orderSource" : "${orderSource}",
    "currency" : "${currency}",
    "region" : "${region}",
    "payChannel" : "${payChannel}",
    "payOption" : "${payOption}"
}</con:request><con:originalUri>https://latest.payment-middleware-service-lite.nap7.wdpro.disney.com/payment-middleware-service/transactions/combined</con:originalUri><con:assertion type="Valid HTTP Status Codes" id="f5c3e3ec-2372-4786-a189-fbb9e7738043" name="Valid HTTP Status Codes"><con:settings/><con:configuration><codes>400</codes></con:configuration></con:assertion><con:assertion type="Simple Equals" id="bc261538-2a42-496b-880f-f31cea55cbb7" name="Equals"><con:configuration><patternText>1006:order source is invalid</patternText><caseSensitive>true</caseSensitive></con:configuration></con:assertion><con:credentials><con:selectedAuthProfile>No Authorization</con:selectedAuthProfile><con:authType>No Authorization</con:authType></con:credentials><con:jmsConfig JMSDeliveryMode="PERSISTENT"/><con:parameters>
  <con:entry key="agentId" value="${DataSource#agentId}"/>
  <con:entry key="orderSource" value="${DataSource#orderSource}"/>
  <con:entry key="orderNo" value="${generate orderNo#result}"/>
  <con:entry key="guestMobile" value="${DataSource#guestMobile}"/>
  <con:entry key="payTtl" value="${DataSource#payTtl}"/>
  <con:entry key="bankName" value="${DataSource#bankName}"/>
  <con:entry key="guestEmail" value="${DataSource#guestEmail}"/>
  <con:entry key="orderAmount" value="${DataSource#orderAmount}"/>
  <con:entry key="guestSwid" value="${DataSource#guestSwid}"/>
  <con:entry key="payOption" value="${DataSource#payOption}"/>
  <con:entry key="notifyUrl" value="${DataSource#notifyUrl}"/>
  <con:entry key="currency" value="${DataSource#currency}"/>
  <con:entry key="payChannel" value="${DataSource#payChannel}"/>
  <con:entry key="Accept-Language" value="${DataSource#Accept-Language}"/>
  <con:entry key="region" value="${DataSource#region}"/>
  <con:entry key="returnUrl" value="${DataSource#returnUrl}"/>
</con:parameters><con:parameterOrder><con:entry>Accept-Language</con:entry><con:entry>agentId</con:entry><con:entry>guestEmail</con:entry><con:entry>guestMobile</con:entry><con:entry>guestSwid</con:entry><con:entry>orderNo</con:entry><con:entry>orderAmount</con:entry><con:entry>orderSource</con:entry><con:entry>currency</con:entry><con:entry>payTtl</con:entry><con:entry>notifyUrl</con:entry><con:entry>returnUrl</con:entry><con:entry>region</con:entry><con:entry>payChannel</con:entry><con:entry>bankName</con:entry><con:entry>payOption</con:entry></con:parameterOrder></con:restRequest></con:config></con:testStep><con:testStep type="datasourceloop" name="DataSource Loop" id="c504a955-8f56-4d3f-9189-53b9eca1950c"><con:settings/><con:config><dataSourceStep>DataSource</dataSourceStep><targetStep>generate orderNo</targetStep></con:config></con:testStep><con:properties/><con:reportParameters/><con:breakPoints><con:testStepId>d958e81f-df39-4b43-bd17-679932a5434e</con:testStepId><con:status>NONE</con:status><con:properties/></con:breakPoints><con:breakPoints><con:testStepId>be0533ff-1432-49c9-98ab-cade00b11bbb</con:testStepId><con:status>NONE</con:status><con:properties/></con:breakPoints><con:breakPoints><con:testStepId>6aee9c1a-3736-438b-8f90-fb2dda3efd8e</con:testStepId><con:status>NONE</con:status><con:properties/></con:breakPoints></con:testCase><con:testCase id="04d39e7b-04df-418a-811e-21a5b0b50528" failOnError="true" failTestCaseOnErrors="true" keepSession="false" maxResults="0" name="T10 currency negative" searchProperties="true"><con:settings/><con:testStep type="datasource" name="DataSource" id="7cbec3f0-624f-4f05-b5a0-b287dde00197"><con:settings/><con:config xsi:type="con:DataSourceStep" xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance"><con:dataSource type="Grid"><con:configuration><check><![CDATA[<xml-fragment><con:entry xmlns:con="http://eviware.com/soapui/config">true</con:entry><con:entry xmlns:con="http://eviware.com/soapui/config">true</con:entry><con:entry xmlns:con="http://eviware.com/soapui/config">true</con:entry></xml-fragment>]]></check><row><![CDATA[<xml-fragment><con:entry xmlns:con="http://eviware.com/soapui/config"/><con:entry xmlns:con="http://eviware.com/soapui/config">3452344444332</con:entry><con:entry xmlns:con="http://eviware.com/soapui/config"/><con:entry xmlns:con="http://eviware.com/soapui/config"/><con:entry xmlns:con="http://eviware.com/soapui/config"/><con:entry xmlns:con="http://eviware.com/soapui/config"/><con:entry xmlns:con="http://eviware.com/soapui/config">1</con:entry><con:entry xmlns:con="http://eviware.com/soapui/config">LODGING</con:entry><con:entry xmlns:con="http://eviware.com/soapui/config">USD</con:entry><con:entry xmlns:con="http://eviware.com/soapui/config"/><con:entry xmlns:con="http://eviware.com/soapui/config"/><con:entry xmlns:con="http://eviware.com/soapui/config"/><con:entry xmlns:con="http://eviware.com/soapui/config">cn</con:entry><con:entry xmlns:con="http://eviware.com/soapui/config">PC_WEB</con:entry><con:entry xmlns:con="http://eviware.com/soapui/config"/><con:entry xmlns:con="http://eviware.com/soapui/config">ALIPAY</con:entry></xml-fragment>]]></row><row><![CDATA[<xml-fragment><con:entry xmlns:con="http://eviware.com/soapui/config"/><con:entry xmlns:con="http://eviware.com/soapui/config">3452344444332</con:entry><con:entry xmlns:con="http://eviware.com/soapui/config"/><con:entry xmlns:con="http://eviware.com/soapui/config"/><con:entry xmlns:con="http://eviware.com/soapui/config"/><con:entry xmlns:con="http://eviware.com/soapui/config"/><con:entry xmlns:con="http://eviware.com/soapui/config">2</con:entry><con:entry xmlns:con="http://eviware.com/soapui/config">LODGING</con:entry><con:entry xmlns:con="http://eviware.com/soapui/config">1</con:entry><con:entry xmlns:con="http://eviware.com/soapui/config"/><con:entry xmlns:con="http://eviware.com/soapui/config"/><con:entry xmlns:con="http://eviware.com/soapui/config"/><con:entry xmlns:con="http://eviware.com/soapui/config">cn</con:entry><con:entry xmlns:con="http://eviware.com/soapui/config">PC_WEB</con:entry><con:entry xmlns:con="http://eviware.com/soapui/config"/><con:entry xmlns:con="http://eviware.com/soapui/config">ALIPAY</con:entry></xml-fragment>]]></row><row><![CDATA[<xml-fragment><con:entry xmlns:con="http://eviware.com/soapui/config"/><con:entry xmlns:con="http://eviware.com/soapui/config">3452344444332</con:entry><con:entry xmlns:con="http://eviware.com/soapui/config"/><con:entry xmlns:con="http://eviware.com/soapui/config"/><con:entry xmlns:con="http://eviware.com/soapui/config"/><con:entry xmlns:con="http://eviware.com/soapui/config"/><con:entry xmlns:con="http://eviware.com/soapui/config">3</con:entry><con:entry xmlns:con="http://eviware.com/soapui/config">LODGING</con:entry><con:entry xmlns:con="http://eviware.com/soapui/config"/><con:entry xmlns:con="http://eviware.com/soapui/config"/><con:entry xmlns:con="http://eviware.com/soapui/config"/><con:entry xmlns:con="http://eviware.com/soapui/config"/><con:entry xmlns:con="http://eviware.com/soapui/config">cn</con:entry><con:entry xmlns:con="http://eviware.com/soapui/config">PC_WEB</con:entry><con:entry xmlns:con="http://eviware.com/soapui/config"/><con:entry xmlns:con="http://eviware.com/soapui/config">ALIPAY</con:entry></xml-fragment>]]></row></con:configuration></con:dataSource><con:property>Accept-Language</con:property><con:property>agentId</con:property><con:property>guestEmail</con:property><con:property>guestMobile</con:property><con:property>guestSwid</con:property><con:property>orderNo</con:property><con:property>orderAmount</con:property><con:property>orderSource</con:property><con:property>currency</con:property><con:property>payTtl</con:property><con:property>notifyUrl</con:property><con:property>returnUrl</con:property><con:property>region</con:property><con:property>payChannel</con:property><con:property>bankName</con:property><con:property>payOption</con:property><con:restartOnRun>true</con:restartOnRun></con:config></con:testStep><con:testStep type="groovy" name="generate orderNo" id="1c35be0e-5d49-4ce8-a5b7-88c0000e6029"><con:settings/><con:config><script>import java.text.SimpleDateFormat;

def today = new Date()
def format = new SimpleDateFormat();
format = new SimpleDateFormat("yyyyMMddkkmmssSSS");
def DateToStr = format.format(today);

log.info DateToStr
return DateToStr</script></con:config></con:testStep><con:testStep type="restrequest" name="CreateCombinedTransaction" id="31b184df-dfec-4f45-828f-7542dd3c572e"><con:settings/><con:config service="PaymentMiddleware" resourcePath="/payment-middleware-service/transactions/combined" methodName="Method 1" xsi:type="con:RestRequestStep" xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance"><con:restRequest name="CreateCombinedTransaction" id="37607dca-b5c5-490a-9910-01c664282dd1" mediaType="application/json" postQueryString="false"><con:settings><con:setting id="com.eviware.soapui.impl.wsdl.WsdlRequest@request-headers">&lt;xml-fragment/></con:setting></con:settings><con:request>{
    "agentId" : "${agentId}",
    "orderNo" : "${orderNo}",
    "products":[    
        {"description" : "Adult one day part ticket for date 2016-09-15","unitPrice" : 100.00,"qty" : 2, "type" : "PARK_TICKET"},
        {"description" : "Child one day part ticket for date 2016-09-15","unitPrice" : 75.00,"qty" : 3, "type" : "PARK_TICKET"}
    ],
    "orderAmount" : "${orderAmount}",
    "orderSource" : "${orderSource}",
    "currency" : "${currency}",
    "region" : "${region}",
    "payChannel" : "${payChannel}",
    "payOption" : "${payOption}"
}</con:request><con:originalUri>https://latest.payment-middleware-service-lite.nap7.wdpro.disney.com/payment-middleware-service/transactions/combined</con:originalUri><con:assertion type="Valid HTTP Status Codes" id="f5c3e3ec-2372-4786-a189-fbb9e7738043" name="Valid HTTP Status Codes"><con:settings/><con:configuration><codes>400</codes></con:configuration></con:assertion><con:assertion type="Simple Equals" id="bc261538-2a42-496b-880f-f31cea55cbb7" name="Equals"><con:configuration><patternText>1010:currency name is invalid</patternText><caseSensitive>true</caseSensitive></con:configuration></con:assertion><con:credentials><con:selectedAuthProfile>No Authorization</con:selectedAuthProfile><con:authType>No Authorization</con:authType></con:credentials><con:jmsConfig JMSDeliveryMode="PERSISTENT"/><con:parameters>
  <con:entry key="agentId" value="${DataSource#agentId}"/>
  <con:entry key="orderSource" value="${DataSource#orderSource}"/>
  <con:entry key="orderNo" value="${generate orderNo#result}"/>
  <con:entry key="guestMobile" value="${DataSource#guestMobile}"/>
  <con:entry key="payTtl" value="${DataSource#payTtl}"/>
  <con:entry key="bankName" value="${DataSource#bankName}"/>
  <con:entry key="guestEmail" value="${DataSource#guestEmail}"/>
  <con:entry key="orderAmount" value="${DataSource#orderAmount}"/>
  <con:entry key="guestSwid" value="${DataSource#guestSwid}"/>
  <con:entry key="payOption" value="${DataSource#payOption}"/>
  <con:entry key="notifyUrl" value="${DataSource#notifyUrl}"/>
  <con:entry key="currency" value="${DataSource#currency}"/>
  <con:entry key="payChannel" value="${DataSource#payChannel}"/>
  <con:entry key="Accept-Language" value="${DataSource#Accept-Language}"/>
  <con:entry key="region" value="${DataSource#region}"/>
  <con:entry key="returnUrl" value="${DataSource#returnUrl}"/>
</con:parameters><con:parameterOrder><con:entry>Accept-Language</con:entry><con:entry>agentId</con:entry><con:entry>guestEmail</con:entry><con:entry>guestMobile</con:entry><con:entry>guestSwid</con:entry><con:entry>orderNo</con:entry><con:entry>orderAmount</con:entry><con:entry>orderSource</con:entry><con:entry>currency</con:entry><con:entry>payTtl</con:entry><con:entry>notifyUrl</con:entry><con:entry>returnUrl</con:entry><con:entry>region</con:entry><con:entry>payChannel</con:entry><con:entry>bankName</con:entry><con:entry>payOption</con:entry></con:parameterOrder></con:restRequest></con:config></con:testStep><con:testStep type="datasourceloop" name="DataSource Loop" id="0405ab79-0cec-4359-9756-8daf6fcbdd7b"><con:settings/><con:config><dataSourceStep>DataSource</dataSourceStep><targetStep>generate orderNo</targetStep></con:config></con:testStep><con:properties/><con:reportParameters/><con:breakPoints><con:testStepId>d3de11b0-76de-4a8d-9635-fb3cfeb47494</con:testStepId><con:status>NONE</con:status><con:properties/></con:breakPoints><con:breakPoints><con:testStepId>7cbec3f0-624f-4f05-b5a0-b287dde00197</con:testStepId><con:status>NONE</con:status><con:properties/></con:breakPoints><con:breakPoints><con:testStepId>31b184df-dfec-4f45-828f-7542dd3c572e</con:testStepId><con:status>NONE</con:status><con:properties/></con:breakPoints></con:testCase><con:testCase id="246e7c0b-05bd-464e-812b-7eb27f363b99" failOnError="true" failTestCaseOnErrors="true" keepSession="false" name="T11 payTtl positive" searchProperties="true" maxResults="0"><con:settings/><con:testStep type="groovy" name="generate orderNo" id="a229d381-7c93-4cb2-8837-6cf6d03033e2"><con:settings/><con:config><script>import java.text.SimpleDateFormat;

def today = new Date()
def format = new SimpleDateFormat();
format = new SimpleDateFormat("yyyyMMddkkmmssSSS");
def DateToStr = format.format(today);

log.info DateToStr
return DateToStr</script></con:config></con:testStep><con:testStep type="datasource" name="DataSource" id="7fd7d11f-4a78-45e6-8d39-dd095f0b3f15"><con:settings/><con:config xsi:type="con:DataSourceStep" xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance"><con:dataSource type="Grid"><con:configuration><check>&lt;con:entry xmlns:con="http://eviware.com/soapui/config">true&lt;/con:entry></check><row><![CDATA[<xml-fragment><con:entry xmlns:con="http://eviware.com/soapui/config">zh-cn</con:entry><con:entry xmlns:con="http://eviware.com/soapui/config">3452344444332</con:entry><con:entry xmlns:con="http://eviware.com/soapui/config"/><con:entry xmlns:con="http://eviware.com/soapui/config"/><con:entry xmlns:con="http://eviware.com/soapui/config"/><con:entry xmlns:con="http://eviware.com/soapui/config">${generate orderNo#result}</con:entry><con:entry xmlns:con="http://eviware.com/soapui/config">1000.00</con:entry><con:entry xmlns:con="http://eviware.com/soapui/config">TICKETING</con:entry><con:entry xmlns:con="http://eviware.com/soapui/config">CNY</con:entry><con:entry xmlns:con="http://eviware.com/soapui/config">2</con:entry><con:entry xmlns:con="http://eviware.com/soapui/config"/><con:entry xmlns:con="http://eviware.com/soapui/config"/><con:entry xmlns:con="http://eviware.com/soapui/config">cn</con:entry><con:entry xmlns:con="http://eviware.com/soapui/config">PC_WEB</con:entry><con:entry xmlns:con="http://eviware.com/soapui/config"/><con:entry xmlns:con="http://eviware.com/soapui/config">ALIPAY</con:entry></xml-fragment>]]></row></con:configuration></con:dataSource><con:property>Accept-Language</con:property><con:property>agentId</con:property><con:property>guestEmail</con:property><con:property>guestMobile</con:property><con:property>guestSwid</con:property><con:property>orderNo</con:property><con:property>orderAmount</con:property><con:property>orderSource</con:property><con:property>currency</con:property><con:property>payTtl</con:property><con:property>notifyUrl</con:property><con:property>returnUrl</con:property><con:property>region</con:property><con:property>payChannel</con:property><con:property>bankName</con:property><con:property>payOption</con:property><con:restartOnRun>true</con:restartOnRun></con:config></con:testStep><con:testStep type="restrequest" name="CreateCombinedTransaction" id="70708993-7195-438a-a948-cf0b1d8b387e"><con:settings/><con:config service="PaymentMiddleware" resourcePath="/payment-middleware-service/transactions/combined" methodName="Method 1" xsi:type="con:RestRequestStep" xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance"><con:restRequest name="CreateCombinedTransaction" id="37607dca-b5c5-490a-9910-01c664282dd1" mediaType="application/json" postQueryString="false"><con:settings><con:setting id="com.eviware.soapui.impl.wsdl.WsdlRequest@request-headers">&lt;xml-fragment/></con:setting></con:settings><con:request>{
    "agentId" : "${agentId}",
    "orderNo" : "${orderNo}",
    "products":[    
        {"description" : "Adult one day part ticket for date 2016-09-15","unitPrice" : 100.00,"qty" : 2, "type" : "PARK_TICKET"},
        {"description" : "Child one day part ticket for date 2016-09-15","unitPrice" : 75.00,"qty" : 3, "type" : "PARK_TICKET"}
    ],
    "orderAmount" : "${orderAmount}",
    "orderSource" : "${orderSource}",
    "currency" : "${currency}",
    "region" : "${region}",
    "payChannel" : "${payChannel}",
    "payOption" : "${payOption}",
    "payTtl" : "${payTtl}"
}</con:request><con:originalUri>https://latest.payment-middleware-service-lite.nap7.wdpro.disney.com/payment-middleware-service/transactions/combined</con:originalUri><con:assertion type="Valid HTTP Status Codes" id="f5c3e3ec-2372-4786-a189-fbb9e7738043" name="Valid HTTP Status Codes"><con:settings/><con:configuration><codes>200
</codes></con:configuration></con:assertion><con:assertion type="JsonPath Match" id="db68fef4-b052-4f1d-a4ad-b425a2afce63" name="Match content of [sessionInfo]"><con:configuration><path>$.sessionDetail.sessionInfo</path><content>{"sessionId":"*","orderNo":"*","orderSource":"*","orderAmount":"*","currency":"*","state":"UNPAID","remark":null,"agentId":"*","guestMobile":null,"guestEmail":null,"guestSwid":null,"createdDate":"*","payTtl":*,"lastModifiedDate":"*","notifyUrl":null,"returnUrl":null}</content><allowWildcards>true</allowWildcards><ignoreNamspaceDifferences>false</ignoreNamspaceDifferences><ignoreComments>false</ignoreComments></con:configuration></con:assertion><con:assertion type="JsonPath Match" id="b1cc2732-a6c9-45f8-8cc1-21d15fb817df" name="Match content of [links]"><con:configuration><path>$.sessionDetail.links</path><content>{"cancelSession":{"rel":"related","href":"http*","type":"text/plain"},"getSession":{"rel":"related","href":"http*","type":"application/json"},"createTransaction":{"rel":"related","href":"http*","type":"application/json"}}</content><allowWildcards>true</allowWildcards><ignoreNamspaceDifferences>false</ignoreNamspaceDifferences><ignoreComments>false</ignoreComments></con:configuration></con:assertion><con:assertion type="JsonPath Match" id="8021ebdf-9fb3-4e52-9942-34e6169232e0" name="Match content of [redirectInfo]"><con:configuration><path>$.redirectInfo</path><content>{"href":"http*","params":{*},"method":"POST"}</content><allowWildcards>true</allowWildcards><ignoreNamspaceDifferences>false</ignoreNamspaceDifferences><ignoreComments>false</ignoreComments></con:configuration></con:assertion><con:assertion type="JsonPath Match" id="48a1d0ac-bbf3-405b-9d19-79b51e3f3f1d" name="Match content of [payTtl]"><con:configuration><path>$.sessionDetail.sessionInfo.payTtl</path><content>${DataSource#payTtl}</content><allowWildcards>false</allowWildcards><ignoreNamspaceDifferences>false</ignoreNamspaceDifferences><ignoreComments>false</ignoreComments></con:configuration></con:assertion><con:credentials><con:selectedAuthProfile>No Authorization</con:selectedAuthProfile><con:authType>No Authorization</con:authType></con:credentials><con:jmsConfig JMSDeliveryMode="PERSISTENT"/><con:parameters>
  <con:entry key="agentId" value="${DataSource#agentId}"/>
  <con:entry key="orderSource" value="${DataSource#orderSource}"/>
  <con:entry key="orderNo" value="${DataSource#orderNo}"/>
  <con:entry key="guestMobile" value="${DataSource#guestMobile}"/>
  <con:entry key="payTtl" value="${DataSource#payTtl}"/>
  <con:entry key="bankName" value="${DataSource#bankName}"/>
  <con:entry key="guestEmail" value="${DataSource#guestEmail}"/>
  <con:entry key="orderAmount" value="${DataSource#orderAmount}"/>
  <con:entry key="guestSwid" value="${DataSource#guestSwid}"/>
  <con:entry key="payOption" value="${DataSource#payOption}"/>
  <con:entry key="notifyUrl" value="${DataSource#notifyUrl}"/>
  <con:entry key="currency" value="${DataSource#currency}"/>
  <con:entry key="payChannel" value="${DataSource#payChannel}"/>
  <con:entry key="Accept-Language" value="${DataSource#Accept-Language}"/>
  <con:entry key="region" value="${DataSource#region}"/>
  <con:entry key="returnUrl" value="${DataSource#returnUrl}"/>
</con:parameters><con:parameterOrder><con:entry>Accept-Language</con:entry><con:entry>agentId</con:entry><con:entry>guestEmail</con:entry><con:entry>guestMobile</con:entry><con:entry>guestSwid</con:entry><con:entry>orderNo</con:entry><con:entry>orderAmount</con:entry><con:entry>orderSource</con:entry><con:entry>currency</con:entry><con:entry>payTtl</con:entry><con:entry>notifyUrl</con:entry><con:entry>returnUrl</con:entry><con:entry>region</con:entry><con:entry>payChannel</con:entry><con:entry>bankName</con:entry><con:entry>payOption</con:entry></con:parameterOrder></con:restRequest></con:config></con:testStep><con:properties/><con:reportParameters/></con:testCase><con:testCase id="edd1b8af-a30b-4cee-8603-f37f88a9c765" failOnError="true" failTestCaseOnErrors="true" keepSession="false" name="T12 payTtl negative" searchProperties="true" maxResults="0"><con:settings/><con:testStep type="datasource" name="DataSource" id="202a24ca-6529-4b5c-9f12-25e3de23ccc4"><con:settings/><con:config xsi:type="con:DataSourceStep" xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance"><con:dataSource type="Grid"><con:configuration><check><![CDATA[<xml-fragment><con:entry xmlns:con="http://eviware.com/soapui/config">true</con:entry><con:entry xmlns:con="http://eviware.com/soapui/config">true</con:entry></xml-fragment>]]></check><row><![CDATA[<xml-fragment><con:entry xmlns:con="http://eviware.com/soapui/config">zh-cn</con:entry><con:entry xmlns:con="http://eviware.com/soapui/config">3452344444332</con:entry><con:entry xmlns:con="http://eviware.com/soapui/config"/><con:entry xmlns:con="http://eviware.com/soapui/config"/><con:entry xmlns:con="http://eviware.com/soapui/config"/><con:entry xmlns:con="http://eviware.com/soapui/config"/><con:entry xmlns:con="http://eviware.com/soapui/config">1</con:entry><con:entry xmlns:con="http://eviware.com/soapui/config">TICKETING</con:entry><con:entry xmlns:con="http://eviware.com/soapui/config">CNY</con:entry><con:entry xmlns:con="http://eviware.com/soapui/config">21601</con:entry><con:entry xmlns:con="http://eviware.com/soapui/config"/><con:entry xmlns:con="http://eviware.com/soapui/config"/><con:entry xmlns:con="http://eviware.com/soapui/config">cn</con:entry><con:entry xmlns:con="http://eviware.com/soapui/config">PC_WEB</con:entry><con:entry xmlns:con="http://eviware.com/soapui/config"/><con:entry xmlns:con="http://eviware.com/soapui/config">ALIPAY</con:entry></xml-fragment>]]></row><row><![CDATA[<xml-fragment><con:entry xmlns:con="http://eviware.com/soapui/config">zh-cn</con:entry><con:entry xmlns:con="http://eviware.com/soapui/config">3452344444332</con:entry><con:entry xmlns:con="http://eviware.com/soapui/config"/><con:entry xmlns:con="http://eviware.com/soapui/config"/><con:entry xmlns:con="http://eviware.com/soapui/config"/><con:entry xmlns:con="http://eviware.com/soapui/config"/><con:entry xmlns:con="http://eviware.com/soapui/config">2</con:entry><con:entry xmlns:con="http://eviware.com/soapui/config">TICKETING</con:entry><con:entry xmlns:con="http://eviware.com/soapui/config">CNY</con:entry><con:entry xmlns:con="http://eviware.com/soapui/config">0</con:entry><con:entry xmlns:con="http://eviware.com/soapui/config"/><con:entry xmlns:con="http://eviware.com/soapui/config"/><con:entry xmlns:con="http://eviware.com/soapui/config">cn</con:entry><con:entry xmlns:con="http://eviware.com/soapui/config">PC_WEB</con:entry><con:entry xmlns:con="http://eviware.com/soapui/config"/><con:entry xmlns:con="http://eviware.com/soapui/config">ALIPAY</con:entry><con:entry xmlns:con="http://eviware.com/soapui/config"/></xml-fragment>]]></row></con:configuration></con:dataSource><con:property>Accept-Language</con:property><con:property>agentId</con:property><con:property>guestEmail</con:property><con:property>guestMobile</con:property><con:property>guestSwid</con:property><con:property>orderNo</con:property><con:property>orderAmount</con:property><con:property>orderSource</con:property><con:property>currency</con:property><con:property>payTtl</con:property><con:property>notifyUrl</con:property><con:property>returnUrl</con:property><con:property>region</con:property><con:property>payChannel</con:property><con:property>bankName</con:property><con:property>payOption</con:property><con:restartOnRun>true</con:restartOnRun></con:config></con:testStep><con:testStep type="groovy" name="generate orderNo" id="40469a9b-60da-4a1d-b561-9b0c68015e53"><con:settings/><con:config><script>import java.text.SimpleDateFormat;

def today = new Date()
def format = new SimpleDateFormat();
format = new SimpleDateFormat("yyyyMMddkkmmssSSS");
def DateToStr = format.format(today);

log.info DateToStr
return DateToStr</script></con:config></con:testStep><con:testStep type="restrequest" name="CreateCombinedTransaction" id="46aad6ee-24c2-4629-b421-253a611578fd"><con:settings/><con:config service="PaymentMiddleware" resourcePath="/payment-middleware-service/transactions/combined" methodName="Method 1" xsi:type="con:RestRequestStep" xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance"><con:restRequest name="CreateCombinedTransaction" id="37607dca-b5c5-490a-9910-01c664282dd1" mediaType="application/json" postQueryString="false"><con:settings><con:setting id="com.eviware.soapui.impl.wsdl.WsdlRequest@request-headers">&lt;xml-fragment/></con:setting></con:settings><con:request>{
    "agentId" : "${agentId}",
    "orderNo" : "${orderNo}",
    "products":[    
        {"description" : "Adult one day part ticket for date 2016-09-15","unitPrice" : 100.00,"qty" : 2, "type" : "PARK_TICKET"},
        {"description" : "Child one day part ticket for date 2016-09-15","unitPrice" : 75.00,"qty" : 3, "type" : "PARK_TICKET"}
    ],
    "orderAmount" : "${orderAmount}",
    "orderSource" : "${orderSource}",
    "currency" : "${currency}",
    "region" : "${region}",
    "payChannel" : "${payChannel}",
    "payOption" : "${payOption}",
    "payTtl" : "${payTtl}"
}</con:request><con:originalUri>https://latest.payment-middleware-service-lite.nap7.wdpro.disney.com/payment-middleware-service/transactions/combined</con:originalUri><con:assertion type="Valid HTTP Status Codes" id="f5c3e3ec-2372-4786-a189-fbb9e7738043" name="Valid HTTP Status Codes"><con:settings/><con:configuration><codes>400</codes></con:configuration></con:assertion><con:assertion type="Simple Equals" id="77e95696-35ee-49d2-aee1-e7c882a69a08" name="Equals"><con:configuration><patternText>1023:pay ttl should be between 2 and 21600</patternText><caseSensitive>true</caseSensitive></con:configuration></con:assertion><con:credentials><con:selectedAuthProfile>No Authorization</con:selectedAuthProfile><con:authType>No Authorization</con:authType></con:credentials><con:jmsConfig JMSDeliveryMode="PERSISTENT"/><con:parameters>
  <con:entry key="agentId" value="${DataSource#agentId}"/>
  <con:entry key="orderSource" value="${DataSource#orderSource}"/>
  <con:entry key="orderNo" value="${generate orderNo#result}"/>
  <con:entry key="guestMobile" value="${DataSource#guestMobile}"/>
  <con:entry key="payTtl" value="${DataSource#payTtl}"/>
  <con:entry key="bankName" value="${DataSource#bankName}"/>
  <con:entry key="guestEmail" value="${DataSource#guestEmail}"/>
  <con:entry key="orderAmount" value="${DataSource#orderAmount}"/>
  <con:entry key="guestSwid" value="${DataSource#guestSwid}"/>
  <con:entry key="payOption" value="${DataSource#payOption}"/>
  <con:entry key="notifyUrl" value="${DataSource#notifyUrl}"/>
  <con:entry key="currency" value="${DataSource#currency}"/>
  <con:entry key="payChannel" value="${DataSource#payChannel}"/>
  <con:entry key="Accept-Language" value="${DataSource#Accept-Language}"/>
  <con:entry key="region" value="${DataSource#region}"/>
  <con:entry key="returnUrl" value="${DataSource#returnUrl}"/>
</con:parameters><con:parameterOrder><con:entry>Accept-Language</con:entry><con:entry>agentId</con:entry><con:entry>guestEmail</con:entry><con:entry>guestMobile</con:entry><con:entry>guestSwid</con:entry><con:entry>orderNo</con:entry><con:entry>orderAmount</con:entry><con:entry>orderSource</con:entry><con:entry>currency</con:entry><con:entry>payTtl</con:entry><con:entry>notifyUrl</con:entry><con:entry>returnUrl</con:entry><con:entry>region</con:entry><con:entry>payChannel</con:entry><con:entry>bankName</con:entry><con:entry>payOption</con:entry></con:parameterOrder></con:restRequest></con:config></con:testStep><con:testStep type="datasourceloop" name="DataSource Loop" id="f9a0f9fb-a35b-40ba-8e78-aec7e16de362"><con:settings/><con:config><dataSourceStep>DataSource</dataSourceStep><targetStep>generate orderNo</targetStep></con:config></con:testStep><con:properties/><con:reportParameters/></con:testCase><con:testCase id="7b9eb184-6273-450c-8358-949298241f8b" failOnError="true" failTestCaseOnErrors="true" keepSession="false" maxResults="0" name="T13 bankName positive" searchProperties="true"><con:settings/><con:testStep type="datasource" name="DataSource" id="074d781c-00c8-4fae-bfb4-9d9332ac279b"><con:settings/><con:config xsi:type="con:DataSourceStep" xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance"><con:dataSource type="Grid"><con:configuration><check>&lt;con:entry xmlns:con="http://eviware.com/soapui/config">true&lt;/con:entry></check><row><![CDATA[<xml-fragment><con:entry xmlns:con="http://eviware.com/soapui/config">zh-cn</con:entry><con:entry xmlns:con="http://eviware.com/soapui/config">3452344444332</con:entry><con:entry xmlns:con="http://eviware.com/soapui/config"/><con:entry xmlns:con="http://eviware.com/soapui/config"/><con:entry xmlns:con="http://eviware.com/soapui/config"/><con:entry xmlns:con="http://eviware.com/soapui/config">${generate orderNo#result}</con:entry><con:entry xmlns:con="http://eviware.com/soapui/config">1000.00</con:entry><con:entry xmlns:con="http://eviware.com/soapui/config">TICKETING</con:entry><con:entry xmlns:con="http://eviware.com/soapui/config">CNY</con:entry><con:entry xmlns:con="http://eviware.com/soapui/config"/><con:entry xmlns:con="http://eviware.com/soapui/config"/><con:entry xmlns:con="http://eviware.com/soapui/config"/><con:entry xmlns:con="http://eviware.com/soapui/config">cn</con:entry><con:entry xmlns:con="http://eviware.com/soapui/config">PC_WEB</con:entry><con:entry xmlns:con="http://eviware.com/soapui/config">SHDR_DOMESTIC_BANK_CMB</con:entry><con:entry xmlns:con="http://eviware.com/soapui/config">DOMESTIC_CARD</con:entry></xml-fragment>]]></row></con:configuration></con:dataSource><con:property>Accept-Language</con:property><con:property>agentId</con:property><con:property>guestEmail</con:property><con:property>guestMobile</con:property><con:property>guestSwid</con:property><con:property>orderNo</con:property><con:property>orderAmount</con:property><con:property>orderSource</con:property><con:property>currency</con:property><con:property>payTtl</con:property><con:property>notifyUrl</con:property><con:property>returnUrl</con:property><con:property>region</con:property><con:property>payChannel</con:property><con:property>bankName</con:property><con:property>payOption</con:property><con:restartOnRun>true</con:restartOnRun></con:config></con:testStep><con:testStep type="groovy" name="generate orderNo" id="282efdd0-75c5-49ca-a737-91bc7e481308"><con:settings/><con:config><script>import java.text.SimpleDateFormat;

def today = new Date()
def format = new SimpleDateFormat();
format = new SimpleDateFormat("yyyyMMddkkmmssSSS");
def DateToStr = format.format(today);

log.info DateToStr
return DateToStr</script></con:config></con:testStep><con:testStep type="restrequest" name="CreateCombinedTransaction" id="34aaa0cb-c621-4464-9153-1d4134ae64cc"><con:settings/><con:config service="PaymentMiddleware" resourcePath="/payment-middleware-service/transactions/combined" methodName="Method 1" xsi:type="con:RestRequestStep" xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance"><con:restRequest name="CreateCombinedTransaction" id="37607dca-b5c5-490a-9910-01c664282dd1" mediaType="application/json" postQueryString="false"><con:settings><con:setting id="com.eviware.soapui.impl.wsdl.WsdlRequest@request-headers">&lt;xml-fragment/></con:setting></con:settings><con:request>{
    "agentId" : "${agentId}",
    "orderNo" : "${orderNo}",
    "products":[    
        {"description" : "Adult one day part ticket for date 2016-09-15","unitPrice" : 100.00,"qty" : 2, "type" : "PARK_TICKET"},
        {"description" : "Child one day part ticket for date 2016-09-15","unitPrice" : 75.00,"qty" : 3, "type" : "PARK_TICKET"}
    ],
    "orderAmount" : "${orderAmount}",
    "orderSource" : "${orderSource}",
    "currency" : "${currency}",
    "region" : "${region}",
    "payChannel" : "${payChannel}",
    "payOption" : "${payOption}",
    "bankName" : "${bankName}"
}</con:request><con:originalUri>https://latest.payment-middleware-service-lite.nap7.wdpro.disney.com/payment-middleware-service/transactions/combined</con:originalUri><con:assertion type="Valid HTTP Status Codes" id="f5c3e3ec-2372-4786-a189-fbb9e7738043" name="Valid HTTP Status Codes"><con:settings/><con:configuration><codes>200
</codes></con:configuration></con:assertion><con:assertion type="JsonPath Match" id="db68fef4-b052-4f1d-a4ad-b425a2afce63" name="Match content of [sessionInfo]"><con:configuration><path>$.sessionDetail.sessionInfo</path><content>{"sessionId":"*","orderNo":"*","orderSource":"*","orderAmount":"*","currency":"*","state":"UNPAID","remark":null,"agentId":"*","guestMobile":null,"guestEmail":null,"guestSwid":null,"createdDate":"*","payTtl":*,"lastModifiedDate":"*","notifyUrl":null,"returnUrl":null}</content><allowWildcards>true</allowWildcards><ignoreNamspaceDifferences>false</ignoreNamspaceDifferences><ignoreComments>false</ignoreComments></con:configuration></con:assertion><con:assertion type="JsonPath Match" id="b1cc2732-a6c9-45f8-8cc1-21d15fb817df" name="Match content of [links]"><con:configuration><path>$.sessionDetail.links</path><content>{"cancelSession":{"rel":"related","href":"http*","type":"text/plain"},"getSession":{"rel":"related","href":"http*","type":"application/json"},"createTransaction":{"rel":"related","href":"http*","type":"application/json"}}</content><allowWildcards>true</allowWildcards><ignoreNamspaceDifferences>false</ignoreNamspaceDifferences><ignoreComments>false</ignoreComments></con:configuration></con:assertion><con:assertion type="JsonPath Match" id="8021ebdf-9fb3-4e52-9942-34e6169232e0" name="Match content of [redirectInfo]"><con:configuration><path>$.redirectInfo</path><content>{"href":"http*","params":{*},"method":"POST"}</content><allowWildcards>true</allowWildcards><ignoreNamspaceDifferences>false</ignoreNamspaceDifferences><ignoreComments>false</ignoreComments></con:configuration></con:assertion><con:credentials><con:selectedAuthProfile>No Authorization</con:selectedAuthProfile><con:authType>No Authorization</con:authType></con:credentials><con:jmsConfig JMSDeliveryMode="PERSISTENT"/><con:parameters>
  <con:entry key="agentId" value="${DataSource#agentId}"/>
  <con:entry key="orderSource" value="${DataSource#orderSource}"/>
  <con:entry key="orderNo" value="${DataSource#orderNo}"/>
  <con:entry key="guestMobile" value="${DataSource#guestMobile}"/>
  <con:entry key="payTtl" value="${DataSource#payTtl}"/>
  <con:entry key="bankName" value="${DataSource#bankName}"/>
  <con:entry key="guestEmail" value="${DataSource#guestEmail}"/>
  <con:entry key="orderAmount" value="${DataSource#orderAmount}"/>
  <con:entry key="guestSwid" value="${DataSource#guestSwid}"/>
  <con:entry key="payOption" value="${DataSource#payOption}"/>
  <con:entry key="notifyUrl" value="${DataSource#notifyUrl}"/>
  <con:entry key="currency" value="${DataSource#currency}"/>
  <con:entry key="payChannel" value="${DataSource#payChannel}"/>
  <con:entry key="Accept-Language" value="${DataSource#Accept-Language}"/>
  <con:entry key="region" value="${DataSource#region}"/>
  <con:entry key="returnUrl" value="${DataSource#returnUrl}"/>
</con:parameters><con:parameterOrder><con:entry>Accept-Language</con:entry><con:entry>agentId</con:entry><con:entry>guestEmail</con:entry><con:entry>guestMobile</con:entry><con:entry>guestSwid</con:entry><con:entry>orderNo</con:entry><con:entry>orderAmount</con:entry><con:entry>orderSource</con:entry><con:entry>currency</con:entry><con:entry>payTtl</con:entry><con:entry>notifyUrl</con:entry><con:entry>returnUrl</con:entry><con:entry>region</con:entry><con:entry>payChannel</con:entry><con:entry>bankName</con:entry><con:entry>payOption</con:entry></con:parameterOrder></con:restRequest></con:config></con:testStep><con:properties/><con:reportParameters/><con:breakPoints><con:testStepId>074d781c-00c8-4fae-bfb4-9d9332ac279b</con:testStepId><con:status>NONE</con:status><con:properties/></con:breakPoints></con:testCase><con:testCase id="0038a3e3-0859-4bc7-ba84-2fdc75d18f7f" failOnError="true" failTestCaseOnErrors="true" keepSession="false" maxResults="0" name="T14 payChannel negative" searchProperties="true"><con:settings/><con:testStep type="datasource" name="DataSource" id="ad9be67f-e7c4-45f7-bc2f-a66d122c790a"><con:settings/><con:config xsi:type="con:DataSourceStep" xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance"><con:dataSource type="Grid"><con:configuration><check><![CDATA[<xml-fragment><con:entry xmlns:con="http://eviware.com/soapui/config">true</con:entry><con:entry xmlns:con="http://eviware.com/soapui/config">true</con:entry><con:entry xmlns:con="http://eviware.com/soapui/config">true</con:entry></xml-fragment>]]></check><row><![CDATA[<xml-fragment><con:entry xmlns:con="http://eviware.com/soapui/config">3452344444332</con:entry><con:entry xmlns:con="http://eviware.com/soapui/config"/><con:entry xmlns:con="http://eviware.com/soapui/config"/><con:entry xmlns:con="http://eviware.com/soapui/config"/><con:entry xmlns:con="http://eviware.com/soapui/config">1000.01</con:entry><con:entry xmlns:con="http://eviware.com/soapui/config">TICKETING</con:entry><con:entry xmlns:con="http://eviware.com/soapui/config">CNY</con:entry><con:entry xmlns:con="http://eviware.com/soapui/config">en</con:entry><con:entry xmlns:con="http://eviware.com/soapui/config"/><con:entry xmlns:con="http://eviware.com/soapui/config">ALIPAY</con:entry><con:entry xmlns:con="http://eviware.com/soapui/config">1003:pay channel is required</con:entry><con:entry xmlns:con="http://eviware.com/soapui/config">cn</con:entry></xml-fragment>]]></row><row><![CDATA[<xml-fragment><con:entry xmlns:con="http://eviware.com/soapui/config">3452344444332</con:entry><con:entry xmlns:con="http://eviware.com/soapui/config"/><con:entry xmlns:con="http://eviware.com/soapui/config"/><con:entry xmlns:con="http://eviware.com/soapui/config"/><con:entry xmlns:con="http://eviware.com/soapui/config">1000.02</con:entry><con:entry xmlns:con="http://eviware.com/soapui/config">LODGING</con:entry><con:entry xmlns:con="http://eviware.com/soapui/config">CNY</con:entry><con:entry xmlns:con="http://eviware.com/soapui/config">en</con:entry><con:entry xmlns:con="http://eviware.com/soapui/config">PC</con:entry><con:entry xmlns:con="http://eviware.com/soapui/config">DOMESTIC_CARD</con:entry><con:entry xmlns:con="http://eviware.com/soapui/config">1004:pay channel is invalid</con:entry><con:entry xmlns:con="http://eviware.com/soapui/config">cn</con:entry></xml-fragment>]]></row><row><![CDATA[<xml-fragment><con:entry xmlns:con="http://eviware.com/soapui/config">3452344444332</con:entry><con:entry xmlns:con="http://eviware.com/soapui/config"/><con:entry xmlns:con="http://eviware.com/soapui/config"/><con:entry xmlns:con="http://eviware.com/soapui/config"/><con:entry xmlns:con="http://eviware.com/soapui/config">1000.03</con:entry><con:entry xmlns:con="http://eviware.com/soapui/config">TICKETING</con:entry><con:entry xmlns:con="http://eviware.com/soapui/config">CNY</con:entry><con:entry xmlns:con="http://eviware.com/soapui/config">zh-cn</con:entry><con:entry xmlns:con="http://eviware.com/soapui/config">123</con:entry><con:entry xmlns:con="http://eviware.com/soapui/config">INTERNATIONAL_CARD</con:entry><con:entry xmlns:con="http://eviware.com/soapui/config">1004:pay channel is invalid</con:entry><con:entry xmlns:con="http://eviware.com/soapui/config">cn</con:entry></xml-fragment>]]></row></con:configuration></con:dataSource><con:property>agentId</con:property><con:property>guestEmail</con:property><con:property>guestMobile</con:property><con:property>orderNo</con:property><con:property>orderAmount</con:property><con:property>orderSource</con:property><con:property>currency</con:property><con:property>language</con:property><con:property>payChannel</con:property><con:property>payOption</con:property><con:property>error message</con:property><con:property>region</con:property><con:restartOnRun>true</con:restartOnRun></con:config></con:testStep><con:testStep type="groovy" name="generate orderNo" id="69c6f176-d8d5-4d45-b000-3690955f1bb8"><con:settings/><con:config><script>import java.text.SimpleDateFormat;

def today = new Date()
def format = new SimpleDateFormat();
format = new SimpleDateFormat("yyyyMMddkkmmssSSS");
def DateToStr = format.format(today);

log.info DateToStr
return DateToStr</script></con:config></con:testStep><con:testStep type="restrequest" name="CreateCombinedTransaction" id="e2b13fa8-a59c-4292-8f1d-1f2c7450cd8e"><con:settings/><con:config service="PaymentMiddleware" resourcePath="/payment-middleware-service/transactions/combined" methodName="Method 1" xsi:type="con:RestRequestStep" xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance"><con:restRequest name="CreateCombinedTransaction" id="37607dca-b5c5-490a-9910-01c664282dd1" mediaType="application/json" postQueryString="false"><con:settings><con:setting id="com.eviware.soapui.impl.wsdl.WsdlRequest@request-headers">&lt;xml-fragment/></con:setting></con:settings><con:request>{
    "agentId" : "${agentId}",
    "orderNo" : "${orderNo}",
    "products":[    
        {"description" : "Adult one day part ticket for date 2016-09-15","unitPrice" : 100.00,"qty" : 2, "type" : "PARK_TICKET"},
        {"description" : "Child one day part ticket for date 2016-09-15","unitPrice" : 75.00,"qty" : 3, "type" : "PARK_TICKET"}
    ],
    "orderAmount" : "${orderAmount}",
    "orderSource" : "${orderSource}",
    "currency" : "${currency}",
    "region" : "${region}",
    "payChannel" : "${payChannel}",
    "payOption" : "${payOption}"
}</con:request><con:originalUri>https://latest.payment-middleware-service-lite.nap7.wdpro.disney.com/payment-middleware-service/transactions/combined</con:originalUri><con:assertion type="Valid HTTP Status Codes" id="f5c3e3ec-2372-4786-a189-fbb9e7738043" name="Valid HTTP Status Codes"><con:settings/><con:configuration><codes>400</codes></con:configuration></con:assertion><con:assertion type="Simple Equals" id="2a541977-700d-4d74-8eda-461c6acfaf9a" name="Equals"><con:configuration><patternObjectId>ad9be67f-e7c4-45f7-bc2f-a66d122c790a</patternObjectId><patternProperty>error message</patternProperty><caseSensitive>true</caseSensitive></con:configuration></con:assertion><con:credentials><con:selectedAuthProfile>No Authorization</con:selectedAuthProfile><con:authType>No Authorization</con:authType></con:credentials><con:jmsConfig JMSDeliveryMode="PERSISTENT"/><con:parameters>
  <con:entry key="agentId" value="${DataSource#agentId}"/>
  <con:entry key="orderSource" value="${DataSource#orderSource}"/>
  <con:entry key="orderNo" value="${#[Combined#T13 bankName positive#generate orderNo]#result}"/>
  <con:entry key="guestMobile" value="${DataSource#guestMobile}"/>
  <con:entry key="payTtl" value="${DataSource#payTtl}"/>
  <con:entry key="bankName" value="${DataSource#bankName}"/>
  <con:entry key="guestEmail" value="${DataSource#guestEmail}"/>
  <con:entry key="orderAmount" value="${DataSource#orderAmount}"/>
  <con:entry key="guestSwid" value="${DataSource#guestSwid}"/>
  <con:entry key="payOption" value="${DataSource#payOption}"/>
  <con:entry key="notifyUrl" value="${DataSource#notifyUrl}"/>
  <con:entry key="currency" value="${DataSource#currency}"/>
  <con:entry key="payChannel" value="${DataSource#payChannel}"/>
  <con:entry key="Accept-Language" value="${DataSource#Accept-Language}"/>
  <con:entry key="region" value="${DataSource#region}"/>
  <con:entry key="returnUrl" value="${DataSource#returnUrl}"/>
</con:parameters><con:parameterOrder><con:entry>Accept-Language</con:entry><con:entry>agentId</con:entry><con:entry>guestEmail</con:entry><con:entry>guestMobile</con:entry><con:entry>guestSwid</con:entry><con:entry>orderNo</con:entry><con:entry>orderAmount</con:entry><con:entry>orderSource</con:entry><con:entry>currency</con:entry><con:entry>payTtl</con:entry><con:entry>notifyUrl</con:entry><con:entry>returnUrl</con:entry><con:entry>region</con:entry><con:entry>payChannel</con:entry><con:entry>bankName</con:entry><con:entry>payOption</con:entry></con:parameterOrder></con:restRequest></con:config></con:testStep><con:testStep type="datasourceloop" name="DataSource Loop" id="64397b72-ebea-4f36-96b1-139302a18105"><con:settings/><con:config><dataSourceStep>DataSource</dataSourceStep><targetStep>generate orderNo</targetStep></con:config></con:testStep><con:properties/><con:reportParameters/><con:breakPoints><con:testStepId>e2b13fa8-a59c-4292-8f1d-1f2c7450cd8e</con:testStepId><con:status>NONE</con:status><con:properties/></con:breakPoints></con:testCase><con:testCase id="e3b691b0-df98-4a3f-952f-84cf6e0e8b29" failOnError="true" failTestCaseOnErrors="true" keepSession="false" maxResults="0" name="T15 payOption negative" searchProperties="true"><con:settings/><con:testStep type="datasource" name="DataSource" id="cf5245bb-b2a4-4f93-8b9e-886e2d0ffc5a"><con:settings/><con:config xsi:type="con:DataSourceStep" xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance"><con:dataSource type="Grid"><con:configuration><check><![CDATA[<xml-fragment><con:entry xmlns:con="http://eviware.com/soapui/config">true</con:entry><con:entry xmlns:con="http://eviware.com/soapui/config">true</con:entry><con:entry xmlns:con="http://eviware.com/soapui/config">true</con:entry></xml-fragment>]]></check><row><![CDATA[<xml-fragment><con:entry xmlns:con="http://eviware.com/soapui/config">3452344444332</con:entry><con:entry xmlns:con="http://eviware.com/soapui/config"/><con:entry xmlns:con="http://eviware.com/soapui/config"/><con:entry xmlns:con="http://eviware.com/soapui/config"/><con:entry xmlns:con="http://eviware.com/soapui/config">1000.01</con:entry><con:entry xmlns:con="http://eviware.com/soapui/config">TICKETING</con:entry><con:entry xmlns:con="http://eviware.com/soapui/config">CNY</con:entry><con:entry xmlns:con="http://eviware.com/soapui/config">zh-cn</con:entry><con:entry xmlns:con="http://eviware.com/soapui/config">PC_WEB</con:entry><con:entry xmlns:con="http://eviware.com/soapui/config"/><con:entry xmlns:con="http://eviware.com/soapui/config">1007:pay option is required</con:entry><con:entry xmlns:con="http://eviware.com/soapui/config">cn</con:entry></xml-fragment>]]></row><row><![CDATA[<xml-fragment><con:entry xmlns:con="http://eviware.com/soapui/config">3452344444332</con:entry><con:entry xmlns:con="http://eviware.com/soapui/config"/><con:entry xmlns:con="http://eviware.com/soapui/config"/><con:entry xmlns:con="http://eviware.com/soapui/config"/><con:entry xmlns:con="http://eviware.com/soapui/config">1000.02</con:entry><con:entry xmlns:con="http://eviware.com/soapui/config">LODGING</con:entry><con:entry xmlns:con="http://eviware.com/soapui/config">CNY</con:entry><con:entry xmlns:con="http://eviware.com/soapui/config">zh-cn</con:entry><con:entry xmlns:con="http://eviware.com/soapui/config">PC_WEB</con:entry><con:entry xmlns:con="http://eviware.com/soapui/config">PAYECHO</con:entry><con:entry xmlns:con="http://eviware.com/soapui/config">1008:pay option is invalid</con:entry><con:entry xmlns:con="http://eviware.com/soapui/config">cn</con:entry></xml-fragment>]]></row><row><![CDATA[<xml-fragment><con:entry xmlns:con="http://eviware.com/soapui/config">3452344444332</con:entry><con:entry xmlns:con="http://eviware.com/soapui/config"/><con:entry xmlns:con="http://eviware.com/soapui/config"/><con:entry xmlns:con="http://eviware.com/soapui/config"/><con:entry xmlns:con="http://eviware.com/soapui/config">1000.03</con:entry><con:entry xmlns:con="http://eviware.com/soapui/config">TICKETING</con:entry><con:entry xmlns:con="http://eviware.com/soapui/config">CNY</con:entry><con:entry xmlns:con="http://eviware.com/soapui/config">zh-cn</con:entry><con:entry xmlns:con="http://eviware.com/soapui/config">PC_WEB</con:entry><con:entry xmlns:con="http://eviware.com/soapui/config">111</con:entry><con:entry xmlns:con="http://eviware.com/soapui/config">1008:pay option is invalid</con:entry><con:entry xmlns:con="http://eviware.com/soapui/config">cn</con:entry></xml-fragment>]]></row></con:configuration></con:dataSource><con:property>agentId</con:property><con:property>guestEmail</con:property><con:property>guestMobile</con:property><con:property>orderNo</con:property><con:property>orderAmount</con:property><con:property>orderSource</con:property><con:property>currency</con:property><con:property>language</con:property><con:property>payChannel</con:property><con:property>payOption</con:property><con:property>error message</con:property><con:property>region</con:property><con:restartOnRun>true</con:restartOnRun></con:config></con:testStep><con:testStep type="groovy" name="generate orderNo" id="b19e70c2-407a-460a-820a-d616a13cc383"><con:settings/><con:config><script>import java.text.SimpleDateFormat;

def today = new Date()
def format = new SimpleDateFormat();
format = new SimpleDateFormat("yyyyMMddkkmmssSSS");
def DateToStr = format.format(today);

log.info DateToStr
return DateToStr</script></con:config></con:testStep><con:testStep type="restrequest" name="CreateCombinedTransaction" id="04e24f70-b4fc-47f7-9b64-5107f1aae8a0"><con:settings/><con:config service="PaymentMiddleware" resourcePath="/payment-middleware-service/transactions/combined" methodName="Method 1" xsi:type="con:RestRequestStep" xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance"><con:restRequest name="CreateCombinedTransaction" id="37607dca-b5c5-490a-9910-01c664282dd1" mediaType="application/json" postQueryString="false"><con:settings><con:setting id="com.eviware.soapui.impl.wsdl.WsdlRequest@request-headers">&lt;xml-fragment/></con:setting></con:settings><con:request>{
    "agentId" : "${agentId}",
    "orderNo" : "${orderNo}",
    "products":[    
        {"description" : "Adult one day part ticket for date 2016-09-15","unitPrice" : 100.00,"qty" : 2, "type" : "PARK_TICKET"},
        {"description" : "Child one day part ticket for date 2016-09-15","unitPrice" : 75.00,"qty" : 3, "type" : "PARK_TICKET"}
    ],
    "orderAmount" : "${orderAmount}",
    "orderSource" : "${orderSource}",
    "currency" : "${currency}",
    "region" : "${region}",
    "payChannel" : "${payChannel}",
    "payOption" : "${payOption}"
}</con:request><con:originalUri>https://latest.payment-middleware-service-lite.nap7.wdpro.disney.com/payment-middleware-service/transactions/combined</con:originalUri><con:assertion type="Valid HTTP Status Codes" id="f5c3e3ec-2372-4786-a189-fbb9e7738043" name="Valid HTTP Status Codes"><con:settings/><con:configuration><codes>400</codes></con:configuration></con:assertion><con:assertion type="Simple Equals" id="2a541977-700d-4d74-8eda-461c6acfaf9a" name="Equals"><con:configuration><patternObjectId>cf5245bb-b2a4-4f93-8b9e-886e2d0ffc5a</patternObjectId><patternProperty>error message</patternProperty><caseSensitive>true</caseSensitive></con:configuration></con:assertion><con:credentials><con:selectedAuthProfile>No Authorization</con:selectedAuthProfile><con:authType>No Authorization</con:authType></con:credentials><con:jmsConfig JMSDeliveryMode="PERSISTENT"/><con:parameters>
  <con:entry key="agentId" value="${DataSource#agentId}"/>
  <con:entry key="orderSource" value="${DataSource#orderSource}"/>
  <con:entry key="orderNo" value="${generate orderNo#result}"/>
  <con:entry key="guestMobile" value="${DataSource#guestMobile}"/>
  <con:entry key="payTtl" value="${DataSource#payTtl}"/>
  <con:entry key="bankName" value="${DataSource#bankName}"/>
  <con:entry key="guestEmail" value="${DataSource#guestEmail}"/>
  <con:entry key="orderAmount" value="${DataSource#orderAmount}"/>
  <con:entry key="guestSwid" value="${DataSource#guestSwid}"/>
  <con:entry key="payOption" value="${DataSource#payOption}"/>
  <con:entry key="notifyUrl" value="${DataSource#notifyUrl}"/>
  <con:entry key="currency" value="${DataSource#currency}"/>
  <con:entry key="payChannel" value="${DataSource#payChannel}"/>
  <con:entry key="Accept-Language" value="${DataSource#Accept-Language}"/>
  <con:entry key="region" value="${DataSource#region}"/>
  <con:entry key="returnUrl" value="${DataSource#returnUrl}"/>
</con:parameters><con:parameterOrder><con:entry>Accept-Language</con:entry><con:entry>agentId</con:entry><con:entry>guestEmail</con:entry><con:entry>guestMobile</con:entry><con:entry>guestSwid</con:entry><con:entry>orderNo</con:entry><con:entry>orderAmount</con:entry><con:entry>orderSource</con:entry><con:entry>currency</con:entry><con:entry>payTtl</con:entry><con:entry>notifyUrl</con:entry><con:entry>returnUrl</con:entry><con:entry>region</con:entry><con:entry>payChannel</con:entry><con:entry>bankName</con:entry><con:entry>payOption</con:entry></con:parameterOrder></con:restRequest></con:config></con:testStep><con:testStep type="datasourceloop" name="DataSource Loop" id="27272623-4e99-4032-9c6f-af00518ad5ec"><con:settings/><con:config><dataSourceStep>DataSource</dataSourceStep><targetStep>generate orderNo</targetStep></con:config></con:testStep><con:properties/><con:reportParameters/><con:breakPoints><con:testStepId>27272623-4e99-4032-9c6f-af00518ad5ec</con:testStepId><con:status>NONE</con:status><con:properties/></con:breakPoints></con:testCase><con:testCase id="9ae5254b-ab37-41bb-a8dc-f7ef14528e19" failOnError="true" failTestCaseOnErrors="true" keepSession="false" maxResults="0" name="T16 bankName negative" searchProperties="true"><con:settings/><con:testStep type="datasource" name="DataSource" id="befeb667-d52a-4eeb-a21c-038d7e7ab656"><con:settings/><con:config xsi:type="con:DataSourceStep" xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance"><con:dataSource type="Grid"><con:configuration><check><![CDATA[<xml-fragment><con:entry xmlns:con="http://eviware.com/soapui/config">true</con:entry><con:entry xmlns:con="http://eviware.com/soapui/config">false</con:entry><con:entry xmlns:con="http://eviware.com/soapui/config">true</con:entry><con:entry xmlns:con="http://eviware.com/soapui/config">false</con:entry></xml-fragment>]]></check><row><![CDATA[<xml-fragment><con:entry xmlns:con="http://eviware.com/soapui/config">3452344444332</con:entry><con:entry xmlns:con="http://eviware.com/soapui/config"/><con:entry xmlns:con="http://eviware.com/soapui/config"/><con:entry xmlns:con="http://eviware.com/soapui/config"/><con:entry xmlns:con="http://eviware.com/soapui/config">1000.01</con:entry><con:entry xmlns:con="http://eviware.com/soapui/config">TICKETING</con:entry><con:entry xmlns:con="http://eviware.com/soapui/config">CNY</con:entry><con:entry xmlns:con="http://eviware.com/soapui/config">zh-cn</con:entry><con:entry xmlns:con="http://eviware.com/soapui/config">PC_WEB</con:entry><con:entry xmlns:con="http://eviware.com/soapui/config">DOMESTIC_CARD</con:entry><con:entry xmlns:con="http://eviware.com/soapui/config">1017:bank name is invalid</con:entry><con:entry xmlns:con="http://eviware.com/soapui/config">111</con:entry><con:entry xmlns:con="http://eviware.com/soapui/config">cn</con:entry></xml-fragment>]]></row><row><![CDATA[<xml-fragment><con:entry xmlns:con="http://eviware.com/soapui/config">3452344444332</con:entry><con:entry xmlns:con="http://eviware.com/soapui/config"/><con:entry xmlns:con="http://eviware.com/soapui/config"/><con:entry xmlns:con="http://eviware.com/soapui/config"/><con:entry xmlns:con="http://eviware.com/soapui/config">1000.02</con:entry><con:entry xmlns:con="http://eviware.com/soapui/config">TICKETING</con:entry><con:entry xmlns:con="http://eviware.com/soapui/config">CNY</con:entry><con:entry xmlns:con="http://eviware.com/soapui/config">zh-cn</con:entry><con:entry xmlns:con="http://eviware.com/soapui/config">PC_WEB</con:entry><con:entry xmlns:con="http://eviware.com/soapui/config">ALIPAY</con:entry><con:entry xmlns:con="http://eviware.com/soapui/config">1017:bank name is invalid</con:entry><con:entry xmlns:con="http://eviware.com/soapui/config">111</con:entry><con:entry xmlns:con="http://eviware.com/soapui/config">cn</con:entry></xml-fragment>]]></row><row><![CDATA[<xml-fragment><con:entry xmlns:con="http://eviware.com/soapui/config">3452344444332</con:entry><con:entry xmlns:con="http://eviware.com/soapui/config"/><con:entry xmlns:con="http://eviware.com/soapui/config"/><con:entry xmlns:con="http://eviware.com/soapui/config"/><con:entry xmlns:con="http://eviware.com/soapui/config">1000.03</con:entry><con:entry xmlns:con="http://eviware.com/soapui/config">TICKETING</con:entry><con:entry xmlns:con="http://eviware.com/soapui/config">CNY</con:entry><con:entry xmlns:con="http://eviware.com/soapui/config">zh-cn</con:entry><con:entry xmlns:con="http://eviware.com/soapui/config">PC_WEB</con:entry><con:entry xmlns:con="http://eviware.com/soapui/config">INTERNATIONAL_CARD</con:entry><con:entry xmlns:con="http://eviware.com/soapui/config">1019:international card is invalid</con:entry><con:entry xmlns:con="http://eviware.com/soapui/config">111</con:entry><con:entry xmlns:con="http://eviware.com/soapui/config">cn</con:entry></xml-fragment>]]></row><row><![CDATA[<xml-fragment><con:entry xmlns:con="http://eviware.com/soapui/config">3452344444332</con:entry><con:entry xmlns:con="http://eviware.com/soapui/config"/><con:entry xmlns:con="http://eviware.com/soapui/config"/><con:entry xmlns:con="http://eviware.com/soapui/config"/><con:entry xmlns:con="http://eviware.com/soapui/config">1000.04</con:entry><con:entry xmlns:con="http://eviware.com/soapui/config">TICKETING</con:entry><con:entry xmlns:con="http://eviware.com/soapui/config">CNY</con:entry><con:entry xmlns:con="http://eviware.com/soapui/config">zh-cn</con:entry><con:entry xmlns:con="http://eviware.com/soapui/config">PC_WEB</con:entry><con:entry xmlns:con="http://eviware.com/soapui/config">CALLBACK</con:entry><con:entry xmlns:con="http://eviware.com/soapui/config">1017:bank name is invalid</con:entry><con:entry xmlns:con="http://eviware.com/soapui/config">111</con:entry><con:entry xmlns:con="http://eviware.com/soapui/config">cn</con:entry></xml-fragment>]]></row></con:configuration></con:dataSource><con:property>agentId</con:property><con:property>guestEmail</con:property><con:property>guestMobile</con:property><con:property>orderNo</con:property><con:property>orderAmount</con:property><con:property>orderSource</con:property><con:property>currency</con:property><con:property>language</con:property><con:property>payChannel</con:property><con:property>payOption</con:property><con:property>error message</con:property><con:property>bankName</con:property><con:property>region</con:property><con:restartOnRun>true</con:restartOnRun></con:config></con:testStep><con:testStep type="groovy" name="generate orderNo" id="4fde27d8-bb88-4c34-9985-93b0a15c83e3"><con:settings/><con:config><script>import java.text.SimpleDateFormat;

def today = new Date()
def format = new SimpleDateFormat();
format = new SimpleDateFormat("yyyyMMddkkmmssSSS");
def DateToStr = format.format(today);

log.info DateToStr
return DateToStr</script></con:config></con:testStep><con:testStep type="restrequest" name="CreateCombinedTransaction" id="1e400d45-3efd-4638-812b-920db7d859dd"><con:settings/><con:config service="PaymentMiddleware" resourcePath="/payment-middleware-service/transactions/combined" methodName="Method 1" xsi:type="con:RestRequestStep" xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance"><con:restRequest name="CreateCombinedTransaction" id="37607dca-b5c5-490a-9910-01c664282dd1" mediaType="application/json" postQueryString="false"><con:settings><con:setting id="com.eviware.soapui.impl.wsdl.WsdlRequest@request-headers">&lt;xml-fragment/></con:setting></con:settings><con:request>{
    "agentId" : "${agentId}",
    "orderNo" : "${orderNo}",
    "products":[    
        {"description" : "Adult one day part ticket for date 2016-09-15","unitPrice" : 100.00,"qty" : 2, "type" : "PARK_TICKET"},
        {"description" : "Child one day part ticket for date 2016-09-15","unitPrice" : 75.00,"qty" : 3, "type" : "PARK_TICKET"}
    ],
    "orderAmount" : "${orderAmount}",
    "orderSource" : "${orderSource}",
    "currency" : "${currency}",
    "region" : "${region}",
    "payChannel" : "${payChannel}",
    "payOption" : "${payOption}",
    "bankName" : "${bankName}"
}</con:request><con:originalUri>https://latest.payment-middleware-service-lite.nap7.wdpro.disney.com/payment-middleware-service/transactions/combined</con:originalUri><con:assertion type="Valid HTTP Status Codes" id="f5c3e3ec-2372-4786-a189-fbb9e7738043" name="Valid HTTP Status Codes"><con:settings/><con:configuration><codes>400</codes></con:configuration></con:assertion><con:assertion type="Simple Equals" id="bc244514-6ac3-4b43-88e2-6e04d561e4b0" name="Equals"><con:configuration><patternObjectId>befeb667-d52a-4eeb-a21c-038d7e7ab656</patternObjectId><patternProperty>error message</patternProperty><caseSensitive>true</caseSensitive></con:configuration></con:assertion><con:credentials><con:selectedAuthProfile>No Authorization</con:selectedAuthProfile><con:authType>No Authorization</con:authType></con:credentials><con:jmsConfig JMSDeliveryMode="PERSISTENT"/><con:parameters>
  <con:entry key="agentId" value="${DataSource#agentId}"/>
  <con:entry key="orderSource" value="${DataSource#orderSource}"/>
  <con:entry key="orderNo" value="${generate orderNo#result}"/>
  <con:entry key="guestMobile" value="${DataSource#guestMobile}"/>
  <con:entry key="payTtl" value="${DataSource#payTtl}"/>
  <con:entry key="bankName" value="${DataSource#bankName}"/>
  <con:entry key="guestEmail" value="${DataSource#guestEmail}"/>
  <con:entry key="orderAmount" value="${DataSource#orderAmount}"/>
  <con:entry key="guestSwid" value="${DataSource#guestSwid}"/>
  <con:entry key="payOption" value="${DataSource#payOption}"/>
  <con:entry key="notifyUrl" value="${DataSource#notifyUrl}"/>
  <con:entry key="currency" value="${DataSource#currency}"/>
  <con:entry key="payChannel" value="${DataSource#payChannel}"/>
  <con:entry key="Accept-Language" value="${DataSource#Accept-Language}"/>
  <con:entry key="region" value="${DataSource#region}"/>
  <con:entry key="returnUrl" value="${DataSource#returnUrl}"/>
</con:parameters><con:parameterOrder><con:entry>Accept-Language</con:entry><con:entry>agentId</con:entry><con:entry>guestEmail</con:entry><con:entry>guestMobile</con:entry><con:entry>guestSwid</con:entry><con:entry>orderNo</con:entry><con:entry>orderAmount</con:entry><con:entry>orderSource</con:entry><con:entry>currency</con:entry><con:entry>payTtl</con:entry><con:entry>notifyUrl</con:entry><con:entry>returnUrl</con:entry><con:entry>region</con:entry><con:entry>payChannel</con:entry><con:entry>bankName</con:entry><con:entry>payOption</con:entry></con:parameterOrder></con:restRequest></con:config></con:testStep><con:testStep type="datasourceloop" name="DataSource Loop" id="31c07099-023f-4ca8-aeb1-1868e3cfbf43"><con:settings/><con:config><dataSourceStep>DataSource</dataSourceStep><targetStep>generate orderNo</targetStep></con:config></con:testStep><con:properties/><con:reportParameters/><con:breakPoints><con:testStepId>51e28968-f10d-486e-8f88-721d04880961</con:testStepId><con:status>NONE</con:status><con:properties/></con:breakPoints><con:breakPoints><con:testStepId>d3ff568b-81bc-4ba5-b6d0-02ab56b12239</con:testStepId><con:status>NONE</con:status><con:properties/></con:breakPoints><con:breakPoints><con:testStepId>1e400d45-3efd-4638-812b-920db7d859dd</con:testStepId><con:status>NONE</con:status><con:properties/></con:breakPoints></con:testCase><con:properties/><con:reportParameters/></con:testSuite><con:testSuite id="f7569f66-b04c-4d74-b63b-1501cf0821ca" name="PayOptions"><con:settings/><con:runType>SEQUENTIAL</con:runType><con:testCase id="38b79abc-fcfd-4bab-9964-761557af33c8" failOnError="true" failTestCaseOnErrors="true" keepSession="false" maxResults="0" name="T01 Get Pay Options" searchProperties="true"><con:settings/><con:testStep type="restrequest" name="REST Request" id="f5c617cb-6e46-40c2-b8eb-2267dca511d1"><con:settings/><con:config service="PaymentMiddleware" resourcePath="/payment-middleware-service/pay-options" methodName="pay-options" xsi:type="con:RestRequestStep" xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance"><con:restRequest name="REST Request" id="2739f281-68b4-4484-b9e7-58443efffaab" mediaType="application/json"><con:settings><con:setting id="com.eviware.soapui.impl.wsdl.WsdlRequest@request-headers">&lt;xml-fragment/></con:setting></con:settings><con:endpoint>${#Project#ServiceEndpoint}</con:endpoint><con:request/><con:originalUri>http://68.71.208.254/payment-middleware-service/pay-options</con:originalUri><con:assertion type="Valid HTTP Status Codes" id="ba9a2f22-751f-41f4-9768-27e558d3093c" name="Valid HTTP Status Codes"><con:settings/><con:configuration><codes>200</codes></con:configuration></con:assertion><con:assertion type="JsonPath Match" id="aef40536-ed5e-40bf-ba22-93f1fe27b422" name="JsonPath0 Match"><con:configuration><path>$[0]</path><content>{"name":"ALIPAY","agencySpecific":false,"enabled":true}</content><allowWildcards>false</allowWildcards><ignoreNamspaceDifferences>false</ignoreNamspaceDifferences><ignoreComments>false</ignoreComments></con:configuration></con:assertion><con:assertion type="JsonPath Match" id="aef40536-ed5e-40bf-ba22-93f1fe27b422" name="JsonPath1 Match"><con:configuration><path>$[1]</path><content>{"name":"DOMESTIC_CARD","agencySpecific":false,"enabled":true,"banks":[{"bankName":"SHDR_DOMESTIC_BANK_CMB","enabled":true},{"bankName":"SHDR_DOMESTIC_BANK_CCB","enabled":true}]}</content><allowWildcards>false</allowWildcards><ignoreNamspaceDifferences>false</ignoreNamspaceDifferences><ignoreComments>false</ignoreComments></con:configuration></con:assertion><con:assertion type="JsonPath Match" id="6442674a-337c-4c85-b21a-8d9899f62e88" name="JsonPath2 Match"><con:configuration><path>$[2]</path><content>{"name":"INTERNATIONAL_CARD","agencySpecific":false,"enabled":true,"cards":[{"cardName":"SHDR_INTERNATIONAL_CARD_VISA","enabled":true},{"cardName":"SHDR_INTERNATIONAL_CARD_MASTERCARD","enabled":true},{"cardName":"SHDR_INTERNATIONAL_CARD_JCB","enabled":true}]}</content><allowWildcards>false</allowWildcards><ignoreNamspaceDifferences>false</ignoreNamspaceDifferences><ignoreComments>false</ignoreComments></con:configuration></con:assertion><con:assertion type="JsonPath Match" id="0514e28a-f818-489b-8c30-9dfc1d52fd00" name="JsonPath3 Match"><con:configuration><path>$[3]</path><content>{"name":"CALLBACK","agencySpecific":true,"enabled":true}</content><allowWildcards>false</allowWildcards><ignoreNamspaceDifferences>false</ignoreNamspaceDifferences><ignoreComments>false</ignoreComments></con:configuration></con:assertion><con:credentials><con:username xsi:nil="true"/><con:password xsi:nil="true"/><con:domain xsi:nil="true"/><con:selectedAuthProfile>No Authorization</con:selectedAuthProfile><con:authType>No Authorization</con:authType></con:credentials><con:jmsConfig JMSDeliveryMode="PERSISTENT"/><con:parameters/></con:restRequest></con:config></con:testStep><con:properties/><con:reportParameters/></con:testCase><con:properties/><con:reportParameters/></con:testSuite><con:testSuite id="db1e5235-7dc0-4b42-abdf-3355023e763a" name="GetOrderStatus"><con:settings/><con:runType>SEQUENTIAL</con:runType><con:properties/><con:reportParameters/></con:testSuite><con:testSuite id="738f2de7-4773-483d-a9cf-7047547e2b68" name="Get Session"><con:settings/><con:runType>SEQUENTIAL</con:runType><con:testCase id="cbc2e069-e9af-4c6e-9178-15a9be19ed98" failOnError="true" failTestCaseOnErrors="true" keepSession="false" maxResults="0" name="T01 By Session Id positive" searchProperties="true"><con:settings/><con:testStep type="groovy" name="generate orderNo" id="1aea33b3-273d-4895-ad1b-17d5d38d441b"><con:settings/><con:config><script>import java.text.SimpleDateFormat;

def today = new Date()
def format = new SimpleDateFormat();
format = new SimpleDateFormat("yyyyMMddkkmmssSSS");
def DateToStr = format.format(today);

log.info DateToStr
return DateToStr</script></con:config></con:testStep><con:testStep type="datasource" name="DataSource" id="b4df5491-d4c2-41ee-851d-bb518028d098"><con:settings/><con:config xsi:type="con:DataSourceStep" xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance"><con:dataSource type="Grid"><con:configuration><check><![CDATA[<xml-fragment><con:entry xmlns:con="http://eviware.com/soapui/config">true</con:entry><con:entry xmlns:con="http://eviware.com/soapui/config">true</con:entry></xml-fragment>]]></check><row><![CDATA[<xml-fragment><con:entry xmlns:con="http://eviware.com/soapui/config">3452344444332</con:entry><con:entry xmlns:con="http://eviware.com/soapui/config">null</con:entry><con:entry xmlns:con="http://eviware.com/soapui/config">null</con:entry><con:entry xmlns:con="http://eviware.com/soapui/config">${generate orderNo#result}</con:entry><con:entry xmlns:con="http://eviware.com/soapui/config">1000.01</con:entry><con:entry xmlns:con="http://eviware.com/soapui/config">TICKETING</con:entry><con:entry xmlns:con="http://eviware.com/soapui/config">CNY</con:entry></xml-fragment>]]></row><row><![CDATA[<xml-fragment><con:entry xmlns:con="http://eviware.com/soapui/config"/><con:entry xmlns:con="http://eviware.com/soapui/config"/><con:entry xmlns:con="http://eviware.com/soapui/config"/><con:entry xmlns:con="http://eviware.com/soapui/config"/><con:entry xmlns:con="http://eviware.com/soapui/config"/><con:entry xmlns:con="http://eviware.com/soapui/config"/><con:entry xmlns:con="http://eviware.com/soapui/config"/></xml-fragment>]]></row></con:configuration></con:dataSource><con:property>agentId</con:property><con:property>guestEmail</con:property><con:property>guestMobile</con:property><con:property>orderNo</con:property><con:property>orderAmount</con:property><con:property>orderSource</con:property><con:property>currency</con:property><con:restartOnRun>true</con:restartOnRun></con:config></con:testStep><con:testStep type="restrequest" name="createSession request" id="4e81d17b-c43f-423a-a4ae-0cb1f0a29eba"><con:settings/><con:config service="PaymentMiddleware" resourcePath="/payment-middleware-service/sessions" methodName="Sessions" xsi:type="con:RestRequestStep" xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance"><con:restRequest name="createSession request" id="ac10df94-13d9-4eb3-9c59-7dd8a7e807e1" mediaType="application/json" postQueryString="false"><con:settings><con:setting id="com.eviware.soapui.impl.wsdl.WsdlRequest@request-headers">&lt;xml-fragment/></con:setting></con:settings><con:endpoint>${#Project#ServiceEndpoint}</con:endpoint><con:request>{
    "agentId" : "${agentId}",
    "orderNo" : "${orderNo}",
    "products":[    
        {"description" : "Adult one day part ticket for date 2016-09-15","unitPrice" : 100.00,"qty" : 2, "type" : "PARK_TICKET"},
        {"description" : "Child one day part ticket for date 2016-09-15","unitPrice" : 75.00,"qty" : 3, "type" : "PARK_TICKET"}
    ],
    "orderAmount" : "${orderAmount}",
    "orderSource" : "${orderSource}",
    "currency" : "${currency}"
}</con:request><con:originalUri>http://68.71.208.254/payment-middleware-service/sessions</con:originalUri><con:assertion type="JsonPath Match" id="6c934317-5f11-4bc6-9579-3f69cd4aa632" name="Match content of [orderAmount]"><con:configuration><path>$.sessionInfo.orderAmount</path><content>${DataSource#orderAmount}</content><allowWildcards>false</allowWildcards><ignoreNamspaceDifferences>false</ignoreNamspaceDifferences><ignoreComments>false</ignoreComments></con:configuration></con:assertion><con:assertion type="JsonPath Match" id="ce8eb01a-26fb-4e06-a9b1-e6f6a0b897ba" name="Match content of [links]"><con:configuration><path>$.links</path><content>{"cancelSession":{"rel":"related","href":"*://*/payment-middleware-service/session/*","type":"text/plain"},"getSession":{"rel":"related","href":"*://*/payment-middleware-service/session/*","type":"application/json"},"createTransaction":{"rel":"related","href":"*://*/payment-middleware-service/session/*/transactions","type":"application/json"}}</content><allowWildcards>true</allowWildcards><ignoreNamspaceDifferences>false</ignoreNamspaceDifferences><ignoreComments>false</ignoreComments></con:configuration></con:assertion><con:credentials><con:username xsi:nil="true"/><con:password xsi:nil="true"/><con:domain xsi:nil="true"/><con:selectedAuthProfile>No Authorization</con:selectedAuthProfile><con:authType>No Authorization</con:authType></con:credentials><con:jmsConfig JMSDeliveryMode="PERSISTENT"/><con:jmsPropertyConfig/><con:parameters>
  <con:entry key="orderSource" value="${DataSource#orderSource}"/>
  <con:entry key="agentId" value="${DataSource#agentId}"/>
  <con:entry key="orderNo" value="${DataSource#orderNo}"/>
  <con:entry key="orderAmount" value="${DataSource#orderAmount}"/>
  <con:entry key="guestMobile" value="${DataSource#guestMobile}"/>
  <con:entry key="currency" value="${DataSource#currency}"/>
  <con:entry key="guestEmail" value="${DataSource#guestEmail}"/>
</con:parameters><con:parameterOrder><con:entry>agentId</con:entry><con:entry>guestEmail</con:entry><con:entry>guestMobile</con:entry><con:entry>orderNo</con:entry><con:entry>orderAmount</con:entry><con:entry>orderSource</con:entry><con:entry>currency</con:entry><con:entry>payTtl</con:entry><con:entry>notifyUrl</con:entry><con:entry>guestSwid</con:entry><con:entry>returnUrl</con:entry></con:parameterOrder></con:restRequest></con:config></con:testStep><con:testStep type="restrequest" name="Get Session" id="7413d302-2743-4f6c-b7c6-4ead08343047"><con:settings/><con:config service="PaymentMiddleware" resourcePath="/payment-middleware-service/session/{sessionId}" methodName="sessionId" xsi:type="con:RestRequestStep" xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance"><con:restRequest name="Get Session" id="e8e0e0ac-f063-409c-b2ec-d755eb653cc8" mediaType="application/json"><con:settings><con:setting id="com.eviware.soapui.impl.wsdl.WsdlRequest@request-headers">&lt;xml-fragment/></con:setting></con:settings><con:endpoint>${#Project#ServiceEndpoint}</con:endpoint><con:request/><con:originalUri>http://68.71.208.254/payment-middleware-service/session/sessionId</con:originalUri><con:assertion type="JsonPath Match" id="9a7844f9-3a6b-444e-ae0e-e96681a1d15e" name="Match content of [sessionId]"><con:configuration><path>$.sessionId</path><content>${createSession request#Response#$.sessionInfo.sessionId}</content><allowWildcards>false</allowWildcards><ignoreNamspaceDifferences>false</ignoreNamspaceDifferences><ignoreComments>false</ignoreComments></con:configuration></con:assertion><con:assertion type="JsonPath Match" id="90666a8a-16b0-4b24-ad99-5a6135c27cdf" name="Match content of [orderNo]"><con:configuration><path>$.orderNo</path><content>${DataSource#orderNo}</content><allowWildcards>false</allowWildcards><ignoreNamspaceDifferences>false</ignoreNamspaceDifferences><ignoreComments>false</ignoreComments></con:configuration></con:assertion><con:assertion type="JsonPath Match" id="9bc7187d-e40b-4c4e-a115-464945575f0e" name="Match content of [orderAmount]"><con:configuration><path>$.orderAmount</path><content>${DataSource#orderAmount}</content><allowWildcards>false</allowWildcards><ignoreNamspaceDifferences>false</ignoreNamspaceDifferences><ignoreComments>false</ignoreComments></con:configuration></con:assertion><con:assertion type="JsonPath Match" id="c228a952-0960-4b7e-bae9-879f4e1db5ef" name="Match content of [currency]"><con:configuration><path>$.currency</path><content>${DataSource#currency}</content><allowWildcards>false</allowWildcards><ignoreNamspaceDifferences>false</ignoreNamspaceDifferences><ignoreComments>false</ignoreComments></con:configuration></con:assertion><con:assertion type="JsonPath Match" id="9e3c3060-ca82-4996-8902-425687e4d22a" name="Match content of [orderSource]"><con:configuration><path>$.orderSource</path><content>${DataSource#orderSource}</content><allowWildcards>false</allowWildcards><ignoreNamspaceDifferences>false</ignoreNamspaceDifferences><ignoreComments>false</ignoreComments></con:configuration></con:assertion><con:assertion type="JsonPath Match" id="9bbcfcce-4259-4bd8-a6ff-0389dc2c3dc7" name="Match content of [state]"><con:configuration><path>$.state</path><content>UNPAID</content><allowWildcards>false</allowWildcards><ignoreNamspaceDifferences>false</ignoreNamspaceDifferences><ignoreComments>false</ignoreComments></con:configuration></con:assertion><con:assertion type="JsonPath Match" id="859e3c21-4345-45f4-bb14-a42613758c75" name="Match content of [guestEmail]"><con:configuration><path>$.guestEmail</path><content>${DataSource#guestEmail}</content><allowWildcards>false</allowWildcards><ignoreNamspaceDifferences>false</ignoreNamspaceDifferences><ignoreComments>false</ignoreComments></con:configuration></con:assertion><con:assertion type="JsonPath Match" id="ab4f3486-4409-488f-b583-a806d006ceec" name="Match content of [guestMobile]"><con:configuration><path>$.guestMobile</path><content>${DataSource#guestMobile}</content><allowWildcards>false</allowWildcards><ignoreNamspaceDifferences>false</ignoreNamspaceDifferences><ignoreComments>false</ignoreComments></con:configuration></con:assertion><con:assertion type="JsonPath Match" id="dbd26009-cbde-4bb4-951a-4d70872da49a" name="Match content of [agentId]"><con:configuration><path>$.agentId</path><content>${DataSource#agentId}</content><allowWildcards>false</allowWildcards><ignoreNamspaceDifferences>false</ignoreNamspaceDifferences><ignoreComments>false</ignoreComments></con:configuration></con:assertion><con:assertion type="JsonPath Match" id="2f9a8233-a966-4bfc-ab48-fc238f02efc7" name="Match content of [remark]"><con:configuration><path>$.remark</path><content>null</content><allowWildcards>false</allowWildcards><ignoreNamspaceDifferences>false</ignoreNamspaceDifferences><ignoreComments>false</ignoreComments></con:configuration></con:assertion><con:assertion type="JsonPath Match" id="af2e7dfa-eab2-4d00-bc49-8b6e2c65f718" name="Match content of [createdDate]"><con:configuration><path>$.createdDate</path><content>${createSession request#Response#$.sessionInfo.createdDate}</content><allowWildcards>false</allowWildcards><ignoreNamspaceDifferences>false</ignoreNamspaceDifferences><ignoreComments>false</ignoreComments></con:configuration></con:assertion><con:assertion type="JsonPath Match" id="f9fecd71-19bf-42d3-b466-ec144522c38e" name="Match content of [expirationDate]"><con:configuration><path>$.expirationDate</path><content>${createSession request#Response#$.sessionInfo.expirationDate}</content><allowWildcards>false</allowWildcards><ignoreNamspaceDifferences>false</ignoreNamspaceDifferences><ignoreComments>false</ignoreComments></con:configuration></con:assertion><con:assertion type="JsonPath Match" id="3c0aba10-70f9-4a73-87e8-28e6f568f380" name="Match content of [lastModifiedDate]"><con:configuration><path>$.lastModifiedDate</path><content>${createSession request#Response#$.sessionInfo.lastModifiedDate}</content><allowWildcards>false</allowWildcards><ignoreNamspaceDifferences>false</ignoreNamspaceDifferences><ignoreComments>false</ignoreComments></con:configuration></con:assertion><con:credentials><con:username xsi:nil="true"/><con:password xsi:nil="true"/><con:domain xsi:nil="true"/><con:selectedAuthProfile>No Authorization</con:selectedAuthProfile><con:authType>No Authorization</con:authType></con:credentials><con:jmsConfig JMSDeliveryMode="PERSISTENT"/><con:parameters><entry key="sessionId" value="${createSession request#Response#$.sessionInfo.sessionId}" xmlns="http://eviware.com/soapui/config"/></con:parameters><con:parameterOrder><con:entry>sessionId</con:entry></con:parameterOrder></con:restRequest></con:config></con:testStep><con:properties/><con:reportParameters/></con:testCase><con:testCase id="50bd6f6f-a28a-46cf-9ebd-f110abcbbec1" failOnError="true" failTestCaseOnErrors="true" keepSession="false" maxResults="0" name="T02 By Session Id negative" searchProperties="true"><con:settings/><con:testStep type="restrequest" name="Get Session - Empty" id="443c0fa0-dca7-4a8e-b8ec-aa00b48e89c8"><con:settings/><con:config service="PaymentMiddleware" resourcePath="/payment-middleware-service/session/{sessionId}" methodName="sessionId" xsi:type="con:RestRequestStep" xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance"><con:restRequest name="Get Session - Empty" id="e8e0e0ac-f063-409c-b2ec-d755eb653cc8" mediaType="application/json"><con:settings><con:setting id="com.eviware.soapui.impl.wsdl.WsdlRequest@request-headers">&lt;xml-fragment/></con:setting></con:settings><con:endpoint>${#Project#ServiceEndpoint}</con:endpoint><con:request/><con:originalUri>http://68.71.208.254/payment-middleware-service/session/sessionId</con:originalUri><con:assertion type="Valid HTTP Status Codes" id="9d0af98d-6c30-47ee-a698-d2de304ce484" name="Valid HTTP Status Codes"><con:settings/><con:configuration><codes>404</codes></con:configuration></con:assertion><con:assertion type="Simple Equals" id="f6983488-809a-4bfe-9f6d-7c8c41692cb0" name="Equals"><con:configuration><patternText>2002:cannot find session info by session id</patternText><caseSensitive>true</caseSensitive></con:configuration></con:assertion><con:credentials><con:username xsi:nil="true"/><con:password xsi:nil="true"/><con:domain xsi:nil="true"/><con:selectedAuthProfile>No Authorization</con:selectedAuthProfile><con:authType>No Authorization</con:authType></con:credentials><con:jmsConfig JMSDeliveryMode="PERSISTENT"/><con:parameters/><con:parameterOrder><con:entry>sessionId</con:entry></con:parameterOrder></con:restRequest></con:config></con:testStep><con:testStep type="restrequest" name="Get Session - Not Exist" id="87d559ef-3a74-4063-9b90-9d9914ff9cf7"><con:settings/><con:config service="PaymentMiddleware" resourcePath="/payment-middleware-service/session/{sessionId}" methodName="sessionId" xsi:type="con:RestRequestStep" xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance"><con:restRequest name="Get Session - Not Exist" id="e8e0e0ac-f063-409c-b2ec-d755eb653cc8" mediaType="application/json"><con:settings><con:setting id="com.eviware.soapui.impl.wsdl.WsdlRequest@request-headers">&lt;xml-fragment/></con:setting></con:settings><con:endpoint>${#Project#ServiceEndpoint}</con:endpoint><con:request/><con:originalUri>http://68.71.208.254/payment-middleware-service/session/sessionId</con:originalUri><con:assertion type="Valid HTTP Status Codes" id="1d6cb459-9b82-4778-96c2-8c44b58c6f71" name="Valid HTTP Status Codes"><con:settings/><con:configuration><codes>404</codes></con:configuration></con:assertion><con:assertion type="Simple Equals" id="9400efe1-2b4d-4b99-9cdd-2dfbe8d76971" name="Equals"><con:configuration><patternText>2002:cannot find session info by session id</patternText><caseSensitive>true</caseSensitive></con:configuration></con:assertion><con:credentials><con:username xsi:nil="true"/><con:password xsi:nil="true"/><con:domain xsi:nil="true"/><con:selectedAuthProfile>No Authorization</con:selectedAuthProfile><con:authType>No Authorization</con:authType></con:credentials><con:jmsConfig JMSDeliveryMode="PERSISTENT"/><con:parameters/><con:parameterOrder><con:entry>sessionId</con:entry></con:parameterOrder></con:restRequest></con:config></con:testStep><con:properties/><con:reportParameters/></con:testCase><con:testCase id="e8380603-d993-4be3-a27d-2363e6f16d92" failOnError="true" failTestCaseOnErrors="true" keepSession="false" maxResults="0" name="T03 By Order Number positive" searchProperties="true"><con:settings/><con:testStep type="groovy" name="generate orderNo" id="a88413c2-33ee-4c52-9105-08351ec04309"><con:settings/><con:config><script>import java.text.SimpleDateFormat;

def today = new Date()
def format = new SimpleDateFormat();
format = new SimpleDateFormat("yyyyMMddkkmmssSSS");
def DateToStr = format.format(today);

log.info DateToStr
return DateToStr</script></con:config></con:testStep><con:testStep type="datasource" name="DataSource" id="3723d02e-eefc-45d7-a1b9-6613755ac7ba"><con:settings/><con:config xsi:type="con:DataSourceStep" xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance"><con:dataSource type="Grid"><con:configuration><check><![CDATA[<xml-fragment><con:entry xmlns:con="http://eviware.com/soapui/config">true</con:entry><con:entry xmlns:con="http://eviware.com/soapui/config">true</con:entry></xml-fragment>]]></check><row><![CDATA[<xml-fragment><con:entry xmlns:con="http://eviware.com/soapui/config">3452344444332</con:entry><con:entry xmlns:con="http://eviware.com/soapui/config">null</con:entry><con:entry xmlns:con="http://eviware.com/soapui/config">null</con:entry><con:entry xmlns:con="http://eviware.com/soapui/config">${generate orderNo#result}</con:entry><con:entry xmlns:con="http://eviware.com/soapui/config">1000.01</con:entry><con:entry xmlns:con="http://eviware.com/soapui/config">TICKETING</con:entry><con:entry xmlns:con="http://eviware.com/soapui/config">CNY</con:entry></xml-fragment>]]></row><row><![CDATA[<xml-fragment><con:entry xmlns:con="http://eviware.com/soapui/config"/><con:entry xmlns:con="http://eviware.com/soapui/config"/><con:entry xmlns:con="http://eviware.com/soapui/config"/><con:entry xmlns:con="http://eviware.com/soapui/config"/><con:entry xmlns:con="http://eviware.com/soapui/config"/><con:entry xmlns:con="http://eviware.com/soapui/config"/><con:entry xmlns:con="http://eviware.com/soapui/config"/></xml-fragment>]]></row></con:configuration></con:dataSource><con:property>agentId</con:property><con:property>guestEmail</con:property><con:property>guestMobile</con:property><con:property>orderNo</con:property><con:property>orderAmount</con:property><con:property>orderSource</con:property><con:property>currency</con:property><con:restartOnRun>true</con:restartOnRun></con:config></con:testStep><con:testStep type="restrequest" name="createSession request" id="95372ffe-fbe5-4104-8f62-c08f1cc09223"><con:settings/><con:config service="PaymentMiddleware" resourcePath="/payment-middleware-service/sessions" methodName="Sessions" xsi:type="con:RestRequestStep" xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance"><con:restRequest name="createSession request" id="ac10df94-13d9-4eb3-9c59-7dd8a7e807e1" mediaType="application/json" postQueryString="false"><con:settings><con:setting id="com.eviware.soapui.impl.wsdl.WsdlRequest@request-headers">&lt;xml-fragment/></con:setting></con:settings><con:endpoint>${#Project#ServiceEndpoint}</con:endpoint><con:request>{
    "agentId" : "${agentId}",
    "orderNo" : "${orderNo}",
    "products":[    
        {"description" : "Adult one day part ticket for date 2016-09-15","unitPrice" : 100.00,"qty" : 2, "type" : "PARK_TICKET"},
        {"description" : "Child one day part ticket for date 2016-09-15","unitPrice" : 75.00,"qty" : 3, "type" : "PARK_TICKET"}
    ],
    "orderAmount" : "${orderAmount}",
    "orderSource" : "${orderSource}",
    "currency" : "${currency}"
}</con:request><con:originalUri>http://68.71.208.254/payment-middleware-service/sessions</con:originalUri><con:assertion type="JsonPath Match" id="6c934317-5f11-4bc6-9579-3f69cd4aa632" name="Match content of [orderAmount]"><con:configuration><path>$.sessionInfo.orderAmount</path><content>${DataSource#orderAmount}</content><allowWildcards>false</allowWildcards><ignoreNamspaceDifferences>false</ignoreNamspaceDifferences><ignoreComments>false</ignoreComments></con:configuration></con:assertion><con:assertion type="JsonPath Match" id="ce8eb01a-26fb-4e06-a9b1-e6f6a0b897ba" name="Match content of [links]"><con:configuration><path>$.links</path><content>{"cancelSession":{"rel":"related","href":"*://*/payment-middleware-service/session/*","type":"text/plain"},"getSession":{"rel":"related","href":"*://*/payment-middleware-service/session/*","type":"application/json"},"createTransaction":{"rel":"related","href":"*://*/payment-middleware-service/session/*/transactions","type":"application/json"}}</content><allowWildcards>true</allowWildcards><ignoreNamspaceDifferences>false</ignoreNamspaceDifferences><ignoreComments>false</ignoreComments></con:configuration></con:assertion><con:credentials><con:username xsi:nil="true"/><con:password xsi:nil="true"/><con:domain xsi:nil="true"/><con:selectedAuthProfile>No Authorization</con:selectedAuthProfile><con:authType>No Authorization</con:authType></con:credentials><con:jmsConfig JMSDeliveryMode="PERSISTENT"/><con:jmsPropertyConfig/><con:parameters>
  <con:entry key="orderSource" value="${DataSource#orderSource}"/>
  <con:entry key="agentId" value="${DataSource#agentId}"/>
  <con:entry key="orderNo" value="${DataSource#orderNo}"/>
  <con:entry key="orderAmount" value="${DataSource#orderAmount}"/>
  <con:entry key="guestMobile" value="${DataSource#guestMobile}"/>
  <con:entry key="currency" value="${DataSource#currency}"/>
  <con:entry key="guestEmail" value="${DataSource#guestEmail}"/>
</con:parameters><con:parameterOrder><con:entry>agentId</con:entry><con:entry>guestEmail</con:entry><con:entry>guestMobile</con:entry><con:entry>orderNo</con:entry><con:entry>orderAmount</con:entry><con:entry>orderSource</con:entry><con:entry>currency</con:entry><con:entry>payTtl</con:entry><con:entry>notifyUrl</con:entry><con:entry>guestSwid</con:entry><con:entry>returnUrl</con:entry></con:parameterOrder></con:restRequest></con:config></con:testStep><con:testStep type="restrequest" name="Get Session" id="e1ad4077-6dae-47d9-940f-816a0cb6dab1"><con:settings/><con:config service="PaymentMiddleware" methodName="orderNo" resourcePath="/payment-middleware-service/session?orderNo={orderNo}" xsi:type="con:RestRequestStep" xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance"><con:restRequest name="Get Session" id="30ff5c97-49e2-42c0-afdc-5933a50db788" mediaType="application/json"><con:settings><con:setting id="com.eviware.soapui.impl.wsdl.WsdlRequest@request-headers">&lt;xml-fragment/></con:setting></con:settings><con:encoding>UTF-8</con:encoding><con:endpoint>${#Project#ServiceEndpoint}</con:endpoint><con:request/><con:originalUri>http://68.71.208.254/</con:originalUri><con:assertion type="JsonPath Match" id="dd7b136a-1508-4937-89da-7eb0cad651c2" name="Match content of [sessionId]"><con:configuration><path>$.sessionId</path><content>${createSession request#Response#$.sessionInfo.sessionId}</content><allowWildcards>false</allowWildcards><ignoreNamspaceDifferences>false</ignoreNamspaceDifferences><ignoreComments>false</ignoreComments></con:configuration></con:assertion><con:assertion type="JsonPath Match" id="d2718f14-d3e5-454e-a2e0-0ffb40bf6108" name="Match content of [orderNo]"><con:configuration><path>$.orderNo</path><content>${DataSource#orderNo}</content><allowWildcards>false</allowWildcards><ignoreNamspaceDifferences>false</ignoreNamspaceDifferences><ignoreComments>false</ignoreComments></con:configuration></con:assertion><con:assertion type="JsonPath Match" id="75186061-0b01-49d8-8e6e-faf4dd3de71a" name="Match content of [orderAmount]"><con:configuration><path>$.orderAmount</path><content>${DataSource#orderAmount}</content><allowWildcards>false</allowWildcards><ignoreNamspaceDifferences>false</ignoreNamspaceDifferences><ignoreComments>false</ignoreComments></con:configuration></con:assertion><con:assertion type="JsonPath Match" id="8dd074cc-3d11-4d4a-bfad-da5185248377" name="Match content of [currency]"><con:configuration><path>$.currency</path><content>${DataSource#currency}</content><allowWildcards>false</allowWildcards><ignoreNamspaceDifferences>false</ignoreNamspaceDifferences><ignoreComments>false</ignoreComments></con:configuration></con:assertion><con:assertion type="JsonPath Match" id="dc308b13-524f-4e46-822d-b388b618ef49" name="Match content of [orderSource]"><con:configuration><path>$.orderSource</path><content>${DataSource#orderSource}</content><allowWildcards>false</allowWildcards><ignoreNamspaceDifferences>false</ignoreNamspaceDifferences><ignoreComments>false</ignoreComments></con:configuration></con:assertion><con:assertion type="JsonPath Match" id="70cf2b13-6963-4e02-97bf-a4e7ade2dcdc" name="Match content of [state]"><con:configuration><path>$.state</path><content>UNPAID</content><allowWildcards>false</allowWildcards><ignoreNamspaceDifferences>false</ignoreNamspaceDifferences><ignoreComments>false</ignoreComments></con:configuration></con:assertion><con:assertion type="JsonPath Match" id="669b48f1-e01e-4ec2-b016-171d2a2b61be" name="Match content of [guestEmail]"><con:configuration><path>$.guestEmail</path><content>${DataSource#guestEmail}</content><allowWildcards>false</allowWildcards><ignoreNamspaceDifferences>false</ignoreNamspaceDifferences><ignoreComments>false</ignoreComments></con:configuration></con:assertion><con:assertion type="JsonPath Match" id="b66c1718-2849-45f9-867f-da21d9f0eb5a" name="Match content of [guestMobile]"><con:configuration><path>$.guestMobile</path><content>${DataSource#guestMobile}</content><allowWildcards>false</allowWildcards><ignoreNamspaceDifferences>false</ignoreNamspaceDifferences><ignoreComments>false</ignoreComments></con:configuration></con:assertion><con:assertion type="JsonPath Match" id="7367415d-1694-4af5-bb95-ce94d8d57822" name="Match content of [agentId]"><con:configuration><path>$.agentId</path><content>${DataSource#agentId}</content><allowWildcards>false</allowWildcards><ignoreNamspaceDifferences>false</ignoreNamspaceDifferences><ignoreComments>false</ignoreComments></con:configuration></con:assertion><con:assertion type="JsonPath Match" id="1ef2a1db-4667-4ed1-890d-9f424f5c2152" name="Match content of [remark]"><con:configuration><path>$.remark</path><content>null</content><allowWildcards>false</allowWildcards><ignoreNamspaceDifferences>false</ignoreNamspaceDifferences><ignoreComments>false</ignoreComments></con:configuration></con:assertion><con:assertion type="JsonPath Match" id="b7dc9e99-3e06-436e-ab63-b6beebe9107a" name="Match content of [createdDate]"><con:configuration><path>$.createdDate</path><content>${createSession request#Response#$.sessionInfo.createdDate}</content><allowWildcards>false</allowWildcards><ignoreNamspaceDifferences>false</ignoreNamspaceDifferences><ignoreComments>false</ignoreComments></con:configuration></con:assertion><con:assertion type="JsonPath Match" id="7b4940e6-bada-4f39-a54c-e45f93cd19e5" name="Match content of [expirationDate]"><con:configuration><path>$.expirationDate</path><content>${createSession request#Response#$.sessionInfo.expirationDate}</content><allowWildcards>false</allowWildcards><ignoreNamspaceDifferences>false</ignoreNamspaceDifferences><ignoreComments>false</ignoreComments></con:configuration></con:assertion><con:assertion type="JsonPath Match" id="66a92253-71de-47fb-a2fd-f625aef87fbf" name="Match content of [lastModifiedDate]"><con:configuration><path>$.lastModifiedDate</path><content>${createSession request#Response#$.sessionInfo.lastModifiedDate}</content><allowWildcards>false</allowWildcards><ignoreNamspaceDifferences>false</ignoreNamspaceDifferences><ignoreComments>false</ignoreComments></con:configuration></con:assertion><con:credentials><con:username xsi:nil="true"/><con:password xsi:nil="true"/><con:domain xsi:nil="true"/><con:selectedAuthProfile>No Authorization</con:selectedAuthProfile><con:authType>No Authorization</con:authType></con:credentials><con:jmsConfig JMSDeliveryMode="PERSISTENT"/><con:parameters>
  <con:entry key="orderNo" value="${DataSource#orderNo}"/>
  <con:entry key="sessionId" value="${createSession request#Response#$.sessionInfo.sessionId}"/>
</con:parameters></con:restRequest></con:config></con:testStep><con:properties/><con:reportParameters/></con:testCase><con:testCase id="7e256754-2905-47ae-ade0-3f018df6964d" failOnError="true" failTestCaseOnErrors="true" keepSession="false" maxResults="0" name="T04 By Order Number negative" searchProperties="true"><con:settings/><con:testStep type="restrequest" name="Get Session - Empty" id="e181298b-3e08-473e-a62e-bbc830d51e99"><con:settings/><con:config service="PaymentMiddleware" resourcePath="/payment-middleware-service/session?orderNo={orderNo}" methodName="orderNo" xsi:type="con:RestRequestStep" xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance"><con:restRequest name="Get Session - Empty" id="e8e0e0ac-f063-409c-b2ec-d755eb653cc8" mediaType="application/json"><con:settings><con:setting id="com.eviware.soapui.impl.wsdl.WsdlRequest@request-headers">&lt;xml-fragment/></con:setting></con:settings><con:endpoint>${#Project#ServiceEndpoint}</con:endpoint><con:request/><con:originalUri>http://68.71.208.254/payment-middleware-service/session</con:originalUri><con:assertion type="Valid HTTP Status Codes" id="05774b93-7034-45f4-8631-839dae28f58e" name="Valid HTTP Status Codes"><con:settings/><con:configuration><codes>404</codes></con:configuration></con:assertion><con:assertion type="Simple Equals" id="c64b86fe-b12e-4c97-ab83-7283d54d0d1f" name="Equals"><con:configuration><patternText>2001:cannot find session info by order number</patternText><caseSensitive>true</caseSensitive></con:configuration></con:assertion><con:credentials><con:username xsi:nil="true"/><con:password xsi:nil="true"/><con:domain xsi:nil="true"/><con:selectedAuthProfile>No Authorization</con:selectedAuthProfile><con:authType>No Authorization</con:authType></con:credentials><con:jmsConfig JMSDeliveryMode="PERSISTENT"/><con:parameters/><con:parameterOrder><con:entry>orderNo</con:entry></con:parameterOrder></con:restRequest></con:config></con:testStep><con:testStep type="restrequest" name="Get Session - Not Exist" id="6ab54399-1260-4073-a618-34794494c4b6"><con:settings/><con:config service="PaymentMiddleware" resourcePath="/payment-middleware-service/session?orderNo={orderNo}" methodName="orderNo" xsi:type="con:RestRequestStep" xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance"><con:restRequest name="Get Session - Not Exist" id="e8e0e0ac-f063-409c-b2ec-d755eb653cc8" mediaType="application/json"><con:settings><con:setting id="com.eviware.soapui.impl.wsdl.WsdlRequest@request-headers">&lt;xml-fragment/></con:setting></con:settings><con:endpoint>${#Project#ServiceEndpoint}</con:endpoint><con:request/><con:originalUri>http://68.71.208.254/payment-middleware-service/session</con:originalUri><con:assertion type="Valid HTTP Status Codes" id="05774b93-7034-45f4-8631-839dae28f58e" name="Valid HTTP Status Codes"><con:settings/><con:configuration><codes>404</codes></con:configuration></con:assertion><con:assertion type="Simple Equals" id="c64b86fe-b12e-4c97-ab83-7283d54d0d1f" name="Equals"><con:configuration><patternText>2001:cannot find session info by order number</patternText><caseSensitive>true</caseSensitive></con:configuration></con:assertion><con:credentials><con:username xsi:nil="true"/><con:password xsi:nil="true"/><con:domain xsi:nil="true"/><con:selectedAuthProfile>No Authorization</con:selectedAuthProfile><con:authType>No Authorization</con:authType></con:credentials><con:jmsConfig JMSDeliveryMode="PERSISTENT"/><con:parameters><entry key="orderNo" value="11" xmlns="http://eviware.com/soapui/config"/></con:parameters><con:parameterOrder><con:entry>orderNo</con:entry></con:parameterOrder></con:restRequest></con:config></con:testStep><con:properties/><con:reportParameters/></con:testCase><con:properties/><con:reportParameters/></con:testSuite><con:testSuite id="4c5e8fd2-7049-417b-9237-89710742985d" name="HealthCheck"><con:settings/><con:runType>SEQUENTIAL</con:runType><con:testCase id="ea68a036-5d01-4aa0-9115-b748789c35e7" failOnError="true" failTestCaseOnErrors="true" keepSession="false" maxResults="0" name="Health Deep" searchProperties="true"><con:settings/><con:testStep type="restrequest" name="REST Request" id="725148c5-9b56-4781-bc31-15dc615422ad"><con:settings/><con:config service="PaymentMiddleware" resourcePath="/payment-middleware-service/health/deep" methodName="Method 1" xsi:type="con:RestRequestStep" xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance"><con:restRequest name="REST Request" id="b587c0b8-d08d-4ac9-a38e-af018efbee38" mediaType="application/json"><con:settings><con:setting id="com.eviware.soapui.impl.wsdl.WsdlRequest@request-headers">&lt;xml-fragment/></con:setting></con:settings><con:request/><con:originalUri>http://10.42.49.150/payment-middleware-service/health/deep</con:originalUri><con:assertion type="JsonPath Match" id="a950fefa-76b0-4049-813f-8f1ecffe9534" name="Health Check"><con:configuration><path>$.health</path><content>0</content><allowWildcards>false</allowWildcards><ignoreNamspaceDifferences>false</ignoreNamspaceDifferences><ignoreComments>false</ignoreComments></con:configuration></con:assertion><con:assertion type="JsonPath Match" id="138f9b3a-e306-4faf-92b8-df975e5a77cc" name="Alipay check"><con:configuration><path>$.tests.applicationVersion.health</path><content>0</content><allowWildcards>false</allowWildcards><ignoreNamspaceDifferences>false</ignoreNamspaceDifferences><ignoreComments>false</ignoreComments></con:configuration></con:assertion><con:assertion type="JsonPath Match" id="53dc45b6-fddf-4caa-9fa7-b8eff3d4f041" name="Payeco check"><con:configuration><path>$.tests.payeco.health</path><content>0</content><allowWildcards>false</allowWildcards><ignoreNamspaceDifferences>false</ignoreNamspaceDifferences><ignoreComments>false</ignoreComments></con:configuration></con:assertion><con:credentials><con:selectedAuthProfile>No Authorization</con:selectedAuthProfile><con:authType>No Authorization</con:authType></con:credentials><con:jmsConfig JMSDeliveryMode="PERSISTENT"/><con:parameters/></con:restRequest></con:config></con:testStep><con:properties/><con:reportParameters/></con:testCase><con:properties/><con:reportParameters/></con:testSuite><con:testSuite id="c426d839-03b2-4179-8b41-7c2ebce66421" name="Refund" disabled="true"><con:settings/><con:runType>SEQUENTIAL</con:runType><con:testCase id="aa10f0e4-8281-4d12-a9d2-dcbe40963238" failOnError="true" failTestCaseOnErrors="true" keepSession="false" name="T01 Refund Positive" searchProperties="true" maxResults="0"><con:settings/><con:testStep type="restrequest" name="REST Request" id="3c29e7c6-1f50-40cc-b759-8762384afd9b"><con:settings/><con:config service="PaymentMiddleware" resourcePath="/payment-middleware-service/refund" methodName="Method 1" xsi:type="con:RestRequestStep" xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance"><con:restRequest name="REST Request" id="398b72ad-ced8-49d3-99b8-0df866c23459" mediaType="application/json" postQueryString="false"><con:settings><con:setting id="com.eviware.soapui.impl.wsdl.WsdlRequest@request-headers">&lt;xml-fragment/></con:setting></con:settings><con:request>{
    "orderNo" : "${orderNo}", 
    "orderSource" : "${orderSource}",
    "pspName" : "${pspName}",
    "currency" : "${currency}",
    "amount" : "${amount}",
    "source" : "${source}",
    "reason" : "${reason}",
    "notifyUrl" : "${notifyUrl}"
}</con:request><con:originalUri>https://latest.payment-middleware-service-lite.nap7.wdpro.disney.com/refund</con:originalUri><con:credentials><con:selectedAuthProfile>No Authorization</con:selectedAuthProfile><con:authType>No Authorization</con:authType></con:credentials><con:jmsConfig JMSDeliveryMode="PERSISTENT"/><con:parameters>
  <con:entry key="amount" value="0.01"/>
  <con:entry key="orderSource" value="TICKETING"/>
  <con:entry key="orderNo" value="201512071005"/>
  <con:entry key="notifyUrl" value="http://10.131.245.229:8080/payment-middleware-psp-alipay-simulator/gateway"/>
  <con:entry key="pspName" value="ALIPAY"/>
</con:parameters><con:parameterOrder><con:entry>orderNo</con:entry><con:entry>orderSource</con:entry><con:entry>pspName</con:entry><con:entry>currency</con:entry><con:entry>amount</con:entry><con:entry>source</con:entry><con:entry>reason</con:entry><con:entry>notifyUrl</con:entry></con:parameterOrder></con:restRequest></con:config></con:testStep><con:properties/><con:reportParameters/></con:testCase><con:properties/><con:reportParameters/></con:testSuite><con:testSuite id="dfe2c328-6f00-4e23-ad4a-3ca8f794bc46" name="LoadTest" disabled="true"><con:settings/><con:runType>SEQUENTIAL</con:runType><con:testCase id="779cdaf7-6426-4d5a-a711-4d025c9fc12f" failOnError="true" failTestCaseOnErrors="true" keepSession="false" name="T01 Alipay" searchProperties="true" maxResults="0"><con:settings/><con:testStep type="datasource" name="DataSource" id="6a0d76d5-bc00-4e74-82fa-86884e5e6066"><con:settings/><con:config xsi:type="con:DataSourceStep" xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance"><con:dataSource type="Grid"><con:configuration><check><![CDATA[<xml-fragment><con:entry xmlns:con="http://eviware.com/soapui/config">false</con:entry><con:entry xmlns:con="http://eviware.com/soapui/config">true</con:entry></xml-fragment>]]></check><row><![CDATA[<xml-fragment><con:entry xmlns:con="http://eviware.com/soapui/config">3452344444332</con:entry><con:entry xmlns:con="http://eviware.com/soapui/config"/><con:entry xmlns:con="http://eviware.com/soapui/config"/><con:entry xmlns:con="http://eviware.com/soapui/config"/><con:entry xmlns:con="http://eviware.com/soapui/config">0.01</con:entry><con:entry xmlns:con="http://eviware.com/soapui/config">TICKETING</con:entry><con:entry xmlns:con="http://eviware.com/soapui/config">CNY</con:entry><con:entry xmlns:con="http://eviware.com/soapui/config">zh-cn</con:entry><con:entry xmlns:con="http://eviware.com/soapui/config">PC_WEB</con:entry><con:entry xmlns:con="http://eviware.com/soapui/config">ALIPAY</con:entry><con:entry xmlns:con="http://eviware.com/soapui/config">cn</con:entry><con:entry xmlns:con="http://eviware.com/soapui/config">http://10.42.47.140:8080/payment-middleware-psp-alipay-simulator/payment</con:entry></xml-fragment>]]></row><row><![CDATA[<xml-fragment><con:entry xmlns:con="http://eviware.com/soapui/config">3452344444332</con:entry><con:entry xmlns:con="http://eviware.com/soapui/config"/><con:entry xmlns:con="http://eviware.com/soapui/config"/><con:entry xmlns:con="http://eviware.com/soapui/config"/><con:entry xmlns:con="http://eviware.com/soapui/config">0.02</con:entry><con:entry xmlns:con="http://eviware.com/soapui/config">LODGING</con:entry><con:entry xmlns:con="http://eviware.com/soapui/config">CNY</con:entry><con:entry xmlns:con="http://eviware.com/soapui/config">en</con:entry><con:entry xmlns:con="http://eviware.com/soapui/config">PC_WEB</con:entry><con:entry xmlns:con="http://eviware.com/soapui/config">ALIPAY</con:entry><con:entry xmlns:con="http://eviware.com/soapui/config">cn</con:entry><con:entry xmlns:con="http://eviware.com/soapui/config">http://10.42.47.140:8080/payment-middleware-psp-alipay-simulator/payment</con:entry></xml-fragment>]]></row></con:configuration></con:dataSource><con:property>agentId</con:property><con:property>guestEmail</con:property><con:property>guestMobile</con:property><con:property>orderNo</con:property><con:property>orderAmount</con:property><con:property>orderSource</con:property><con:property>currency</con:property><con:property>language</con:property><con:property>payChannel</con:property><con:property>payOption</con:property><con:property>region</con:property><con:property>notifyUrl</con:property><con:restartOnRun>true</con:restartOnRun></con:config></con:testStep><con:testStep type="groovy" name="generate orderNo" id="a8b1235a-3b4a-4629-8af3-3899596a8bdf"><con:settings/><con:config><script>import java.text.SimpleDateFormat;
import static java.util.UUID.randomUUID 
uuid = randomUUID() as String
log.info uuid

def today = new Date()
def format = new SimpleDateFormat();
format = new SimpleDateFormat("yyyyMMddkkmmss");
def DateToStr = format.format(today);

log.info DateToStr
return DateToStr+uuid[0..4]</script></con:config></con:testStep><con:testStep type="restrequest" name="createSession request" id="1c16374c-d002-4260-b9d3-9201f7cf8b4c"><con:settings/><con:config service="PaymentMiddleware" resourcePath="/payment-middleware-service/sessions" methodName="Sessions" xsi:type="con:RestRequestStep" xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance"><con:restRequest name="createSession request" id="ac10df94-13d9-4eb3-9c59-7dd8a7e807e1" mediaType="application/json" postQueryString="false"><con:settings><con:setting id="com.eviware.soapui.impl.wsdl.WsdlRequest@request-headers">&lt;xml-fragment/></con:setting></con:settings><con:endpoint>${#Project#ServiceEndpoint}</con:endpoint><con:request>{
    "agentId" : "${agentId}",
    "orderNo" : "${orderNo}",
    "products":[    
        {"description" : "Adult one day part ticket for date 2016-09-15","unitPrice" : 100.00,"qty" : 2, "type" : "PARK_TICKET"},
        {"description" : "Child one day part ticket for date 2016-09-15","unitPrice" : 75.00,"qty" : 3, "type" : "PARK_TICKET"}
    ],
    "orderAmount" : "${orderAmount}",
    "orderSource" : "${orderSource}",
    "currency" : "${currency}",
    "notifyUrl" : "${notifyUrl}"
}</con:request><con:originalUri>http://68.71.208.254/payment-middleware-service/sessions</con:originalUri><con:assertion type="JsonPath Match" id="eb067ffb-fa50-4656-b144-0eeab7277d49" name="SessionInfo Match"><con:configuration><path>$.sessionInfo</path><content>{"sessionId":"*","orderNo":"*","orderSource":"*","orderAmount":"*","currency":"*","state":"UNPAID","remark":null,"agentId":"*","guestMobile":null,"guestEmail":null,"guestSwid":null,"createdDate":"*","payTtl":*,"lastModifiedDate":"*","notifyUrl":"*","returnUrl":null}</content><allowWildcards>true</allowWildcards><ignoreNamspaceDifferences>false</ignoreNamspaceDifferences><ignoreComments>false</ignoreComments></con:configuration></con:assertion><con:credentials><con:username xsi:nil="true"/><con:password xsi:nil="true"/><con:domain xsi:nil="true"/><con:selectedAuthProfile>No Authorization</con:selectedAuthProfile><con:authType>No Authorization</con:authType></con:credentials><con:jmsConfig JMSDeliveryMode="PERSISTENT"/><con:jmsPropertyConfig/><con:parameters>
  <con:entry key="orderSource" value="${DataSource#orderSource}"/>
  <con:entry key="agentId" value="${DataSource#agentId}"/>
  <con:entry key="orderNo" value="${generate orderNo#result}"/>
  <con:entry key="orderAmount" value="${DataSource#orderAmount}"/>
  <con:entry key="guestMobile" value="${DataSource#guestMobile}"/>
  <con:entry key="notifyUrl" value="${DataSource#notifyUrl}"/>
  <con:entry key="currency" value="${DataSource#currency}"/>
  <con:entry key="guestEmail" value="${DataSource#guestEmail}"/>
</con:parameters><con:parameterOrder><con:entry>agentId</con:entry><con:entry>guestEmail</con:entry><con:entry>guestMobile</con:entry><con:entry>orderNo</con:entry><con:entry>orderAmount</con:entry><con:entry>orderSource</con:entry><con:entry>currency</con:entry><con:entry>payTtl</con:entry><con:entry>notifyUrl</con:entry><con:entry>guestSwid</con:entry><con:entry>returnUrl</con:entry></con:parameterOrder></con:restRequest></con:config></con:testStep><con:testStep type="restrequest" name="createTransaction" id="e33f00d0-91af-4933-8afa-089eeef707c7"><con:settings/><con:config service="PaymentMiddleware" resourcePath="/payment-middleware-service/session/{sessionId}/transactions" methodName="Method 1" xsi:type="con:RestRequestStep" xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance"><con:restRequest name="createTransaction" id="2e9068e2-c308-4c81-90f3-30ec3896b43c" mediaType="application/json" postQueryString="false"><con:settings><con:setting id="com.eviware.soapui.impl.wsdl.WsdlRequest@request-headers">&lt;xml-fragment/></con:setting></con:settings><con:endpoint>${#Project#ServiceEndpoint}</con:endpoint><con:request>{
   "payChannel": "${payChannel}",
   "payOption": "${payOption}",
   "region": "${region}"
}</con:request><con:originalUri>http://68.71.208.254/payment-middleware-service/session//transactions</con:originalUri><con:assertion type="JsonPath Match" id="5359c8c4-b42b-4644-a878-ce592e97c7cb" name="Match content of [href]"><con:configuration><path>$.href</path><content>http*://*</content><allowWildcards>true</allowWildcards><ignoreNamspaceDifferences>false</ignoreNamspaceDifferences><ignoreComments>false</ignoreComments></con:configuration></con:assertion><con:assertion type="JsonPath Match" id="19a9b6f6-3166-447f-a235-a8f896906836" name="Match content of [method]"><con:configuration><path>$.method</path><content>POST</content><allowWildcards>false</allowWildcards><ignoreNamspaceDifferences>false</ignoreNamspaceDifferences><ignoreComments>false</ignoreComments></con:configuration></con:assertion><con:assertion type="JsonPath Existence Match" id="2d1a9429-c5fe-4709-a1d0-908dd305cd4d" name="Check for existence of [params]"><con:configuration><path>$.params</path><content>true</content><allowWildcards>false</allowWildcards><ignoreNamspaceDifferences>false</ignoreNamspaceDifferences><ignoreComments>false</ignoreComments></con:configuration></con:assertion><con:credentials><con:username xsi:nil="true"/><con:password xsi:nil="true"/><con:domain xsi:nil="true"/><con:selectedAuthProfile>No Authorization</con:selectedAuthProfile><con:authType>No Authorization</con:authType></con:credentials><con:jmsConfig JMSDeliveryMode="PERSISTENT"/><con:parameters>
  <con:entry key="payOption" value="${DataSource#payOption}"/>
  <con:entry key="payChannel" value="${DataSource#payChannel}"/>
  <con:entry key="sessionId" value="${createSession request#Response#$.sessionInfo.sessionId}"/>
  <con:entry key="Accept-Language" value="${DataSource#language}"/>
  <con:entry key="region" value="cn"/>
</con:parameters><con:parameterOrder><con:entry>sessionId</con:entry><con:entry>Accept-Language</con:entry><con:entry>payChannel</con:entry><con:entry>payOption</con:entry><con:entry>bankName</con:entry><con:entry>region</con:entry><con:entry>X-CIP</con:entry></con:parameterOrder></con:restRequest></con:config></con:testStep><con:testStep type="datasource" name="DataSource1" id="3274b571-2f07-43f5-9d1d-cfdbcb89063e"><con:settings/><con:config xsi:type="con:DataSourceStep" xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance"><con:dataSource type="JSON"><con:configuration><sourceStep>createTransaction</sourceStep><sourceProperty>Response</sourceProperty><rowPath>$.params</rowPath><columnPath>subject</columnPath><columnPath>seller_email</columnPath><columnPath>extra_common_param</columnPath><columnPath>sign</columnPath><columnPath>it_b_pay</columnPath><columnPath>notify_url</columnPath><columnPath>payment_type</columnPath><columnPath>out_trade_no</columnPath><columnPath>paymethod</columnPath><columnPath>partner</columnPath><columnPath>service</columnPath><columnPath>total_fee</columnPath><columnPath>sign_type</columnPath><columnPath>seller_id</columnPath></con:configuration></con:dataSource><con:property>subject</con:property><con:property>seller_email</con:property><con:property>extra_common_param</con:property><con:property>sign</con:property><con:property>it_b_pay</con:property><con:property>notify_url</con:property><con:property>payment_type</con:property><con:property>out_trade_no</con:property><con:property>paymethod</con:property><con:property>partner</con:property><con:property>service</con:property><con:property>total_fee</con:property><con:property>sign_type</con:property><con:property>seller_id</con:property><con:restartOnRun>true</con:restartOnRun></con:config></con:testStep><con:testStep type="transfer" name="Property Transfer" id="80264c3b-2687-40af-948a-d9918da4f8c9"><con:settings/><con:config xsi:type="con:PropertyTransfersStep" xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance"><con:transfers setNullOnMissingSource="true" transferTextContent="true" failOnError="true" ignoreEmpty="false" transferToAll="false" entitize="false" transferChildNodes="false"><con:name>addressTransfer</con:name><con:sourceType>Response</con:sourceType><con:sourceStep>createTransaction</con:sourceStep><con:sourcePath>$.href</con:sourcePath><con:targetType>Endpoint</con:targetType><con:targetStep>HTTP Request - Mock Pay</con:targetStep><con:type>JSONPATH</con:type><con:targetTransferType>JSONPATH</con:targetTransferType><con:upgraded>true</con:upgraded></con:transfers></con:config></con:testStep><con:testStep type="httprequest" name="HTTP Request - Mock Pay" id="cf4a3783-9360-4fb8-923f-c4258f73d45d"><con:settings/><con:config method="GET" xsi:type="con:HttpRequest" id="77acbc88-d685-440c-890b-be6053a5d390" name="HTTP Request - Mock Pay" postQueryString="false" mediaType="text/xml" downloadIncludedResources="false" xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance"><con:settings><con:setting id="com.eviware.soapui.impl.wsdl.WsdlRequest@request-headers">&lt;entry key="Content-Type" value="application/x-www-form-urlencoded" xmlns="http://eviware.com/soapui/config"/></con:setting></con:settings><con:endpoint>https://mapi.alipay.com/gateway.do?_input_charset=utf-8</con:endpoint><con:request><![CDATA[seller_email=${DataSource1#seller_email}&extra_common_param=${DataSource1#extra_common_param}&subject=${DataSource1#subject}&sign=${DataSource1#sign}&it_b_pay=${DataSource1#it_b_pay}&notify_url=${DataSource1#notify_url}&payment_type=${DataSource1#payment_type}&out_trade_no=${DataSource1#out_trade_no}&paymethod=${DataSource1#paymethod}&partner=${DataSource1#partner}&service=${DataSource1#service}&total_fee=${DataSource1#total_fee}&sign_type=${DataSource1#sign_type}&seller_id=${DataSource1#seller_id}]]></con:request><con:assertion type="Valid HTTP Status Codes" id="4f039fa6-9fda-4e2c-a132-d561b2dfc375" name="Valid HTTP Status Codes"><con:settings/><con:configuration><codes>200</codes></con:configuration></con:assertion><con:assertion type="GroovyScriptAssertion" id="330a652e-d86b-42e2-af07-7d42d948b8fe" name="Script Assertion"><con:configuration><scriptText>def out_trade_no = context.expand( '${DataSource1#out_trade_no}' )
def response = context.expand( '${HTTP Request - Mock Pay#Response}' )
if (out_trade_no[-1..-1] == "6" )
assert response == "Payment Failed"
else 
assert response == "Payment Success"</scriptText></con:configuration></con:assertion><con:credentials><con:selectedAuthProfile>No Authorization</con:selectedAuthProfile><con:authType>No Authorization</con:authType></con:credentials><con:jmsConfig JMSDeliveryMode="PERSISTENT"/><con:parameters/></con:config></con:testStep><con:testStep type="delay" name="Delay" id="e6c607c2-fb0f-43b4-ac65-2b4d7b111eb3"><con:settings/><con:config><delay>1000</delay></con:config></con:testStep><con:testStep type="restrequest" name="Payment Confirm" id="dc3593ef-b842-4556-b36d-d9bf5d76bbf6"><con:settings/><con:config service="PaymentSimulator" resourcePath="/payment-middleware-psp-alipay-simulator/payment/{orderNo}" methodName="Method 1" xsi:type="con:RestRequestStep" xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance"><con:restRequest name="Payment Confirm" id="85fa2289-98b3-4ad9-8f69-127896091888" mediaType="application/json"><con:settings><con:setting id="com.eviware.soapui.impl.wsdl.WsdlRequest@request-headers">&lt;xml-fragment/></con:setting></con:settings><con:request/><con:originalUri>http://10.42.47.140/payment-middleware-psp-alipay-simulator/payment/20151118171852801</con:originalUri><con:assertion type="GroovyScriptAssertion" id="29a46075-f43e-4c0a-a155-7c7badf8eef0" name="Script Assertion"><con:configuration><scriptText>def out_trade_no = context.expand( '${DataSource1#out_trade_no}' )

def groovyUtils = new com.eviware.soapui.support.GroovyUtils( context )
def httpResponseHeaders = context.testCase.testSteps["Payment Confirm"].testRequest.response.responseHeaders
def httpStatus = httpResponseHeaders["#status#"]
def httpStatusCode = (httpStatus =~ "[1-5]\\d\\d")[0]

log.info("HTTP status code: " + httpStatusCode)
log.info out_trade_no[-1..-1]

if (out_trade_no[-1..-1] == '6')
assert httpStatusCode == "404"
else
assert httpStatusCode == "200"</scriptText></con:configuration></con:assertion><con:credentials><con:selectedAuthProfile>No Authorization</con:selectedAuthProfile><con:authType>No Authorization</con:authType></con:credentials><con:jmsConfig JMSDeliveryMode="PERSISTENT"/><con:parameters><entry key="orderNo" value="${generate orderNo#result}" xmlns="http://eviware.com/soapui/config"/></con:parameters><con:parameterOrder><con:entry/></con:parameterOrder></con:restRequest></con:config></con:testStep><con:testStep type="restrequest" name="refund Request" id="52904ed6-41b1-4029-9941-79fcdbb7e8d7"><con:settings/><con:config service="PaymentMiddleware" resourcePath="/payment-middleware-service/refund" methodName="Method 1" xsi:type="con:RestRequestStep" xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance"><con:restRequest name="refund Request" id="398b72ad-ced8-49d3-99b8-0df866c23459" mediaType="application/json" postQueryString="false"><con:settings><con:setting id="com.eviware.soapui.impl.wsdl.WsdlRequest@request-headers">&lt;xml-fragment/></con:setting></con:settings><con:request>{
    "orderNo" : "${orderNo}", 
    "orderSource" : "${orderSource}",
    "pspName" : "${pspName}",
    "currency" : "${currency}",
    "amount" : "${amount}",
    "source" : "${source}",
    "reason" : "${reason}",
    "notifyUrl" : "${notifyUrl}"
}</con:request><con:originalUri>https://latest.payment-middleware-service-lite.nap7.wdpro.disney.com/refund</con:originalUri><con:credentials><con:selectedAuthProfile>No Authorization</con:selectedAuthProfile><con:authType>No Authorization</con:authType></con:credentials><con:jmsConfig JMSDeliveryMode="PERSISTENT"/><con:parameters>
  <con:entry key="orderSource" value="${DataSource#orderSource}"/>
  <con:entry key="amount" value="${DataSource#orderAmount}"/>
  <con:entry key="orderNo" value="${generate orderNo#result}"/>
  <con:entry key="notifyUrl" value="http://10.131.245.229:8080/payment-middleware-psp-alipay-simulator/gateway"/>
  <con:entry key="currency" value="${DataSource#currency}"/>
  <con:entry key="pspName" value="alipay"/>
</con:parameters><con:parameterOrder><con:entry>orderNo</con:entry><con:entry>orderSource</con:entry><con:entry>pspName</con:entry><con:entry>currency</con:entry><con:entry>amount</con:entry><con:entry>source</con:entry><con:entry>reason</con:entry><con:entry>notifyUrl</con:entry></con:parameterOrder></con:restRequest></con:config></con:testStep><con:testStep type="datasourceloop" name="DataSource Loop" id="6bc4c8b7-3a28-4bd1-a07b-5774ee0d1c8a"><con:settings/><con:config><dataSourceStep>DataSource</dataSourceStep><targetStep>generate orderNo</targetStep></con:config></con:testStep><con:properties/><con:reportParameters/><con:breakPoints><con:testStepId>52904ed6-41b1-4029-9941-79fcdbb7e8d7</con:testStepId><con:status>NONE</con:status><con:properties/></con:breakPoints><con:breakPoints><con:testStepId>dc3593ef-b842-4556-b36d-d9bf5d76bbf6</con:testStepId><con:status>NONE</con:status><con:properties/></con:breakPoints><con:breakPoints><con:testStepId>e6c607c2-fb0f-43b4-ac65-2b4d7b111eb3</con:testStepId><con:status>NONE</con:status><con:properties/></con:breakPoints><con:breakPoints><con:testStepId>80264c3b-2687-40af-948a-d9918da4f8c9</con:testStepId><con:status>NONE</con:status><con:properties/></con:breakPoints></con:testCase><con:properties/><con:reportParameters/></con:testSuite><con:requirements/><con:properties><con:property><con:name>ServiceEndpoint</con:name><con:value>http://10.42.49.150:8080</con:value></con:property><con:property><con:name>SimulatorEndpoint</con:name></con:property><con:property><con:name>PaymentSimulatorAddress</con:name></con:property></con:properties><con:wssContainer/><con:databaseConnectionContainer/><con:oAuth2ProfileContainer/><con:reporting><con:xmlTemplates/><con:parameters/></con:reporting><con:sensitiveInformation/><con:environment name="Latest"><con:service type="REST" name="PaymentMiddleware"><con:endpoint domain="" incomingWss="" outgoingWss="" password="" username="" wssTimeToLive="" wssType="" proxyHost="" proxyPort="" proxyUsername="" proxyPassword="" authProfile="No Authorization">${#Project#ServiceEndpoint}</con:endpoint></con:service><con:service type="REST" name="PaymentSimulator"><con:endpoint authProfile="No Authorization"/></con:service><con:property><con:name>ServiceEndpoint</con:name><con:value>https://latest.payment-middleware-service-lite.nap7.wdpro.disney.com</con:value></con:property><con:property><con:name>SimulatorEndpoint</con:name><con:value/></con:property><con:property><con:name>PaymentSimulatorAddress</con:name><con:value/></con:property><con:databaseConnectionContainer/></con:environment><con:environment name="QA"><con:service type="REST" name="PaymentMiddleware"><con:endpoint domain="" incomingWss="" outgoingWss="" password="" username="" wssTimeToLive="" wssType="" authProfile="No Authorization">${#Project#ServiceEndpoint}</con:endpoint></con:service><con:service type="REST" name="PaymentSimulator"><con:endpoint authProfile="No Authorization"/></con:service><con:property><con:name>ServiceEndpoint</con:name><con:value>http://68.71.208.254:8080</con:value></con:property><con:property><con:name>SimulatorEndpoint</con:name><con:value/></con:property><con:property><con:name>PaymentSimulatorAddress</con:name><con:value/></con:property><con:databaseConnectionContainer/></con:environment><con:environment name="Stage"><con:service type="REST" name="PaymentMiddleware"><con:endpoint authProfile="No Authorization" username="" password="" domain="" incomingWss="" outgoingWss="" wssTimeToLive="" wssType="">${#Project#ServiceEndpoint}</con:endpoint></con:service><con:service type="REST" name="PaymentSimulator"><con:endpoint authProfile="No Authorization"/></con:service><con:property><con:name>ServiceEndpoint</con:name><con:value>http://stage.payment-middleware-service.sh1.wdpro.disney.com</con:value></con:property><con:property><con:name>SimulatorEndpoint</con:name><con:value/></con:property><con:property><con:name>PaymentSimulatorAddress</con:name><con:value/></con:property><con:databaseConnectionContainer/></con:environment><con:environment name="PT"><con:service type="REST" name="PaymentMiddleware"><con:endpoint authProfile="No Authorization" username="" password="" domain="" incomingWss="" outgoingWss="" wssTimeToLive="" wssType="" proxyHost="" proxyPort="" proxyUsername="" proxyPassword="">${#Project#ServiceEndpoint}</con:endpoint></con:service><con:service type="REST" name="PaymentSimulator"><con:endpoint authProfile="No Authorization" proxyHost="" proxyPort="" proxyUsername="" proxyPassword="">${#Project#SimulatorEndpoint}</con:endpoint></con:service><con:property><con:name>ServiceEndpoint</con:name><con:value>http://10.42.47.138:8080</con:value></con:property><con:property><con:name>SimulatorEndpoint</con:name><con:value>http://10.42.47.140:8080</con:value></con:property><con:property><con:name>PaymentSimulatorAddress</con:name><con:value/></con:property><con:databaseConnectionContainer/></con:environment><con:authRepository/><con:loadUiTest name="PMW Load Test" id="dbd09d43-a678-43f5-81f6-7f3603bd5da9"><con:settings><con:setting id="soapUIObjectSourceId">779cdaf7-6426-4d5a-a711-4d025c9fc12f</con:setting><con:setting id="soapUIObjectSourceType">soapUIObjectSourceType_RestRequest</con:setting></con:settings><con1:loadui-project id="4886ffcc-9b23-4e15-bc7b-703eb2d2bc80" label="PMW Load Test" xmlns:con1="http://eviware.com/loadui/config"><con1:properties><con1:property propagates="true" key="ModelItem.description" type="java.lang.String"/><con1:property propagates="true" key="CanvasItem.abortOnFinish" type="java.lang.Boolean">false</con1:property><con1:property propagates="true" key="ModelItem.saveReport" type="java.lang.Boolean">false</con1:property><con1:property propagates="true" key="ModelItem.reportFolder" type="java.lang.String"/><con1:property propagates="true" key="ModelItem.reportFormat" type="java.lang.String"/><con1:property propagates="true" key="ModelItem.rate" type="java.lang.Long">25</con1:property><con1:property propagates="true" key="ModelItem.loadDistributionType" type="com.smartbear.load.facade.LoadDistributionType">Relative</con1:property><con1:property propagates="true" key="ModelItem.remoteMode" type="java.lang.String">LOCAL</con1:property></con1:properties><con1:attributes><con1:property key="limits">Time=36000;</con1:property></con1:attributes><con1:addons/><con1:scene label="New Scenario" id="f62c4c3e-dcc7-44d7-b247-71ad93c2bea0" version="14"><con1:properties><con1:property propagates="true" key="ModelItem.description" type="java.lang.String"/><con1:property propagates="true" key="CanvasItem.abortOnFinish" type="java.lang.Boolean">true</con1:property><con1:property propagates="true" key="SceneItem.followProject" type="java.lang.Boolean">true</con1:property><con1:property propagates="true" key="SceneItem.scenarioRatePercentage" type="java.lang.Long">100</con1:property><con1:property propagates="true" key="SceneItem.scenarioRateSpecific" type="java.lang.Long">10</con1:property></con1:properties><con1:attributes><con1:property key="limits">Time=36000;</con1:property></con1:attributes><con1:addons/><con1:component type="com.eviware.loadui.groovy.GroovyComponent" label="Interval 1" id="0ddc6eb9-90e7-4eee-a134-744c77bdb94c" category="scheduler"><con1:properties><con1:property propagates="true" key="ModelItem.description" type="java.lang.String"/><con1:property propagates="true" key="_script" type="java.lang.String"><![CDATA[// 
// Copyright 2014 SmartBear Software
// 
// Licensed under the EUPL, Version 1.1 or - as soon they will be approved by the European Commission - subsequent
// versions of the EUPL (the "Licence");
// You may not use this work except in compliance with the Licence.
// You may obtain a copy of the Licence at:
// 
// http://ec.europa.eu/idabc/eupl
// 
// Unless required by applicable law or agreed to in writing, software distributed under the Licence is
// distributed on an "AS IS" basis, WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either
// express or implied. See the Licence for the specific language governing permissions and limitations
// under the Licence.
// 

/**
 * Schedules the start and stop of connected components 
 *
 * @id com.eviware.Interval
 * @help http://www.loadui.org/Schedulers/interval-component.html
 * @category scheduler
 * @nonBlocking true
 */

// Schedule the start and stop of a trigger component.
// On Start starts timer and when StartAt reached send one START message to 
// attached component. When Duration expires one STOP message is send to each 
// attached component.
// Repeat option repeats whole process if counter limit not set.
// 
// On Stop it sends a STOP message to attached components and stops timer.
//
// On Reset it just resets the timer and stops it.


import com.eviware.loadui.api.events.BaseEvent
import com.eviware.loadui.api.events.PropertyEvent
import com.eviware.loadui.api.model.CanvasItem
import com.eviware.loadui.util.layout.IntervalModel

import java.util.concurrent.TimeUnit

createProperty('startAt', Long, 0)
createProperty('duration', Long, 0)
createProperty('unit', String, 'Sec')
createProperty('mode', String, 'Single')
createProperty('defaultMode', Boolean, true)

long testStartTime = 0
def canvas = getCanvas()

def startFuture = null
def stopFuture = null
def endFuture = null

String lastAction = "Undefined";

updateState = {
    if (lastAction != "START") {
        //warn "Aborting update due to $lastAction"
        return;
    }

    if (defaultMode.value) {
        sendEnabled(true)

        //warn "Default mode run"
        return
    }
    //warn "Scheduled mode run"

    long limit = canvas.getLimit(CanvasItem.TIMER_COUNTER) * 1000

    long mult = 1000
    if (unit.value == 'Min') mult *= 60
    else if (unit.value == 'Percent' && limit > 0) mult = limit / 100

    long startTime = startAt.value * mult
    if (limit > 0 && startTime > limit) {
        startAt.value = limit / mult
        //warn "Start at updated without affect on the execution "
        return
    }

    long stopTime
    if (duration.value == 0) {
        stopTime = (limit > 0) ? limit : IntervalModel.INFINITE
    } else {
        stopTime = startTime + duration.value * mult
    }

    if (limit > 0 && stopTime > limit) {
        long newDuration = limit / mult - startAt.value
        duration.value = newDuration
        //warn "Duration updated without affect on the execution "
        return
    }

    long currentTime = (System.currentTimeMillis() - testStartTime) % stopTime

    //warn "Current time: $currentTime, Stop time: $stopTime"

    if (currentTime < stopTime) {
        long stopInterval = stopTime - currentTime
        //warn "Schedule stopping $stopInterval"
        stopFuture?.cancel(true)
        stopFuture = schedule({
            sendEnabled(false)
            //warn "Stop exucution"
            if (mode.value != 'Single') {
                updateState()
            }
        }, stopInterval, TimeUnit.MILLISECONDS)
    }
    if (currentTime < startTime) {
        long startInterval = startTime - currentTime
        //warn "Schedule START at $startInterval"
        startFuture?.cancel(true)
        startFuture = schedule({
            //warn "Start exucution"
            sendEnabled(true)
        }, startInterval, TimeUnit.MILLISECONDS)
        //warn "Stopping for now"
        sendEnabled(false)
    } else if (currentTime < stopTime) {
        //warn "Start execution right now"
        sendEnabled(true)
    }
}

onAction("RESET_COUNTER_VALUES") {
    //invoked on PRE_START
    updateState()
}

onAction("START") {
    if (lastAction != "START") {
        lastAction = "START"
        cancelAll()
        testStartTime = System.currentTimeMillis()
        updateState()
    }
}

onAction("STOP") {
    lastAction = "STOP"
    sendEnabled(false)
    cancelAll()
    updateState()
}

onAction("RESET") {
}

addEventListener(PropertyEvent) { event ->
    if (event.property in [startAt, duration, unit, mode]) {
        updateState()
    }
}

def limitsListener = addEventListener(canvas, BaseEvent) { event ->
    if (event.key == CanvasItem.LIMITS) {
        updateState()
    }
}

onRelease = {
    cancelAll()
    canvas.removeEventListener(BaseEvent, limitsListener)
}

cancelAll = {
    startFuture?.cancel(true)
    startFuture = null
    stopFuture?.cancel(true)
    stopFuture = null
    endFuture?.cancel(true)
    endFuture = null
}]]></con1:property><con1:property propagates="true" key="stateProperty" type="java.lang.Boolean">true</con1:property><con1:property propagates="true" key="startAt" type="java.lang.Long">0</con1:property><con1:property propagates="true" key="duration" type="java.lang.Long">5</con1:property><con1:property propagates="true" key="unit" type="java.lang.String">Sec</con1:property><con1:property propagates="true" key="mode" type="java.lang.String">Single</con1:property><con1:property propagates="true" key="defaultMode" type="java.lang.Boolean">true</con1:property></con1:properties><con1:attributes><con1:property key="com.eviware.loadui.api.model.ComponentItem@type">Interval</con1:property><con1:property key="_digest">38ca389ba6d8738962c63839763c4305</con1:property><con1:property key="_id">com.eviware.Interval</con1:property><con1:property key="_classLoader">com.eviware.Interval</con1:property></con1:attributes><con1:addons/></con1:component><con1:component type="com.eviware.loadui.components.soapui.SoapUISamplerComponent" label="LoadTest:T01 Alipay" id="96a89e64-8c2b-4528-bba1-258022e24dcf" category="Runners"><con1:properties><con1:property propagates="true" key="ModelItem.description" type="java.lang.String"/><con1:property propagates="true" key="concurrentSamples" type="java.lang.Long">1000</con1:property><con1:property propagates="true" key="property_name_is_not_relevant_for_private_property" type="java.lang.Long">25</con1:property><con1:property propagates="true" key="maxQueueSize" type="java.lang.Long">1000</con1:property><con1:property propagates="true" key="countDiscarded" type="java.lang.Boolean">false</con1:property><con1:property propagates="true" key="disabledTestSteps" type="java.lang.String"/><con1:property propagates="true" key="_thinkTime" type="java.lang.Long">0</con1:property><con1:property propagates="true" key="ReadyApiTestCase" type="com.eviware.soapui.impl.wsdl.testcase.WsdlTestCase">779cdaf7-6426-4d5a-a711-4d025c9fc12f</con1:property><con1:property propagates="true" key="raiseError" type="java.lang.Boolean">true</con1:property><con1:property propagates="true" key="outputTestCaseProperties" type="java.lang.Boolean">true</con1:property><con1:property propagates="true" key="OutputLevel" type="java.lang.String">TestCase only</con1:property><con1:property propagates="true" key="closeConnectionsAfterRequest" type="java.lang.Boolean">false</con1:property><con1:property propagates="true" key="disableSoapuiAssertions" type="java.lang.Boolean">false</con1:property><con1:property propagates="true" key="forceShareDatasources" type="java.lang.Boolean">true</con1:property></con1:properties><con1:attributes><con1:property key="com.eviware.loadui.api.model.ComponentItem@type">Ready API TestCase Runner</con1:property></con1:attributes><con1:addons/></con1:component><con1:component type="com.eviware.loadui.groovy.GroovyComponent" label="Fixed Rate 1" id="8968f42b-745e-4d1c-94f0-c7ac906378ee" category="generators"><con1:properties><con1:property propagates="true" key="ModelItem.description" type="java.lang.String"/><con1:property propagates="true" key="_script" type="java.lang.String">// 
// Copyright 2014 SmartBear Software
// 
// Licensed under the EUPL, Version 1.1 or - as soon they will be approved by the European Commission - subsequent
// versions of the EUPL (the "Licence");
// You may not use this work except in compliance with the Licence.
// You may obtain a copy of the Licence at:
// 
// http://ec.europa.eu/idabc/eupl
// 
// Unless required by applicable law or agreed to in writing, software distributed under the Licence is
// distributed on an "AS IS" basis, WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either
// express or implied. See the Licence for the specific language governing permissions and limitations
// under the Licence.
// 

/**
 * Sends an empty message periodically, at a set rate
 *
 * @id com.eviware.FixedRate
 * @help http://www.loadui.org/Generators/fixed-rate-component.html
 * @name Fixed Rate
 * @category generators
 * @nonBlocking true
 */

import java.util.concurrent.TimeUnit

String lastAction = 'IDLE'

//Properties
rate = createProperty('rate', Long, 10) {
    if (lastAction.equals('START')) {
        schedule()
    }
}
unit = createProperty('unit', String, 'Sec') {
    if (lastAction.equals('START')) {
        schedule()
    }
}

onReplace(stateProperty) { value ->
    if (value) {
        schedule()
    } else {
        future?.cancel(true)
    }
}

burstSize = createProperty('burstSize', Long, 1)

triggerBurst = {
    if (stateProperty.value) {
        burstSize.value.times {
            trigger()
        }
    }
}

def timeUnitToMicros(String value) {
    if (value.equals("MINUTES") || value.equalsIgnoreCase("min") || value.equalsIgnoreCase("m"))
        return TimeUnit.MINUTES.toMicros(1)
    else if (value.equals("HOURS") || value.equalsIgnoreCase("hour") || value.equalsIgnoreCase("h"))
        return TimeUnit.HOURS.toMicros(1)
    else
        return TimeUnit.SECONDS.toMicros(1)
}

future = null
schedule = {
    future?.cancel(true)

    long microsecondsPerUnit = timeUnitToMicros(unit.value)
    long delay = Math.max(1, (long) (microsecondsPerUnit / ((long) rate.value ?: 1)))
    // System.out.println("Rate ${rate.value}, timeUnit: ${unit.value}, msPerUnit: ${microsecondsPerUnit / 1000} Delay ${delay / 1000}")
    future = scheduleAtFixedRate(triggerBurst, delay, delay, TimeUnit.MICROSECONDS)
}

onAction('START') {
    lastAction = 'START'
    schedule()
}

onAction('STOP') {
    lastAction = 'STOP'
    future?.cancel(true)
}
</con1:property><con1:property propagates="true" key="stateProperty" type="java.lang.Boolean">false</con1:property><con1:property propagates="true" key="rate" type="java.lang.Long">25</con1:property><con1:property propagates="true" key="unit" type="java.lang.String">Sec</con1:property><con1:property propagates="true" key="burstSize" type="java.lang.Long">1</con1:property></con1:properties><con1:attributes><con1:property key="com.eviware.loadui.api.model.ComponentItem@type">Fixed Rate</con1:property><con1:property key="_digest">2947f7e46cf48f5bfdf33ef59a3d9f05</con1:property><con1:property key="_id">com.eviware.FixedRate</con1:property><con1:property key="_classLoader">com.eviware.FixedRate</con1:property></con1:attributes><con1:addons/></con1:component><con1:connection outputTerminalId="0ddc6eb9-90e7-4eee-a134-744c77bdb94c/outgoingTerminal" inputTerminalId="8968f42b-745e-4d1c-94f0-c7ac906378ee/stateTerminal"/><con1:connection outputTerminalId="8968f42b-745e-4d1c-94f0-c7ac906378ee/triggerTerminal" inputTerminalId="96a89e64-8c2b-4528-bba1-258022e24dcf/triggerTerminal"/></con1:scene><con1:statistics><con1:page title="DefaultLoadUIStatisticPage"><con1:chartGroup type="com.eviware.loadui.api.statistics.model.chart.line.LineChartView" title="" groupType="Monitors"><con1:attributes/></con1:chartGroup></con1:page></con1:statistics></con1:loadui-project><con:loadUITestScenario projectId="4886ffcc-9b23-4e15-bc7b-703eb2d2bc80" scenarioId="f62c4c3e-dcc7-44d7-b247-71ad93c2bea0" name="New Scenario" id="35a13d0e-9e14-4f2d-9151-9e91081fa107"><con:settings/></con:loadUITestScenario></con:loadUiTest></con:soapui-project>